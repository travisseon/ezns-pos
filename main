<%--
File : /lotte/at/e/ATE01.jsp
Name : 일반매출등록(SAP)
Auth : 김태훈
2021-03-31  설수진     엑셀다운로드 버튼 추가
--%>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ include file="/WEB-INF/jsp/common/taglibs.jsp"%>
<%@ include file="/WEB-INF/jsp/common/jworktaglibs.jsp"%>

<%--<link rel="stylesheet" type="text/css" href="<c:url value='/ClipReport4/css/clipreport.css' />" >--%>
<%--<script type='text/javascript' src="<c:url value='/ClipReport4/js/clipreport.js' />"></script>--%>
<%--<script type='text/javascript' src="<c:url value='/ClipReport4/js/UserConfig.js' />"></script>--%>

<meta name="decorator" content="${theme}" />
<script type="text/javascript">
require(["jquery", "jwork", "jwork.ui.jtree", "jwork.util", "jwork.locale.messages", "jwork-ui-jgrid-migrate", "jwork.ui.jselectbox", "cmm.common", "jwork.ui.datepicker", "az.common", "at.common", "af.common", "ate01.common", "ac.common"], function ($, J, JLM) {
    var maingrid = null;
    var subgrid = null;
    var subgrid1 = null;
    var cardGrid = null;
    var repPaidGrid = null;
    var giftGrid = null;
    var sijaGrid = null;
    var supyGrid = null;
    var foreGrid = null;
    var cancGrid = null;
    var bankGrid = null;
    var PGImportGrid = null;
    var cardImpotGrid1 = null;
    var cardImpotGrid2 = null;
    var cardImpotGrid3 = null;
    var comboJobTypeCd = null;
    var comboShopClassCd = null;
    var comboJobTypeCd_H = null;
    var comboShopClassCd_H = null;
	var comboSellTypeCd = <jcode:selectGrid codeGrpId='T32' isJson="true"/>;
	var comboSttlMthCd = <jcode:selectGrid codeGrpId='T16' isJson="true"/>;
	var comboCheckTypeCd = <jcode:selectGrid codeGrpId='T61' isJson="true"/>;
	var comboCheckAmtCd = <jcode:selectGrid codeGrpId='T20' isJson="true"/>;
	var comboBankCd = <jcode:selectGrid codeGrpId='T30' isJson="true"/>;
	var comboFoTypeCd = <jcode:selectGrid codeGrpId='455' isJson="true"/>;
	var comboCashTcTypeCd = <jcode:selectGrid codeGrpId='T38' isJson="true"/>;
    //var comboCreditTypeCd = null;
    var comboPgTypeCd = null;
    var comboPPaidTypeCd = null;
    var comboDivGsberSttlCd = null;
    var comboEtcValueCd = null;
    var currRow = null;
    var sijaRow = null;
    var BUKRS 		= '${sessionScope.SessionVO.BUKRS}';
    var toDayDtm 	= window.getGmtDateTime(null);
    var newYn 		= true;
    var cashTxt		= "";
    var amtTxt		= "";
    var removeTotCardAmt = 0;
    var saveFlag = null;
    var searchData = null;
    var detailSearchFlag = null;
    var blnEventYN1 = false;
    var blnEventYN2 = false;
    var blnEventYN3 = false;
    var cardEmvData = new Object();  //여전법 관련 카드정보
    var mainRow = "";
    var canRowId = "";
    var memCardEmvData = new Object();
    window.basicSearch = function(){
        if(!cmm_validateDate($('#S_StartDay'),$('#S_EndDay'),3)) return;
        if($("#SellOccuTypeCd_H option:selected").val() != "" ){
            cmm_openPopupATZ35({
                S_PosId 	  		: ""
                ,S_SlipId 	  		: ""
                ,S_StartDay 		: $('#S_StartDay').val().replace(/-/g, "")
                ,S_GSBER      		: $("#S_GSBER").val()
                ,S_BUKRS      		: $("#S_BUKRS").val()
                ,S_SellOccuTypeCd 	: $("#SellOccuTypeCd_H option:selected").val()
            });
        } else {
            $("#JobTypeCd_H").val($("#spn_JobTypeCd_H option:selected").val());
            $("#ShopClassCd_H").val($("#spn_ShopClassCd_H option:selected").val());
            if (!$("#searchForm").validate()) {
                return false;
            }
            newYn = false;
            basicNew();
            J.unbindMaskData();
            maingrid.request({
                url : "<c:url value='/lotte/at/e/searchATE01.do' />",
                method : "POST",
                data : {
                    formData : $('#searchForm').formToJsonString()
                },
                dataType : "json",
                exception : function(response) {
                },
                response : function(response) {
                    if(maingrid.getRowCount() == 1){
                        gridMainClick(maingrid, maingrid.getLastRow());
                    }
                }
            });
            J.setupMask();
        }
    };
    window.basicSave = function() {
        if(($("#DivGsberBAmt").val() != 0 || $("#DivGsberDAmt").val() != 0 ) && $("#GSBER").val() == $("#DivGsberSttlGSBER").val()) {
            alert("본지점발생/대체 사업영역과 매출등록사업영역이 같습니다.");
            return;
        }
        if (saveFlag == false){
            alert('저장중 입니다. 잠시 기다려 주십시오.');
            return false;
        }
        if ($("#OrdSlipId").val() != null && $("#OrdSlipId").val() != "") {
            alert('<spring:message code="AT.E.ATE01.text1" text="이미 저장된 건입니다."/>');
            return false;
        }
        if (!regFormValidate()) {
            $("#mainFrame").show();
            $("#subFrame").hide();
            return;
        }
        if (sijaGrid.get('R0', 'ChanAmt') != 0) {
            alert('<spring:message code="AT.E.ATE01.text2" text="잔액이 0이 아닙니다."/>');
            return;
        }
        if(!giftGrid.validate()){
            $("#mainFrame").hide();
            $("#subFrame").show();
            $("#tabGift span").click();
            return;
        }
        var apprNo = cardGrid.search("ActTypeCd6", "T5900009", true, true);
        if (apprNo != null && apprNo.rowStatus != "N") {
            if (!confirm("휴대폰 승인 카드 결제를 등록할 경우\n카드 결제를 취소하지 않으면 해당 전표를 삭제할 수 없습니다.\n정말로 저장하시겠습니까?")) {
                return;
            }
        } else {
            if (!confirm(J.getMessage("cmm.information.003"))) {
                return;
            }
        }
        J.unbindMaskData();
        saveFlag = false;
        $.ajax({
            url : "<c:url value='/lotte/at/e/saveATE01.do' />",
            type : "POST",
            async: false ,
            data : {
                regData : $("#regForm").formToJsonString()
                ,gridData : statusChange(subgrid)
                ,cashData : $("#cashForm").formToJsonString()
                ,supyGrid : statusChange(supyGrid)
                ,cardGrid : statusChange(cardGrid)
                ,cancGrid : statusChange(cancGrid)
                ,giftGrid : statusChange(giftGrid)
                ,foreGrid : statusChange(foreGrid)
                ,bankGrid : statusChange(bankGrid)
                ,cardImportGrid1 : statusChange(cardImpotGrid1)
                ,cardImportGrid2 : statusChange(cardImpotGrid2)
                ,cardImportGrid3 : statusChange(cardImpotGrid3)
                ,PGImportGrid : statusChange(PGImportGrid) // 2021-07-16 PG 업로드 추가
                ,credData : $("#credForm").formToJsonString()
                ,pPaidData : $("#pPaidForm").formToJsonString()
                ,repPaidGrid : statusChange(repPaidGrid)
                ,sRecpData : $("#sRecpForm").formToJsonString()
                ,cashOSData : $("#cashOSForm").formToJsonString()
                ,pointData : $("#memPointFormUse").formToJsonString()
                ,sBandChargeData : $("#sBandChargeForm").formToJsonString()
                ,sBandRefundData : $("#sBandRefundForm").formToJsonString()
                ,divGsberData : $("#DivGsberForm").formToJsonString()
            },
            dataType : "json",
            success : function(response) {
                alert('<spring:message code="AT.E.ATE01.text3" text="정상 처리 되었습니다."/>');
                $("#subFrame").hide();
                $("#mainFrame").show();
                $("#OrdBUKRS").val(response.BUKRS);
                $("#OrdGSBER").val(response.GSBER);
                $("#OrdSlipId").val(response.SellNo);
                $("#OrdSellDate").val(response.SellDate);
                $("#OrdPosId").val(response.PosId);
                $("#OrdShopSysCd").val(response.ShopSysCd);
                $("#OrdSellOccuTypeCd").val(response.SellOccuTypeCd);

                $(".btn_del").show();
                $(".btn_save").hide();
                saveFlag = null;
                J.setupMask();
                response.crudYn = "S";
                if(response.SellCd != "X" ){
                    fn_beforeCashPopOpen(response);
                    fn_lotteMemPointSavePop(response);
                }
                basicSearch();
            },
            exception : function(response) {
            }
        });
    };
    window.fn_beforeCashPopOpen = function(obj){
        var res = null;
        res = obj;
        var getHg = $("#totalCashAmt").val();
        var getSp = $("#totalSupyoAmt").val();
        var getGf = $("#totalGiftAmt").val();

        var tcnt = 0;
        if(getHg.trim() != "0" && getHg.trim() != "")	tcnt++;
        if(getSp.trim() != "0" && getSp.trim() != "")	tcnt++;
        if(getGf.trim() != "0" && getGf.trim() != "")	tcnt++;

        res.getHg = getHg;
        res.getSp = getSp;
        res.getGf = getGf;
        if(tcnt > 0) {
            fn_cashPopOpen(res);
        }
    };
    window.basicRemove = function() {
        var ctot = 0;
        var tempGrid = cancGrid.getData(true);
        var repPaidgrid = repPaidGrid.getData(true, true);//20220720

        if (repPaidgrid.length > 0 ) {
            for(var i=0; i<repPaidgrid.length;i++){
                if(repPaidGrid.get(repPaidgrid[i].rowId, "RepPaidTypeCd") == "T8400008" || repPaidGrid.get(repPaidgrid[i].rowId, "RepPaidTypeCd") == "T8400015" || repPaidGrid.get(repPaidgrid[i].rowId, "RepPaidTypeCd") == "T8400018"){
                    alert("티켓선수금/법인영업/소셜선수는 대체매출을 삭제할 수 없습니다. 전산실에 문의하세요.");
                    return;
                }
            }
        }
        for(var i=0; i<tempGrid.length; i++){
            if(tempGrid[i].CancelYN == "1"){
                if(tempGrid[i].AppFlag == "0"){
                    ctot += tempGrid[i].DealAmt;
                }
            }
        }
        var CardSum = parseInt(removeTotCardAmt) - parseInt(ctot);
        var cardCheck = sijaGrid.search("SttlMthNm", '신용카드', true, true);
        if (cardCheck != null && cardCheck.rowStatus != "N" ) {
            alert('<spring:message code="AT.C.ATC05.message9" text="취소되지 않은 카드 결재건이 있습니다."/>');
            return false;
        }
        if ($('#OrdPosId').val() == "") {
            alert('<spring:message code="AT.E.ATE01.text4" text="목록을 선택하세요."/>');
            return;
        }
        // 티켓 선수금 및 소셜 선수는 삭제할 수 없도록 Validation 추가 (2021-12-19 정우정)
        if ($('#PPaidTypeCd').val()=='T8400008' || $('#PPaidTypeCd').val()=='T8400018' || $('#PPaidTypeCd').val()=='T8400015'){
            alert('티켓선수금/법인영업/소셜선수는 발생매출을 삭제할 수 없습니다. 전산실에 문의하세요.');
            return false;
        }
        if(!confirm(J.getMessage("cmm.information.005"))) {
            return;
        }
        J.unbindMaskData();
        $(".off").attr("disabled", false);
        $.ajax({
            url        : "<c:url value='/lotte/at/e/removeATE01.do' />"
            ,type       : "POST"
            ,async      : false
            ,data       : {
                regData : $("#regForm").formToJsonString()
                ,gridData : statusChange(subgrid)
                ,cashData : $("#cashForm").formToJsonString()
                ,supyGrid : statusChange(supyGrid)
                ,cancGrid : statusChange(cancGrid)
                ,giftGrid : statusChange(giftGrid)
                ,foreGrid : statusChange(foreGrid)
                ,bankGrid : statusChange(bankGrid)
                ,credData : $("#credForm").formToJsonString()
                ,pPaidData : $("#pPaidForm").formToJsonString()
                ,repPaidGrid   : statusChange(repPaidGrid)
                ,sRecpData : $("#sRecpForm").formToJsonString()
                ,cashOSData : $("#cashOSForm").formToJsonString()
                ,pointDataUse : $("#memPointFormUse").formToJsonString()
                ,pointDataSave : $("#memPointFormSave").formToJsonString()
                // 핸드링
                ,sBandChargeData : $("#sBandChargeForm").formToJsonString()
                ,sBandRefundData : $("#sBandRefundForm").formToJsonString()
                // 본지점
                ,divGsberData : $("#DivGsberForm").formToJsonString()
            }
            ,dataType   : "json"
            ,success    : function(response) {
                if(response.MidOut == -100){
                    alert("삭제버튼은 두번 이상 클릭할 수 없습니다.");
                    return;
                }
                response.crudYn = "D";
                alert('<spring:message code="AT.E.ATE01.text5" text="매출이 취소 되었습니다."/>');

                if(cashTxt == "발행"){
                    fn_beforeCashPopOpen(response);
                }
                $("#subFrame").hide();
                $("#mainFrame").show();
                newYn = false;
                basicNew();
                $("#SellOccuTypeCd_H").val("");
                basicSearch();
            }
            ,exception  : function(response) {
            }
        });
        J.setupMask();
    };
    window.basicNew = function() {
		if ((sijaGrid.get('R0', 'DebtorAmt') != 0 || sijaGrid.get('R0', 'CreditAmt') != 0) && !$('#basicSave').is(':hidden')) {
			alert('<spring:message code="AT.E.ATE01.text27" text="처리 중인 결제 내역이 있습니다.\n저장하여 주십시요."/>');
		}
        $("#mainFrame").show();
        $("#subFrame").hide();
        var amt = cardGrid.get('R0', 'DealAmt')
            + cardImpotGrid1.get('R0', 'DealAmt')
            + cardImpotGrid2.get('R0', 'DealAmt')
            + cardImpotGrid3.get('R0', 'DealAmt')
            + PGImportGrid.get('R0', 'DealAmt');
        if(amt != 0 && !$('#basicSave').is(':hidden')){
            alert('<spring:message code="AT.E.ATE01.text6" text="처리중인 카드정보가 있습니다."/>');
            return;
        }
        cmmClearForm("mainData");
        cmmClearForm("subFrame");
        subgrid.clear();
        subgrid1.clear();
        supyGrid.clear();
        cardGrid.clear();
        repPaidGrid.clear();
        cancGrid.clear();
        giftGrid.clear();
        foreGrid.clear();
        sijaGrid.clear();
        bankGrid.clear();
        cardImpotGrid1.clear();
        cardImpotGrid2.clear();
        cardImpotGrid3.clear();
        PGImportGrid.clear();
        onChangeGSBERCombo();
        onChangePPaidTypeCd();
        $(".date").datepicker();
        $("#SellDate").val(toDayDtm.substring(0, 10));
        $("#RtnEndDate").val(toDayDtm.substring(0, 10));
        $("#ProcType").val('<spring:message code="AT.E.ATE01.text7" text="일반매출등록 신규"/>');
        $("#GSBER,#SellDate,#JobTypeCd,#ShopClassCd,#TypeShopCd,#LocalQty,#ForeignerQty,#Etc").attr("disabled", false);
        $('#TypeShopNm').attr("disabled", false).removeClass("off").addClass("help_pr");
        $(".btn_del").hide();
        $("#btnStkShopPop").show();
        $("#SellDate_button").show();
        $("#subgridBtnIn").show();
        $("#subgridBtnDel").show();
        detailSearchFlag = null;
        if(newYn == true){
            $(".btn_save").show();
        }else{
            $(".btn_save").hide();
        }
        SijaeSum();
        newYn = true;
        J.setupMask();
    };
    //maingrid 클릭시
    var gridMainClick = function(obj, rowId, columnName) {
        var rowData = maingrid.get(rowId);
        $(".btn_save").hide();
        cashTxt = obj.get(rowId, "CashApprYn");
        amtTxt  = obj.get(rowId, "CancelYN");
        var amt = cardGrid.get('R0', 'DealAmt') + cardImpotGrid1.get('R0', 'DealAmt') + cardImpotGrid2.get('R0', 'DealAmt') + cardImpotGrid3.get('R0', 'DealAmt') + PGImportGrid.get('R0', 'DealAmt');
        if(amt != 0 && !$('#basicSave').is(':hidden')){
            alert('<spring:message code="AT.E.ATE01.text6" text="처리중인 카드정보가 있습니다."/>');
            return;
        }
        cmmClearForm("mainData");
        cmmClearForm("subFrame");
        subgrid.clear();
        subgrid1.clear();
        supyGrid.clear();
        cardGrid.clear();
        repPaidGrid.clear();
        cancGrid.clear();
        giftGrid.clear();
        foreGrid.clear();
        sijaGrid.clear();
        bankGrid.clear();
        cardImpotGrid1.clear();
        cardImpotGrid2.clear();
        cardImpotGrid3.clear();
        PGImportGrid.clear();
        $('#EmpRegDate').val(rowData.RegDtTm);
        $('#EmpRegEmpNm').val(rowData.RegEmpNm);
        $('#EmpUptDate').val(rowData.ModiDtTm);
        $('#EmpUptEmpNm').val(rowData.ModiEmpNm);
        searchData = {
            BUKRS : rowData.BUKRS,
            GSBER : rowData.GSBER,
            PosId : rowData.PosId,
            SlipId : rowData.SlipId,
            SellDate : rowData.SellDate,
            SellOccuTypeCd : rowData.SellOccuTypeCd,
            ShopClassCd : rowData.ShopClassCd
        };
        $.ajax({
            url   : "<c:url value='/lotte/at/e/searchATE01M1.do' />",
            type  : "POST",
            async : false,
            data  : searchData,
            dataType : "json",
            exception : function(response) {
            },
            success : function(response) {
                if (response.RegFormData != null) {
                    $("#ProcType").val('<spring:message code="AT.E.ATE01.text8" text="일반매출등록 조회"/>');
                    $('#regForm').fillWith(response.RegFormData);				//등록정보 항목
                    $(".NormalSellNo").val(response.RegFormData.NormalSellNo);
                    $("#getVatAmt").val(response.RegFormData.TotVatAmt);
                    $(".btn_del").hide();
                    if(response.RegFormData.CancelYN == "1"){
                        $("#OrgCancelYN").attr("checked", "checked");

                    }else if(response.RegFormData.CancelYN == "0"){
                    }
                    onChangeGSBERCombo();
                    $("#JobTypeCd").val(response.RegFormData.JobTypeCd);
                    onChangeJobTypeCdCombo("",response.RegFormData.JobTypeCd);
                    $("#ShopClassCd").val(response.RegFormData.ShopClassCd);
                    $('#regSijaForm').fillWith(response.RegFormSijaData);
                    J.setupMask();
                    detailSearchFlag = true;
                    searchSubGrid(searchData);
                    $("#GSBER,#SellDate,#JobTypeCd,#ShopClassCd,#TypeShopCd,#LocalQty,#ForeignerQty,#Etc").attr("disabled", true);
                    $('#TypeShopNm').attr("disabled", true).removeClass("help_pr").addClass("off");
                    $("#btnStkShopPop").hide();
                    $("#SellDate_button").hide();
                    custEventBlock(false);
                };
            }
        });
        mainRow = rowId;
    };
    //상세정보 조회 ajax
    function searchSubGrid(data) {
        subgrid.request({
            url : "<c:url value='/lotte/at/e/searchATE01S1.do' />",
            method : "POST",
            data : data,
            dataType : "json",
            exception : function(response) {
            },
            response : function(response) {
                $("#subgridBtnIn").hide();
                $("#subgridBtnDel").hide();
				var subgridData = subgrid.getData(true, true);
                for(var i=0; i<subgridData.length; i++){
                    rowId = subgridData[i].rowId;

                    subgrid.setEditable(rowId,"SellItemCd", false);
                    subgrid.setEditable(rowId,"SellNm", false);
                    subgrid.setEditable(rowId,"Price", false);
                    subgrid.setEditable(rowId,"SellQty", false);
                    subgrid.setEditable(rowId,"SellAmt", false);
                    subgrid.hideButton(rowId ,"SellNm", true);
                }
            }
        });
    };
    comboJobTypeCd = $("#spn_JobTypeCd").JSelectBox({
        onChange : onChangeJobTypeCdCombo
    });
    comboJobTypeCd_H = $("#spn_JobTypeCd_H").JSelectBox({
        onChange : onChangeJobTypeCdCombo_H
    });
    comboShopClassCd = $("#spn_ShopClassCd").JSelectBox({
        cls : "vt_notnull",
        onChange : onChangeShopClassCdCombo,
        vtCode : "AT.E.ATE01.text10",
        alt : '<spring:message code="AT.E.ATE01.text9" text="업장분류"/>'
    });
    comboShopClassCd_H = $("#spn_ShopClassCd_H").JSelectBox({
        vtCode : "AT.E.ATE01.text10",
        alt : '<spring:message code="AT.E.ATE01.text9" text="업장분류"/>'
    });
    comboPgTypeCd = $("#spn_PgTypeCd").JSelectBox({
        onChange : onChangePgTypeCd
    });
    comboPPaidTypeCd = $("#spn_PPaidTypeCd").JSelectBox({
        isUseDefaultOption : false,
        onChange : onChangePPaidTypeCd
    });
    comboEtcValueCd = $("#EtcValueCd").JSelectBox({

        isUseDefaultOption : false,
        onChange : onChangeEtcValueCd
    });
    comboDivGsberSttlCd 		= $("#spn_DivGsberSttlCd").JSelectBox({
        cls : "vt_notnull"
        ,alt : '<spring:message code="AT.E.ATE01.DivGsberSttlCd" text="본지점시재구분"/>'
        ,onChange : onChangeDivGsberSttlCdCombo
    });
    //사업영역 선택시 상세보기 콤보박스 세팅
    window.onChangeGSBERCombo = function() {
        comboShopClassCd.removeAll();
        getGridComboCode($("#GSBER").val(), "T61", "", ""); //수표종류
        getGridComboCode($("#GSBER").val(), "T20", "", "");
        getGridComboCode($("#GSBER").val(), "T30", "", "");
        getGridComboCode($("#GSBER").val(), "455", "6", "1"); //외화
        getGridComboCode($("#GSBER").val(), "T38", "", ""); //외화
        comboShopClassCd.ajax({
            async : false,
            url : "/cmm/getCode.do",
            methodType : "POST",
            data : {
                codeGrpId : "T80",
                type : "ETCFILTERCODE",
                etcSeq : '5',
                etc01 : '1',
                etc20 :  $("#GSBER").val()
            }
        });
        //외상종류콤보박스 미사용여부 체크된 항목 안 나오도록 개선	2019-03-22 권희정 수정
        /* comboCreditTypeCd.ajax({
						async : false,
						url : "/cmm/getCode.do",
						methodType : "POST",
						data : {
							codeGrpId : "T17",
							type : "MAPCODE",
							etc20 :  $("#GSBER").val()
						}
					}); */
        /* comboCreditTypeCd.ajax({
				        async : true,
				        url        : "/cmm/getCode.do",
				        methodType : "POST",
				        data       :{
				        	type : "ATC05.CreditTypeCd",
				        	etc20 :  $("#GSBER").val()
				        }
				    }); */
        comboPgTypeCd.removeAll();
        comboPgTypeCd.ajax({
            async : false,
            url   : "/cmm/getCode.do",
            data  :{
                codeGrpId : "T59",
                type : "MAPCODE",
                etc20 :  $("#GSBER").val()
            },
            methodType : "POST"
        });
        comboJobTypeCd.removeAll();
        comboJobTypeCd.ajax({
            url : "/cmm/getCode.do",
            async : false,
            data : {
                codeGrpId : "J01",
                type : "MAPCODE",
                etc20 : $("#GSBER").val()
            },
            methodType : "POST"
        });
        comboPPaidTypeCd.removeAll();
        comboPPaidTypeCd.ajax({
            url : "/cmm/getCode.do",
            async : false,
            data : {
                codeGrpId : "T84",
                type : "MAPCODE",
                etc20 : $("#GSBER").val()
            },
            methodType : "POST"
        });
        comboEtcValueCd.removeAll();
        comboEtcValueCd.ajax({
            url : "/cmm/getCode.do",
            async : false,
            data : {
                codeGrpId : "TS2",
                type : "MAPCODE",
                etc20 : $("#GSBER").val()
            },
            methodType : "POST"
        });
        onChangePPaidTypeCd();
        $("#CardBUKRS").val("${sessionScope.SessionVO.BUKRS}");
        $("#CardGSBER").val($("#GSBER").val());
        $("#BUKRS").val("${sessionScope.SessionVO.BUKRS}");
        $("#GSBER").val($("#GSBER").val());
    };
    function onChangeJobTypeCdCombo_H(event, value) {
        comboShopClassCd_H.removeAll();
        if (value != "") {
            comboShopClassCd_H.ajax({
                url : "/cmm/getCode.do",
                async : false,
                data : {
                    codeGrpId : "J02",
                    type : "ETCFILTERCODE",
                    etcSeq : "3",
                    etc01 : value,
                    etc20 : $("#GSBER").val()
                },
                methodType : "POST"
            });
        }
    }
    //2014.11.09 김학수 행사코드 조회 막기 및 풀기
    function custEventBlock(value){
        if(!value)
        {
            $("#EventCd, #EventSeq, #EventNm").val("");
            $("#EventCd, #EventNm").attr("disabled", true);
            $("#EventCd").attr("class","basic code off");
            $("#EventNm").attr("class","basic name_s01 off");
            $("#btnEventPop").hide();
            subgrid1.clear();
        }
        else
        {
            if(blnEventYN1 && blnEventYN2 && blnEventYN3)
            {
                $("#EventCd, #EventNm").attr("disabled", false);
                $("#EventCd").attr("class","basic code help_pr");
                $("#EventNm").attr("class","basic name_s01 help_pr");
                $("#btnEventPop").show();
            }
        }
    }
    function onChangeJobTypeCdCombo(event, value) {
        var index = $("#ShopClassCd option").index($("#ShopClassCd option:selected"));
        if(index == 0) blnEventYN2 = false;
        comboShopClassCd.removeAll();
        if (value != "") {
            comboShopClassCd.ajax({
                url : "/cmm/getCode.do",
                async : false,
                data : {
                    codeGrpId : "J02",
                    type : "ETCFILTERCODE",
                    etcSeq : "3",
                    etc01 : value,
                    etc20 : $("#GSBER").val()
                },
                methodType : "POST"
            });
        }
        //2014.11.09 김학수
        switch(value)
        {
            case "J0100003" : //티켓
            case "J0100004" : //민속관
            case "J0100005" : //스포츠
            case "J0100021" : //찜질방
            case "J0100007" : //운영
            case "J0100006" : //주차
                blnEventYN1 = true;
                custEventBlock(true);
                break;
            default:
                blnEventYN1 = false;
                custEventBlock(false);
                break;
        }
    }
    function onChangePPaidTypeCd(event, value) {
        cmmClearForm("pPaidForm");
        PPaidAmtSum();
        PPaidTickeAmtSum();

        $("#PPaidTypeCd").val(value);

        if (value == "T8400008" ) {
            $(".PPaidType2").attr("readonly", "readonly");
            $(".PPaidType2").addClass("off");
            $(".PPaidType2Btn").show();

            $(".PPaidType1").removeAttr("readonly");
            $(".PPaidType1").removeClass("off");
            $(".PPaidType1Btn").show();
        } else {
            $(".PPaidType1").attr("readonly", "readonly");
            $(".PPaidType1").addClass("off");
            $(".PPaidType1Btn").hide();

            $(".PPaidType2").removeAttr("readonly");
            $(".PPaidType2").removeClass("off");
            $(".PPaidType2Btn").show();
        }
        $.ajax({
            url : "<c:url value='/lotte/at/e/searchPPaidSttlATE01.do' />",
            type : "POST",
            data : {
                BUKRS 			: $("#BUKRS").val(),
                GSBER 			: $("#GSBER").val(),
                PPaidTypeCd	: $("#PPaidTypeCd").val(),
                Gubun			: 'Occur'
            },
            dataType : "json",
            exception : function(response) {
            },
            success : function(response) {
                if(response.result == null ||response.result == ""){
                    $("#PPaidSttlMthCd").val("T1600008");
                }
                else {
                    $("#PPaidSttlMthCd").val(response.result);
                }
            }
        });
    }
    function onChangePgTypeCd(event, value) {
        $("#PgTypeCd").val(value);
    }
    function onChangeEtcValueCd(event, value) {
        if(value == "TS200002") {
            //$("#btnChargePop").show();
            $("#btnChargePop").hide();
        } else if(value == "TS200001"){
            $("#btnChargePop").hide();
        }
    }
    function onChangeDivGsberSttlCdCombo(event, value){
        if(value == "T1600067") {
            $("#DivGsberDAmt").val("0");
            $("#DivGsberDAmt").attr("disabled", true);
            $("#DivGsberDAmt").attr("class","basic value off");

            $("#DivGsberBAmt").attr("disabled", false);
            $("#DivGsberBAmt").attr("class","basic value");
        } else if(value == "T1600068") {
            $("#DivGsberBAmt").val("0");
            $("#DivGsberBAmt").attr("disabled", true);
            $("#DivGsberBAmt").attr("class","basic value off");

            $("#DivGsberDAmt").attr("disabled", false);
            $("#DivGsberDAmt").attr("class","basic value");
        }
        DivGsberAmtSum();
    };
    function onChangeShopClassCdCombo(event, value) {
        $("#TypeShopCd, #TypeShopNm, #StkShopCd, #StkShopNm").val("");
        blnEventYN3 = false;
        if (value != null) {
            switch(value)
            {
                case "J0200006" :  // 티켓매출업장
                case "J0200008" :  // 민속관업장
                    blnEventYN2 = true;
                    custEventBlock(true);
                    break;
                case "J0200021" :  // 아이스링크
                case "J0200059" :  // 찜질방매표
                case "J0200060" :  // 충전정산소
                case "J0200057" : //찜질방
                case "J0200033" : // 주차매출업장
                    blnEventYN2 = true;
                    blnEventYN3 = true;
                    custEventBlock(true);
                    break;
                default:
                    blnEventYN2 = false;
                    custEventBlock(false);
                    break;
            }
            //02. ajax 호출
            $.ajax({
                url : "<c:url value='/lotte/at/c/searchShopInfoATC05.do'/>",
                type : "POST",
                data : {
                    ShopTypeCd : value,
                    BUKRS : $("#BUKRS").val(),
                    GSBER : $("#GSBER").val()
                },
                dataType : "json",
                exception : function(response) {
                },
                success : function(response) {
                    if (response.result != null) {
                        var rowData = response.result;
                        $("#TypeShopCd").val(rowData.ShopCd);
                        $("#TypeShopNm").val(rowData.ShopNm);
                        $("#TypeDeptCd").val(rowData.DeptCd);
                        $("#ShopSysCd").val(rowData.ShopSysCd);
                        $("#POSYN").val(rowData.POSYN);
                        $("#StkShopCd, #StkShopNm").val("");
                    }
                }
            });
        }
    }
    /**************************************************************************
     * Declare Validations
     ***************************************************************************/
    $(function(){
        InitailzeSearchCombo();
        $("#S_GSBER").bind("change",function(){
            InitailzeSearchCombo();
        });
    });
    function InitailzeSearchCombo(){
        comboShopClassCd_H.removeAll();
        comboShopClassCd_H.ajax({
            async : false,
            url : "/cmm/getCode.do",
            methodType : "POST",
            data : {
                codeGrpId : "T80",
                type : "ETCFILTERCODE",
                etcSeq : '5',
                etc01 : '1',
                etc20 : this.value
            }
        });
        comboJobTypeCd_H.removeAll();
        comboJobTypeCd_H.ajax({
            url : "/cmm/getCode.do",
            async : false,
            data : {
                codeGrpId : "J01",
                type : "MAPCODE",
                etc20 : $("#GSBER").val()
            },
            methodType : "POST"
        });
        /* comboSellOccuTypeCd_H.removeAll();
					comboSellOccuTypeCd_H.ajax({
						url : "/cmm/getCode.do",
						async : false,
						data : {
							codeGrpId : "T100",
							type : "MAPCODE",
							etc20 : $("#GSBER").val()
						},
						methodType : "POST"
					}); */
        comboDivGsberSttlCd.removeAll();
        comboDivGsberSttlCd.ajax({
            async : false,
            url : "/lotte/at/e/searchDivGsberTypeCdATE01.do",
            methodType : "POST",
            data : {
                codeGrpId : "T16"
                ,	type : "MAPCODE"
                ,	etc20 : $("#GSBER").val()
            }
        });
    }
    /**************************************************************************
     * Popup Event Handler
     ***************************************************************************/
    $(function() {
        //외상구분코드 조회 팝업
        $('#btnCreditTypePopUp').bind("click", function(){
            var CreditTypeCd = $("#CreditTypeCd").val();
            var CreditTypeNm = $("#CreditTypeNm").val();
            $("#CreditTypeCd, #CreditTypeNm").val("");
            $("#CreditAmt").val(0);
            cmm_openPopupAZZ23({
                GSBER	: $('#GSBER').val()
                ,Code	: CreditTypeCd
                ,CodeNm	: CreditTypeNm
                ,UseEventYn : '0'
            });
        });
        $("#CreditTypeCd, #CreditTypeNm").bind("change", function() {
            if(this.value != "") {
                $("#btnCreditTypePopUp").click();
            } else {
                $("#CreditTypeCd, #CreditTypeNm").val("");
            }
        });
        window.AZZ23CallBack = function(data, form) {
            $("#CreditTypeCd").val(data.CODE);
            $("#CreditTypeNm").val(data.CODE_NM);
        };
        $("#btnStkShopPop").bind("click", function() {
            var StkShopCd = $("#TypeShopCd").val();
            var StkShopNm = $("#TypeShopNm").val();
            $("#TypeShopCd, #TypeShopNm, #ShopSysCd").val("");
            cmm_openPopupACZ15({
                ShopCd : StkShopCd,
                ShopNm : StkShopNm,
                JobTypeCd : $("#JobTypeCd").val(),
                ShopClassCd : $("#ShopClassCd").val(),
                GSBER : $("#GSBER").val()
            });
        });
        $("#btnChargePop").bind("click", function() {
            cmm_openPopupATZ36({
                S_GSBER      		: $("#GSBER").val()
                ,S_BUKRS      		: $("#BUKRS").val()
                ,S_SysType		    : ""
                ,S_EventCd		    : ""
                ,S_EventSeq	        : ""
                ,S_TktCd		    : ""
                ,S_PlanSysCd	    : ""
                ,S_ExpFrDate	    : ""
                ,S_ExpToDate	    : ""
                ,S_StdDate		    : toDayDtm
                ,S_EntTime		    : ""
                ,S_RelYN		    : "N"
                ,S_PayDate		    : ""
                ,S_PayAmt		    : ""
                ,S_MultiTotCnt	    : ""
                ,S_MultiUseCnt	    : ""
                ,S_MultiStdAmt	    : ""
            });
        });
        $("#TypeShopCd, #TypeShopNm").bind("change", function() {
            if (this.value != "") {
                $("#btnStkShopPop").click();
            } else {
                $("#TypeShopCd, #TypeShopNm, #ShopSysCd").val("");
            }
        });
        window.ATZ35CallBack = function(selectedData, rowId) {
            newYn = false;
            basicNew();
            maingrid.clear();
            maingrid.setData(selectedData);
        };

        window.ACZ15CallBack = function(selectedData, form) {
            $("#TypeShopCd").val(selectedData.ShopCd);
            $("#TypeShopNm").val(selectedData.ShopNm);
            $("#JobTypeCd").val(selectedData.JobTypeCd);
            $("#ShopSysCd").val(selectedData.ShopSysCd);
            onChangeJobTypeCdCombo("", selectedData.JobTypeCd);
            $("#ShopClassCd").val(selectedData.ShopClassCd);
            switch(selectedData.JobTypeCd)
            {
                case "J0100003" : //티켓
                case "J0100004" : //민속관
                case "J0100005" : //스포츠
                case "J0100021" : //찜질방
                case "J0100007" : //운영
                case "J0100006" : //주차
                    blnEventYN1 = true;
                    break;
                default:
                    blnEventYN1 = false;
                    break;
            }
            switch(selectedData.ShopTypeCd)
            {
                case "J0300017" : // 입장권류
                case "J0300018" : // 시설권류
                case "J0300019" : // 관람권류
                    blnEventYN3 = true;
                    break;
                default:
                    blnEventYN3 = false;
                    break;
            }
            switch(selectedData.ShopClassCd)
            {
                case "J0200006" :  // 티켓매출업장
                case "J0200008" :  // 민속관업장
                    blnEventYN2 = true;
                    custEventBlock(true);
                    break;
                case "J0200021" :  // 아이스링크
                case "J0200060" :  // 충전정산소
                case "J0200059" :  // 찜질방매표
                case "J0200057" : // 렌탈
                case "J0200033" : // 주차매출업장
                case "J0200011" : // 게임기집금업장
                    blnEventYN2 = true;
                    blnEventYN3 = true;
                    custEventBlock(true);
                    break;
                default:
                    blnEventYN2 = false;
                    custEventBlock(false);
                    break;
            }
        };
        window.AZZ01CallBack = function(selectedData, form) {
            $("#EventCd").val(selectedData.EventCd);
            $("#EventNm").val(selectedData.EventNm);
            $("#EventSeq").val(selectedData.EventSeq);
            J.unbindMaskData();
            BUKRS = $("#BUKRS").val();
            subgrid1.request({
                url : "<c:url value='/lotte/at/e/searchATE01S2.do' />",
                method : "POST",
                data : {
                    BUKRS : BUKRS,
                    GSBER : $("#GSBER").val(),
                    S_EventCd : selectedData.EventCd,
                    S_EventSeq : selectedData.EventSeq
                },
                dataType : "json",
                exception : function(response) {
                },
                response : function(response) {
                }
            });
        };
        window.ATZ03CallBack = function(selectedData, form, rowId) {
            giftGrid.modify(rowId, "ValItem1" , selectedData.MdsCpnCd);
            giftGrid.modify(rowId, "ValItem20", selectedData.MdsCpnNm);
            giftGrid.modify(rowId, "ValItem2" , selectedData.SeqNo01);
            giftGrid.modify(rowId, "ValAmt1"  , selectedData.PrintAmt);
            GiftAmtSum();
        };
        window.ACZ02CallBack = function(selectedData, form) {
            if (form == "sija") {
                $("#SjCustCd").val(selectedData.CustCd);
                $("#SjCustNm").val(selectedData.CustNm);
                $("#SjAddr").val(selectedData.BizAddr);
                $("#CustomNm").val(selectedData.Owner);
                $("#LawRegNo").val(selectedData.BizNo_Nation1);	//사업자번호
                $("#ResId").val(selectedData.PersonId_TelexNo);	//생년월일
                $("#Tel01").val(selectedData.Tel);
            } else if (form == "pPaid") {
                $("#PPaidCustCd").val(selectedData.CustCd);			//거래처코드
                $("#PPaidCustNm").val(selectedData.CustNm);			//거래처명
                $("#PPaidBizNo").val(selectedData.BizNo_Nation1);	//사업자번호
                $("#PPaidBizNo").val().replace(/-/g, "");	//사업자번호

                $("#PPaidBizAddr").val(selectedData.BizAddr);		//거래처주소(hidden)
                $("#EMPNM").val(selectedData.Owner);				//고객명
                $("#BirthD").val(selectedData.PersonId_TelexNo);	//생년월일
                $("#GrpTel").val(selectedData.Tel);					//연락처
            }
        };
        //선수금대체 팝업 콜백 작업
        window.ATZ16CallBack = function(selectedData, form, rowId) {
            var EmpId = selectedData.EmpId;
            var LoginEmpId = "${sessionScope.SessionVO.EMPID}"
            if(selectedData.PPaidTypeCd == 'T8400010'){
                if(EmpId != LoginEmpId){
                    alert('<spring:message code="AT.E.ATE01.message261" text="Bank선수금은 등록자만 선택할 수 있습니다."/>');
                    return false;
                }
            }
            if(selectedData.PPaidTypeCd == 'T8400019'){
                alert("선수금_월할 행사형식은 대체처리가 불가능합니다. 매달 말일 자동 대체 진행됩니다.");
                return false;
            }
            if( !repPaidGrid ){
                return;
            }
            var RepOrdBUKRS = repPaidGrid.search("RepOrdBUKRS", selectedData.RepOrdBUKRS, true, true);
            var RepOrdGSBER = repPaidGrid.search("RepOrdGSBER", selectedData.RepOrdGSBER, true, true);
            var RepOrdPosId = repPaidGrid.search("RepOrdPosId", selectedData.RepOrdPosId, true, true);
            var RepOrdSlipId = repPaidGrid.search("RepOrdSlipId", selectedData.RepOrdSlipId, true, true);
            var RepOrdSellDate = repPaidGrid.search("RepOrdSellDate", selectedData.RepOrdSellDate, true, true);
            if (RepOrdBUKRS != null && RepOrdBUKRS.rowStatus != "N"
                && RepOrdGSBER != null && RepOrdGSBER.rowStatus != "N"
                && RepOrdPosId != null && RepOrdPosId.rowStatus != "N"
                && RepOrdSlipId != null && RepOrdSlipId.rowStatus != "N"
                && RepOrdSellDate != null && RepOrdSellDate.rowStatus != "N"	) {
                alert('<spring:message code="AT.C.ATE01.message15" text="동일한 사업자가 존재합니다."/>');
                return;
            }
            repPaidGrid.modify(rowId, "RepOrdBUKRS" , selectedData.RepOrdBUKRS);
            repPaidGrid.modify(rowId, "RepOrdGSBER" , selectedData.RepOrdGSBER);
            repPaidGrid.modify(rowId, "RepOrdPosId" , selectedData.RepOrdPosId);
            repPaidGrid.modify(rowId, "RepOrdSlipId" , selectedData.RepOrdSlipId);
            repPaidGrid.modify(rowId, "RepOrdSellDate" , selectedData.RepOrdSellDate);
            repPaidGrid.modify(rowId, "RepOrdSeq" , selectedData.RepOrdSeq);
            repPaidGrid.modify(rowId, "RepPaidCustCd" , selectedData.CustCd);
            repPaidGrid.modify(rowId, "RepPaidCustNm" , selectedData.CustNm);
            repPaidGrid.modify(rowId, "RepPaidTypeCd" , selectedData.PPaidTypeCd);
            repPaidGrid.modify(rowId, "tPPaidTypeCd" , selectedData.tPPaidTypeCd);
            repPaidGrid.modify(rowId, "PPaidBizNo" , selectedData.PPaidBizNo);
            repPaidGrid.modify(rowId, "GuestNm" , selectedData.GuestNm);
            repPaidGrid.modify(rowId, "BirthD" , selectedData.BirthD);
            repPaidGrid.modify(rowId, "GrpTel" , selectedData.GrpTel);
            repPaidGrid.modify(rowId, "EventName" , selectedData.EventName);
            repPaidGrid.modify(rowId, "EventStart" , selectedData.EventStart);
            repPaidGrid.modify(rowId, "EventEnd" , selectedData.EventEnd);
            repPaidGrid.modify(rowId, "PPaidAmt" , selectedData.PPaidAmt);
            repPaidGrid.modify(rowId, "RemAmt" , selectedData.RemAmt);
            repPaidGrid.modify(rowId, "RepPaidAmt" , selectedData.RepPaidAmt);
            RepPaidAmtSum();
        }
        window.getGridComboCode = function(GSBER, codeGrp, seq, etcVal) {
            $.ajax({
                url : "<c:url value='/lotte/at/c/searchComboATC05.do' />",
                methodType : "POST",
                data : {
                    BUKRS : BUKRS,
                    GSBER : GSBER,
                    CODE_GRP_ID : codeGrp,
                    SEQ : seq,
                    etcVal : etcVal
                },
                dataType : "json",
                async : false,
                success : function(response) {
                    var rowData = response.result;
                    if (!rowData)return;
                    if (codeGrp == "T61")comboCheckTypeCd = rowData;
                    else if (codeGrp == "T20")comboCheckAmtCd = rowData;
                    else if (codeGrp == "T30")comboBankCd = rowData;
                    else if (codeGrp == "455")comboFoTypeCd = rowData;
                    else if (codeGrp == "T38")comboCashTcTypeCd = rowData;
                    else if(codeGrp == "T32") comboSellTypeCd   = rowData;
                },
                exception : function(response) {
                    alert(response.message);
                }
            });
        };
        //불출내역조회 버튼 클릭시
        $('#SearchExptOutOrder').bind("click", function() {
            // 롯데멤버십포인트 사용된경우
            if(!fn_sijaUseCheck(sijaGrid)){
                alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
                return;
            }
            //거래처 불출 조회 팝업 오픈
            cmm_openPopupAZZ14({
                SearchCUSTSELLNO : $('#CUSTSELLNO').val(),
                GSBER 		: $('#GSBER').val()
                ,isNotUsed	: 'Y'
            });
        });
        window.AZZ14CallBack = function(selectedData) {
            $.ajax({
                url : "<c:url value='/lotte/at/e/searchCustSellATE01.do'/>"
                ,type : "POST"
// 							,data : selectedData
                ,data       : {
                    GSBER          : selectedData.GSBER
                    , custSellCd     : selectedData.CUSTSELLNO
                }
                ,dataType : "json"
                ,exception : function(response) {
                },
                success : function(response) {
                    $('#pPaidForm').fillWith(response);
                    $("#PPaidBizNo").val().replace(/-/g, "");	//사업자번호
                    $('#CUSTSELLNO').val(selectedData.CUSTSELLNO);
                    PPaidTickeAmtSum();
                    J.setupMask();
                }
            });
        };
    });
    var regFormValidate = function() {
        if ($("#GSBER").val() == null || $("#GSBER").val() == "") {
            alert('<spring:message code="AT.E.ATE01.text10" text="사업영역을 선택하세요."/>');
            $("#GSBER").focus();
            return false;
        }
        if ($("#SellDate").val() == null
            || $("#SellDate").val() == "") {
            alert('<spring:message code="AT.E.ATE01.text11" text="매출일자를 선택하세요."/>');
            $("#SellDate").focus();
            return false;
        }
        if ($("#JobTypeCd").val() == null
            || $("#JobTypeCd").val() == "") {
            alert('<spring:message code="AT.E.ATE01.text12" text="업무를 선택하세요."/>');
            $("#JobTypeCd").focus();
            return false;
        }
        if ($("#ShopClassCd").val() == null
            || $("#ShopClassCd").val() == "") {
            alert('<spring:message code="AT.E.ATE01.text13" text="업장분류를 선택하세요."/>');
            $("#ShopClassCd").focus();
            return false;
        }
        if ($("#TypeShopCd").val() == null
            || $("#TypeShopCd").val() == "") {
            alert('<spring:message code="AT.E.ATE01.text14" text="매출업장명(프론트업장)을 선택하세요."/>');
            $("#TypeShopCd").focus();
            return false;
        }
        return subgrid.validate();
    };
    function setSerialData(){
        var pCard_info = $("#hhdBixCardInfo").val();
        var card_info;
        var arrCardInfo;
        var card_no;
        var valid_term;
        card_info = pCard_info.replace("$l$","").replace("$w$","");
        arrCardInfo = card_info.split("=");
        card_no = arrCardInfo[0];
        valid_term = arrCardInfo[1].substring(0,4);
        if(card_no.length != 16){
            alert("유효한 카드번호가 아닙니다.(XXXX-XXXX-XXXX-XXXX)");
        }
        else{
            $("#CardNo").val(card_info);
            $("#ValidTerm").val(valid_term);
            $("#CardNo").change();
        }
    }
    $("#btnBixMsrRead").bind("click", function() {
        setSerialData();
    })
    $(function() {
        $("#SellOccuTypeCd_H").bind("change",function() {
            if(this.value != "") {
                cmm_openPopupATZ35({
                    S_PosId 	  		: ""
                    ,S_SlipId 	  		: ""
                    ,S_StartDay 		: $('#S_StartDay').val().replace(/-/g, "")
                    ,S_GSBER      		: $("#S_GSBER").val()
                    ,S_BUKRS      		: $("#S_BUKRS").val()
                    ,S_SellOccuTypeCd 	: this.value
                });
            }
        });
        $("#selectImportGrid").bind("change",function() {
            if(this.value == "1"){
                $("[id^=CardImportForm]").hide();
                $("#CardImportForm1").show();
            }else if(this.value == "2"){
                $("[id^=CardImportForm]").hide();
                $("#CardImportForm2").show();
            }else{
                $("[id^=CardImportForm]").hide();
                $("#CardImportForm3").show();
            }
        });
        window.moveATF01 = function() {
            if(parent){
                parent.menuByUserDatail('ATF01', {});
            }else{
                location.href ="<c:url value='/lotte/at/f/ATF01.do' />";
            }
        };
        window.supyGridClickButton = function(rowId) {
            var data = supyGrid.get(rowId);
            if (data.ValItem1 == null || data.ValItem1 == "") {
                alert('<spring:message code="AT.E.ATE01.text15" text="수표번호를 입력하세요"/>');
                supyGrid.focusIn(rowId, "ValItem1");
                //수표번호 22 자리 만 가능
            } else if(String(data.ValItem1).length != 22) {
                alert('<spring:message code="AT.E.ATE01.text16" text="수표 번호 22자리를 입력하세요."/>');
                supyGrid.focusIn(rowId , "ValItem1");
            } else if (data.ValItem3 == null || data.ValItem3 == "") {
                alert('<spring:message code="AT.E.ATE01.text17" text="발행일자를 입력하세요"/>');
                supyGrid.focusIn(rowId, "ValItem3");
            } else if (data.PrintAmt == null || data.PrintAmt == "") {
                alert('<spring:message code="AT.E.ATE01.text18" text="권면금액를 입력하세요."/>');
                supyGrid.focusIn(rowId, "ActTypeCd1");
            } else {
                $.ajax({
                    url : "<c:url value='/lotte/at/e/sendSupyoApproval.do'/>",
                    type : "POST",
                    data : {
                        formData : $("#regForm")
                            .formToJsonString(),
                        ValItem1 : data.ValItem1,
                        ValItem3 : data.ValItem3.replace(
                            /-/g, ""),
                        PrintAmt : data.PrintAmt
                        ,CODE	: "J1700002"
                    },
                    dataType : "json",
                    exception : function(response) {
                        alert(response.code + " : " + response.message);
                        J.setupMask();
                    },
                    success : function(response) {
                        var rowData = response.result;
                        if (rowData.Cnt == "0"){
                            alert('<spring:message code="AT.E.ATE01.text19" text="수표 조회 중 오류가 발생하였습니다."/>');
                            return;
                        }
                        if (rowData.RespCd == "00") {
                            alert('<spring:message code="cmm.message.404" text="정상 수표입니다."/>');
                        } else {
                            alert('<spring:message code="cmm.message.406" text="사용할 수 없는 수표입니다."/>');
                        }
                    }
                });
            }
        };
        //수동승인
        $("#btnManualApproval").bind("click", function() {
            var gsber = $("#GSBER").val();
            if(gsber == '1250' || gsber == '1260') {
                alert("전산실로 확인바랍니다.");
                return;
            }
            J.unbindMaskData();
            var autoManu  = "T5400001";
            $("#KeyinTypeCd").val(autoManu);
            $.ajax({
                url        : "<c:url value='/lotte/at/e/sendManualApproval.do'/>"
                ,type       : "POST"
                ,data       : {
                    formData : $("#cardForm").formToJsonString()
                    ,CODE	: "J1700002"
                    , SellDate:	$('#SellDate').val()
                }
                ,dataType   : "json"
                ,exception  : function(response) {
                    alert(response.code + " : " + response.message);
                    J.setupMask();
                }
                ,success : function(response){
                    var rowData = response.result;

                    if(fn_appYnChk(rowData, "승인") != true){
                        return;
                    }
                    fn_cardGridInsert(cardGrid, cancGrid, rowData, comboSellTypeCd, autoManu);
                    fn_cardAppInsert();
                    cmmClearForm("cardForm");
                    $("#CardBUKRS").val("${sessionScope.SessionVO.BUKRS}");
                    $("#CardGSBER").val($("#GSBER").val());
                    CardAmtSum();
                }
            });
        });
        window.getSData = function(popData){
            cardEmvData = popData
            //카드승인시
            if(popData.FLAG == "1"){
                $("#CardNo").val(popData.CARDNO);
                $("#PwCard").val(popData.PWCARD);
                $("#CardNo").change();
            }else if(popData.FLAG == "2"){//카드취소시
                $.ajax({
                    async      : false
                    ,url        : "<c:url value='/lotte/at/e/sendCardCancel.do'/>"
                    ,type       : "POST"
                    ,data       : {
                        formData   :  $("#cardForm").formToJsonString()
                        , gridData   : JSON.stringify(cancGrid.getCheckedRowData("defaultCheck"))
                        , CODE		 : "J1700002"
                        , SellDate:	$('#SellDate').val()
                        , cardEmvData : cardEmvData
                    }
                    ,dataType   : "json"
                    ,exception  : function(response) {
                        alert(response.code + " : " + response.message);
                        J.setupMask();
                    }
                    ,success : function(response){
                        var rowData = response.result;
                        if(fn_appYnChk(rowData, "취소") != true){
                            return;
                        }
                        cancGrid.modify(canRowId, "ValItem2"    , rowData.ApprNo   );
                        cancGrid.modify(canRowId, "ActTypeCd10" , rowData.RespCd   );
                        cancGrid.modify(canRowId, "ValItem17"   , rowData.ValItem17);
                        cancGrid.modify(canRowId, "ValItem18"   , rowData.ValItem18);
                        cancGrid.modify(canRowId, "defaultCheck", "0"              );
                        cancGrid.modify(canRowId, "CancelYN"    , "1"              );
                        CardAmtSum();
                        //신용카드 정보 초기화
                        cardEmvData = null;
                    }
                });
            }
        }
        window.getMemSData = function(popData){
            memCardEmvData = {
                CREATEDT : popData.CreateDt,
                ENCARDNO48 : popData.EnCardNo48,
                CARDNO     : popData.CardNo
            };
            $("#USE_CUSTCARDNO").val(popData.CardNo);
            if($("#USE_CUSTGUBUN").val() == "1"){
                $("#USE_CUSTCARDWCC").val("1");
            }else{
                $("#USE_CUSTCARDWCC").val("3");
            }
        }
        //자동승인
        $("#btnAutoApproval").bind("click", function() {
            var gsber = $("#GSBER").val();
            if(gsber == '1240' || gsber == '1250') {
                alert("전산실로 확인바랍니다.");
                return;
            }
            J.unbindMaskData();
            if(fn_beforeAppValChk() == false) return;
            var sendUrl = "";
            if(cardEmvData.ETCVALUE == "1"){ //여전법 적용 대상
                sendUrl = "<c:url value='/lotte/at/e/sendCardApprovalEMV.do'/>"
                autoManu = "T5400005";
            }else{
                sendUrl = "<c:url value='/lotte/at/e/sendCardApproval.do'/>"
                autoManu = "T5400002";
            }
            $("#KeyinTypeCd").val(autoManu);
            $.ajax({
                url        : sendUrl
                ,type       : "POST"
                ,data       : {
                    formData : $("#cardForm").formToJsonString()
                    ,CODE	: "J1700002"
                    ,SellDate:	$('#SellDate').val()
                    ,cardEmvData : cardEmvData
                }
                ,dataType   : "json"
                ,exception  : function(response) {
                    alert(response.code + " : " + response.message);
                    J.setupMask();
                }
                ,success : function(response){
                    var rowData = response.result;
                    if(fn_appYnChk(rowData, "승인") != true){return;}
                    fn_cardGridInsert(cardGrid, cancGrid, rowData, comboSellTypeCd, autoManu);
                    fn_cardAppInsert();
                    cmmClearForm("cardForm");
                    $("#CardBUKRS").val("${sessionScope.SessionVO.BUKRS}");
                    $("#CardGSBER").val($("#GSBER").val());
                    CardAmtSum();
                    //신용카드 정보 초기화
                    cardEmvData = null;
                }
            });
        });
        window.fn_cardAppInsert = function(){
            $.ajax({
                async      : false
                ,url        : "<c:url value='/lotte/at/e/updateCardAppFormATE01.do'/>"
                ,type       : "POST"
                ,data       : {
                    regData : $("#regForm").formToJsonString()
                    , cardForm : $("#cardForm").formToJsonString()
                }
                ,dataType   : "json"
                ,exception  : function(response) {
                    alert(response.code + " : " + response.message);
                    J.setupMask();
                }
                ,success : function(response){
                    cmmClearForm("divCard");
                    $("#DvdTerm").val(0);
                    $("#DealAmt").val(0);
                    CardAmtSum();
                }
            });
        };
        $("#btnHPApproval").bind("click", function() {
            cmm_openPopupATZ28({
                SellDate	:	$('#SellDate').val()
                ,	BUKRS		:	"${sessionScope.SessionVO.BUKRS}"
                ,	GSBER		:	$("#GSBER").val()
            });
        });
        window.ATZ28CallBack1 = function(data){
            if( !cardGrid ){
                return;
            }
            var apprNo = cardGrid.search("ValItem2", data.ApprNo, true, true);
            var cardNo = cardGrid.search("ValItem1", data.CardNo, true, true);
            var dealAmt = cardGrid.search("DealAmt", data.DealAmt, true, true);
            if (apprNo != null && apprNo.rowStatus != "N"
                && cardNo != null && cardNo.rowStatus != "N"
                && dealAmt != null && dealAmt.rowStatus != "N" ) {
                alert('<spring:message code="AT.E.ATE01.text22" text="동일한 결제내역이 존재합니다."/>');
                return;
            }
            //ate01.common.js
            InsertCardORCancGridRow(data, cardGrid, cancGrid);

            CardAmtSum();
            cmmClearForm("cardForm");
            $("#CardBUKRS").val("${sessionScope.SessionVO.BUKRS}");
            $("#CardGSBER").val($("#GSBER").val());
        };
        $('#mainGridBtn').bind("click", function() {
            gridDisplayToggle("mainGridBtn", "mainGridDiv");
            return false;
        });
        $('#subGridBtn').bind("click", function() {
            gridDisplayToggle("subGridBtn", "subGridDiv");
            return false;
        });
        $(".btnRowInsert").live("click", function() {
            if ($(this).attr("value") == "sub") {
                    currRow = subgrid.add();
            } else if ($(this).attr("value") == "gift") {
                    var rowId = gifGrid.add();
                    giftGrid.modify(rowId, "ValAmt1", "0");
                    giftGrid.modify(rowId, "ValQty1", "1")
            } else if ($(this).attr("value") == "fore") {
               var rowId = foreGrid.add();
				foreGrid.setItems(rowId, "ActTypeCd1", comboFoTypeCd);  foreGrid.setItems(rowId, "ActTypeCd2", comboCashTcTypeCd)

            } else if ($(this).attr("value") == "supy") {
					var rowId = supyGrid.add();
                    supyGrid.modify(rowId, "Qty", "1");
                    supyGrid.setItems(rowId, "ActTypeCd3", comboCheckTypeCd);
                    supyGrid.setItems(rowId, "ActTypeCd1", comboCheckAmtCd);
                    supyGrid.setItems(rowId, "ActTypeCd2", comboBankCd)
            } else if ($(this).attr("value") == "bank") {
                // 롯데멤버십포인트 사용된경우
                    if (!fn_sijaUseCheck(sijaGrid)) {  alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');  return;
                    }
                    bankGrid.add();
            } else if($(this).attr("value") == "reppaid") { //선수대체 추가 작업
                for (var i = 0; i < $("#addRepPaidRowCount").val(); i++) {
                        var rowId = repPaidGrid.add();
                        repPaidGrid.setEditable(rowId, "RepPaidCustCd", true);
                        repPaidGrid.setEditable(rowId, "RepPaidCustNm", false);
                        repPaidGrid.setEditable(rowId, "RepPaidAmt", true);

                        repPaidGrid.setAttribute(rowId, "RepPaidCustCd","backgroundColor", "#cff092");
                        repPaidGrid.setAttribute(rowId, "RepPaidCustNm", "backgroundColor", "#cff092");
                        repPaidGrid.setAttribute(rowId, "RepPaidAmt", "backgroundColor", "#cff092");
                    }
            }
        });
        $(".btnRowDelete").bind("click", function() {

            if ($(this).attr("value") == "sub") {
                var checkedList = subgrid.getCheckedRowId('defaultCheck');
                for ( var i = 0; i < checkedList.length; i++) {
                    subgrid.remove(checkedList[i]);
                }
                SellAmtSum();
            } else if ($(this).attr("value") == "gift") {
                var checkedList = giftGrid.getCheckedRowId('defaultCheck');
                for ( var i = 0; i < checkedList.length; i++) {
                    giftGrid.remove(checkedList[i]);
                }
                GiftAmtSum();
            } else if ($(this).attr("value") == "fore") {
                var checkedList = foreGrid.getCheckedRowId('defaultCheck');
                for ( var i = 0; i < checkedList.length; i++) {
                    foreGrid.remove(checkedList[i]);
                }
                ForeAmtSum();
            } else if ($(this).attr("value") == "supy") {
                var checkedList = supyGrid.getCheckedRowId('defaultCheck');
                for ( var i = 0; i < checkedList.length; i++) {
                    supyGrid.remove(checkedList[i]);
                }
                SupyAmtSum();
            } else if ($(this).attr("value") == "CardImport") {
                if($("#selectImportGrid").val() == "1"){
                    var checkedList = cardImpotGrid1.getCheckedRowId('defaultCheck');
                    for ( var i = 0; i < checkedList.length; i++) {
                        cardImpotGrid1.remove(checkedList[i]);
                    }
                }else if($("#selectImportGrid").val() == "2"){
                    var checkedList = cardImpotGrid2.getCheckedRowId('defaultCheck');
                    for ( var i = 0; i < checkedList.length; i++) {
                        cardImpotGrid2.remove(checkedList[i]);
                    }
                }else{
                    var checkedList = cardImpotGrid3.getCheckedRowId('defaultCheck');
                    for ( var i = 0; i < checkedList.length; i++) {
                        cardImpotGrid3.remove(checkedList[i]);
                    }
                }
                CardAmtSum();
            } else if ($(this).attr("value") == "bank") {
                var checkedList = bankGrid.getCheckedRowId('defaultCheck');
                for ( var i = 0; i < checkedList.length; i++) {
                    bankGrid.remove(checkedList[i]);
                }
                BankAmtSum();
            } else if($(this).attr("value") == "reppaid") { //선수대체 추가 작업
                var checkedList = repPaidGrid.getCheckedRowId('defaultCheck');
                for(var i=0; i<checkedList.length; i++) {
                    repPaidGrid.remove(checkedList[i]);
                }
                RepPaidAmtSum();
            } else if ($(this).attr("value") == "PGImport") {
                var checkedList = PGImportGrid.getCheckedRowId('defaultCheck');
                for ( var i = 0; i < checkedList.length; i++) {
                    PGImportGrid.remove(checkedList[i]);
                }
                CardAmtSum();
            }
        });
        $("#btnAppr").bind("click", function() {
            if (!regFormValidate()) {
                return;
            } else {
                $("#mainFrame").hide();
                $("#subFrame").show();
                if(amtTxt == "정상매출"){
                    $(".btn_del").show();
                }else{
                    $(".btn_del").hide();
                }
                $("#PPaidTypeCd").attr("disabled", false); //(신규)일 때는 선수금 탭의 행사형식 자유롭게 수정 가능(티켓선수금, 소셜 선수 삭제 못하게 하기 위하여 2021-12-19 정우정)
                if (detailSearchFlag == true) {
                    // 시재별 조회
                    $("#PPaidTypeCd").attr("disabled", true); //(기존 정보 조회)일 때는 선수금 탭의 행사형식 수정 불가하도록 (티켓선수금, 소셜 선수 삭제 못하게 하기 위하여 2021-12-19 정우정)
                    $.ajax({
                        async      : false
                        ,url        : "<c:url value='/lotte/at/e/searchATE01Sija.do'/>"
                        ,type       : "POST"
                        ,data       : {
                            BUKRS : $("#OrdBUKRS").val(),
                            GSBER : $("#OrdGSBER").val(),
                            PosId : $("#OrdPosId").val(),
                            SlipId : $("#OrdSlipId").val(),
                            SellDate : $("#OrdSellDate").val(),
                            SellOccuTypeCd : $("#OrdSellOccuTypeCd").val(),
                            getTotHyungum			:	$("#getTotHyungum").val(),
                            getTotCredAmt			:	$("#getTotCredAmt").val(),
                            getTotSrecpAmt			:	$("#getTotSrecpAmt").val(),
                            getTotCashOsAmt1			:	$("#getTotCashOsAmt1").val(),
                            getTotForeAmt			:	$("#getTotForeAmt").val(),
                            getTotBankAmt			:	$("#getTotBankAmt").val(),
                            getTotGiftAmt			:	$("#etTotGiftAmt").val(),
                            getTotPPaidTickeVatAmt	:	$("#getTotPPaidTickeVatAmt").val(),
                            getTotCashOsAmt			:	$("#getTotCashOsAmt").val(),
                            i_totCard				:	$("#i_totCard").val(),
                            getTotSupyoAmt			:	$("#getTotSupyoAmt").val(),
                            getTotPPaidAmt			:	$("#getTotPPaidAmt").val(),
                            getTotRePPaidTickeAmt	:	$("#getTotRePPaidTickeAmt").val(),
                            getTotPPaidTickeAmt		:	$("#getTotPPaidTickeAmt").val(),
                            getTotPointAmt			: 	$("#getTotPointAmt").val(),
                            getTotPointSaveAmt		: 	$("#getTotPointSaveAmt").val(),
                            //핸드링
                            getTotBandChargeAmt		: 	$("#getTotBandChargeAmt").val(),
                            getTotBandRefundAmt		: 	$("#getTotBandRefundAmt").val(),
                            //본지점
                            getDivGsberBAmt			: 	$("#getDivGsberBAmt").val(),
                            getDivGsberDAmt			: 	$("#getDivGsberDAmt").val()
                        }
                        ,dataType   : "json"
                        ,exception  : function(response) {
                            alert(response.code + " : " + response.message);
                            J.setupMask();
                        }
                        ,success : function(response){
                            if (response.CashFormData != null){
                                $('#cashForm').fillWith(response.CashFormData);
                                CashAmtSum();
                            }
                            if(response.CredFormData != null){
                                $('#credForm').fillWith(response.CredFormData);
                                CredAmtSum();
                            }
                            if(response.PPaidFormData != null && response.PPaidFormData.PPaidAmt != 0){
                                onChangePPaidTypeCd("", response.PPaidFormData.PPaidTypeCd);
                                $('#pPaidForm').fillWith(response.PPaidFormData);
                                $("#PPaidCustCd").val(response.PPaidFormData.CustCd);
                                $("#PPaidCustNm").val(response.PPaidFormData.CustNm);
                                PPaidAmtSum();
                            }else if(response.PPaidTickeFormData != null && response.PPaidTickeFormData.PPaidAmt != 0){
                                //onChangePPaidTypeCd("", "T8400008");
                                $('#pPaidForm').fillWith(response.PPaidTickeFormData);	//선수금탭
                                //$("#PPaidTypeCd").val("T8400008");
                                $("#PPaidCustCd").val(response.PPaidTickeFormData.CustCd);
                                $("#PPaidCustNm").val(response.PPaidTickeFormData.CustNm);
                                PPaidTickeAmtSum();
                            }
                            if(response.RePPaidFormData != null){
                                onChangePPaidTypeCd("", response.RePPaidFormData.PPaidTypeCd);
                                var rowData = response.RePPaidFormData;
                                $('#divPPaid').fillWith(rowData);	//선수금대체 탭
                                var CustCd = rowData.CustCd;
                                var CustNm = rowData.CustNm;
                                $("#RepPaidCustCd").val(CustCd);
                                $("#RepPaidCustNm").val(CustNm);
                                $("#rePPaidTypeCd").val(rowData.PPaidTypeCd);
                                RepPaidAmtSum();
                            }
                            if(response.SRecpFormData != null){
                                $('#sRecpForm').fillWith(response.SRecpFormData);		//가수금 탭
                                SRecpAmtSum();
                            }
                            // 핸드링
                            if(response.sBandChargeFormData != null){
                                $('#sBandChargeForm').fillWith(response.sBandChargeFormData);
                                SbandChargeAmtSum();
                            }
                            if(response.sBandRefundFormData != null){
                                $('#sBandRefundForm').fillWith(response.sBandRefundFormData);
                                SbandRefundAmtSum();
                            }
                            if(response.CashOSFormData != null){
                                $('#cashOSForm').fillWith(response.CashOSFormData);	//현금과다 탭
                                cashOSAmtSum();
                            }
                            if(response.LotteMemPointFormData != null){
                                $('#memPointFormUse').fillWith(	response.LotteMemPointFormData);
                                PointSum();
                            }
                            if(response.LotteMemPointFormSaveData != null){
                                $('#memPointFormSave').fillWith(response.LotteMemPointFormSaveData);
                            }
                            if(response.DivGsberFormData != null){
                                $('#DivGsberForm').fillWith(response.DivGsberFormData);
                                DivGsberAmtSum();
                            }
                            SellAmtSum();
                            //선수금 대체 추가 작업
                            if ( $("#getTotRePPaidAmt").val() > "0" ){
                                repPaidGrid.request({
                                    async      : false
                                    ,url        : "<c:url value='/lotte/at/e/searchRePPaidATE01.do'/>"
                                    ,method       : "POST"
                                    ,data       : {
                                        GSBER          : $("#GSBER").val()
                                        ,BUKRS          : $("#BUKRS").val()
                                        ,SellDate       : $("#SellDate").val().replace(/-/g, "")
                                        ,SlipId         : $("#OrdSlipId").val()
                                        ,PosId          : $("#OrdPosId").val()
                                        ,SttlMthCd      : "T1600018"
                                        ,SellOccuTypeCd : $("#OrdSellOccuTypeCd").val()
                                    }
                                    ,dataType   : "json"
                                    ,exception  : function(response) {
                                        alert(response.code + " : " + response.message);
                                    }
                                    ,response : function(response){
                                        RepPaidAmtSum();
                                    }
                                });
                            }
                            if ( $("#getTotRePPaidTickeAmt").val() > "0" ){
                                repPaidGrid.request({
                                    async      : false
                                    ,url        : "<c:url value='/lotte/at/e/searchRePPaidTickeATE01.do'/>"
                                    ,method       : "POST"
                                    ,data       : {
                                        GSBER          : $("#GSBER").val()
                                        ,BUKRS          : $("#BUKRS").val()
                                        ,SellDate       : $("#SellDate").val().replace(/-/g, "")
                                        ,SlipId         : $("#OrdSlipId").val()
                                        ,PosId          : $("#OrdPosId").val()
                                        ,SttlMthCd      : "T1600047"
                                        ,SellOccuTypeCd : $("#OrdSellOccuTypeCd").val()
                                    }
                                    ,dataType   : "json"
                                    ,exception  : function(response) {
                                        alert(response.code + " : " + response.message);
                                    }
                                    ,response : function(response){
                                        RepPaidAmtSum();
                                    }
                                });
                            }
                            // 수표조회
                            if( $("#getTotSupyoAmt").val() != null && $("#getTotSupyoAmt").val() != "0" ){
                                supyGrid.request({
                                    url : "<c:url value='/lotte/at/e/searchSupyATE01.do' />",
                                    method : "POST",
                                    data : searchData,
                                    dataType : "json",
                                    exception : function(response) {
                                    },
                                    response : function(response) {
                                        SupyAmtSum();
                                    }
                                });
                            }
                            // 카드조회
                            if( $("#i_totCard").val() != null && $("#i_totCard").val() != "0" ){
                                cardGrid.request({
                                    url : "<c:url value='/lotte/at/e/searchCardATE01.do' />",
                                    method : "POST",
                                    data : searchData,
                                    dataType : "json",
                                    exception : function(response) {
                                    },
                                    response : function(response) {
                                        cancGrid.request({
                                            url : "<c:url value='/lotte/at/e/searchCardATE01.do' />",
                                            method : "POST",
                                            data : searchData,
                                            dataType : "json",
                                            exception : function(response) {
                                            },
                                            response : function(response) {
                                                CardAmtSum();
                                                removeTotCardAmt = $("#input_card").val();
                                            }
                                        });
                                    }
                                });
                            }
                            // 외화조회
                            if( $("#getTotForeAmt").val() != null && $("#getTotForeAmt").val() != "0" ){
                                foreGrid.request({
                                    url : "<c:url value='/lotte/at/e/searchForeATE01.do' />",
                                    method : "POST",
                                    data : searchData,
                                    dataType : "json",
                                    exception : function(response) {
                                    },
                                    response : function(response) {
                                        ForeAmtSum();
                                    }
                                });
                            }
                            // 상품권조회
                            if( $("#getTotGiftAmt").val() != null && $("#getTotGiftAmt").val() != "0" ){
                                giftGrid.request({
                                    url : "<c:url value='/lotte/at/e/searchGiftATE01.do' />",
                                    merhod : "POST",
                                    async: false ,
                                    data : searchData,
                                    dataType : "json",
                                    exception : function(response) {
                                    },
                                    response : function(response) {
                                        GiftAmtSum();
                                    }
                                });
                            }
                            // 무통장조회
                            if( $("#getTotBankAmt").val() != null && $("#getTotBankAmt").val() != "0" ){
                                bankGrid.request({
                                    url : "<c:url value='/lotte/at/e/searchBankATE01.do' />",
                                    merhod : "POST",
                                    data : searchData,
                                    dataType : "json",
                                    exception : function(response) {
                                    },
                                    response : function(response) {
                                        BankAmtSum();
                                        J.setupMask();
                                    }
                                });
                            }
                        }
                    });
                }
            }
        });
        $("#btnEasyCheck").bind("click",function() {
            J.unbindMaskData();
            //결재금액
            if(!isNum($("#DealAmt").val()) || $("#DealAmt").val() == 0) {
                alert(JLM.getMessage("cmm.warning.211", [$("#DealAmt").attr("alt")]));
                $("#DealAmt").focus();
                return false;
            }
            //카드번호
            if($("#CardNo").val() == "") {
                alert(JLM.getMessage("cmm.warning.211", [$("#CardNo").attr("alt")]));
                $("#CardNo").focus();
                return false;
            }
            //카드명
            if($("#CardNm").val() == "") {
                alert(JLM.getMessage("cmm.warning.211", [$("#CardNm").attr("alt")]));
                $("#CardNm").focus();
                return false;
            }
            //유효기간
            if($("#ValidTerm").val() == "") {
                alert(JLM.getMessage("cmm.warning.211", [$("#ValidTerm").attr("alt")]));
                $("#ValidTerm").focus();
                return false;
            }
            //할부기간
            if($("#DvdTerm").val() == "") {
                alert(JLM.getMessage("cmm.warning.211", [$("#DvdTerm").attr("alt")]));
                $("#DvdTerm").focus();
                return false;
            }
            //승인번호
            if($("#ApprNo").val() == "") {
                alert(JLM.getMessage("cmm.warning.211", [$("#ApprNo").attr("alt")]));
                $("#ApprNo").focus();
                return false;
            }
            var data = cardGrid.search("ValItem2", $("#ApprNo").val(), true, true);
            if (data != null && data.rowStatus != "N") {
                alert('<spring:message code="AT.E.ATE01.text22" text="동일한 승인번호가 존재합니다."/>');
                return;
            }
            var rowId = cardGrid.add();
                    cardGrid.modify(rowId, "ActTypeCd5", "T5400004");
                    cardGrid.modify(rowId, "SellTypeCd", "T3200001");
                    cardGrid.modify(rowId, "ValItem2", $("#ApprNo").val());
                    cardGrid.modify(rowId, "ValItem11", $("#MembNo").val());
                    cardGrid.modify(rowId, "ValItem13", $("#CardCustBizNo").val());
                    cardGrid.modify(rowId, "ValItem3", $("#CardCustCd").val());
                    cardGrid.modify(rowId, "ValItem4", $("#CardCustMinorCd").val());
                    cardGrid.modify(rowId, "ValItem6", $("#CardPrefix").val());
                    cardGrid.modify(rowId, "ValItem20", $("#CardNm").val());
                    cardGrid.modify(rowId, "ValItem1", $("#CardNo").val());
                    cardGrid.modify(rowId, "DealAmt", $("#DealAmt").val());
                    cardGrid.modify(rowId, "ValItem10", $("#DvdTerm").val());
                    cardGrid.modify(rowId, "ValItem8", $("#ValidTerm").val());
                    cardGrid.modify(rowId, "ValItem9", toDayDtm.replace(/-/g, "").replace(" ", "").replace(":", "").replace(":", ""));

                var rowId2 = cancGrid.add();
                    cancGrid.modify(rowId2, "ActTypeCd5", "T5400004");
                    cancGrid.modify(rowId2, "SellTypeCd", "T3200001");
                    cancGrid.modify(rowId2, "ValItem2", $("#ApprNo").val());
                    cancGrid.modify(rowId2, "ValItem11", $("#MembNo").val());
                    cancGrid.modify(rowId2, "ValItem13", $("#CardCustBizNo").val());
                    cancGrid.modify(rowId2, "ValItem3", $("#CardCustCd").val());
                    cancGrid.modify(rowId2, "ValItem4", $("#CardCustMinorCd").val());
                    cancGrid.modify(rowId2, "ValItem6", $("#CardPrefix").val());
                    cancGrid.modify(rowId2, "ValItem1", $("#CardNo").val());
                    cancGrid.modify(rowId2, "DealAmt", $("#DealAmt").val());
                    cancGrid.modify(rowId2, "ValItem10", $("#DvdTerm").val());
                    cancGrid.modify(rowId2, "ValItem8", $("#ValidTerm").val());
                    cancGrid.modify(rowId2, "ValItem9", $("#SellDate").val());
                    cancGrid.modify(rowId2, "ValItem20", $("#CardNm").val());
                    cancGrid.modify(rowId2, "CancelYN", "0");

                CardAmtSum();
                cmmClearForm("cardForm");
                $("#CardBUKRS").val("1200");
                $("#CardGSBER").val($("#GSBER").val());
        });
        $("#btnCardCancel").bind("click", function() {
            var checkedList = cancGrid.getCheckedRowId('defaultCheck');
            if(checkedList.length < 1) {
                alert('<spring:message code="cmm.message.393" text="선택된 항목이 없습니다."/>');
            } else if(checkedList.length == 1) {
                for(var i=0; i<checkedList.length; i++) {
                    var rowId = checkedList[i];
                    canRowId = rowId;
                    if(cancGrid.get(rowId, "ActTypeCd5") == "T5400004" || cancGrid.get(rowId, "ActTypeCd5") == "T5400016") {
                        if(cancGrid.get(rowId, "CancelYN") == 0) {
                            alert('<spring:message code="AT.E.ATE01.text23" text="EasyCheck취소를 이용하세요."/>');
                            $("#btnEasyCancel").focus();
                        }
                    } else if(cancGrid.get(rowId, "ActTypeCd6") == "T5900009") {
                        if(cancGrid.get(rowId, "CancelYN") == 0) {
                            alert('<spring:message code="AT.E.ATE01.text23" text="강제취소를 이용하세요."/>');
                            $("#btnManualCancel").focus();
                        }
                    }else{
                        var saleDate = "";
                        var bukrs = "";
                        var gsber = "";
                        if(mainRow == "" || mainRow == "0" || mainRow == "-1"){
                            saleDate = $('#SellDate').val();
                            bukrs = $("#BUKRS").val();
                            gsber = $("#GSBER").val();
                        }else{
                            saleDate = maingrid.get(mainRow, "SellDate");
                            bukrs = maingrid.get(mainRow, "BUKRS");
                            gsber = maingrid.get(mainRow, "GSBER");
                        }
                        var agr = {
                            SALEDATE : saleDate,
                            DEALAMT  : cancGrid.get(rowId, "DealAmt"),
                            BUKRS    : bukrs,
                            GSBER    : gsber,
                            CARDNO   : cancGrid.get(rowId, "ValItem1"),
                            DVDTERM  : cancGrid.get(rowId, "ValItem10"),
                            FLAG     : "2"
                        };
                        getCI(agr);
                    }
                }
            } else {
                alert('<spring:message code="AT.E.ATE01.text24" text="한건 이상 취소할수 없습니다."/>');
            }
        });
        $("#btnEasyCancel").bind("click", function() {
            var checkedList = cancGrid.getCheckedRowId('defaultCheck');
            if(checkedList.length < 1) {
                alert('<spring:message code="cmm.message.393" text="선택된 항목이 없습니다."/>');
            }else{
                for(var i=0; i<checkedList.length; i++) {
                    if(cancGrid.get(checkedList[i], "ActTypeCd5") == "T5400004" || cancGrid.get(checkedList[i], "ActTypeCd5") == "T5400016") {
                        if(cancGrid.get(checkedList[i], "CancelYN") == 0) {
                            cancGrid.modify(checkedList[i], "defaultCheck", "0"       );
                            cancGrid.modify(checkedList[i], "CancelYN"    , "1"       );
                            CardAmtSum();
                        } else {
                            alert('<spring:message code="AT.E.ATE01.text25" text="취소 된 건입니다."/>');
                        }
                    } else if(cancGrid.get(checkedList[i], "ActTypeCd5") != "T5400004" || cancGrid.get(checkedList[i], "ActTypeCd5") != "T5400016") {
                        if(cancGrid.get(checkedList[i], "CancelYN") == 0) {
                            if(cancGrid.get(checkedList[i], "ActTypeCd6") == "T5900009") {
                                alert('<spring:message code="AT.E.ATE01.text26" text="강제취소를 이용하세요."/>');
                                $("#btnManualCancel").focus();
                            } else {
                                alert('<spring:message code="AT.E.ATE01.text26" text="승인취소를 이용하세요."/>');
                                $("#btnCardCancel").focus();
                            }
                        } else {
                            alert('<spring:message code="AT.E.ATE01.text25" text="취소 된 건입니다."/>');
                        }
                    }
                }
            }
        });
        $("#btnManualCancel").bind("click", function() {
            var checkedList = cancGrid.getCheckedRowId('defaultCheck');
            if(checkedList.length < 1) {
                alert('<spring:message code="cmm.message.393" text="선택된 항목이 없습니다."/>');
            } else if(checkedList.length == 1) {
                for(var i=0; i<checkedList.length; i++) {
                    if(cancGrid.get(checkedList[i], "CancelYN") == 0) {
                        if (cancGrid.get(checkedList[i], "ActTypeCd6") == "T5900009") {
                            var checkI = checkedList[i];
                            $.ajax({
                                url         : "<c:url value='/lotte/at/e/cancCheckSearchATE01.do' />"
                                ,GSBER       : "POST"
                                ,data        :  {
                                    ApprDate	: cancGrid.get(checkedList[i], "ValItem9"),
                                    CardNo		: cancGrid.get(checkedList[i], "ValItem1"),
                                    ApprNo		: cancGrid.get(checkedList[i], "ValItem2")
                                }
                                ,dataType   : "json"
                                ,exception  : function(response) {
                                }
                                ,success : function(data){
                                    if(data.result == null || data.result== "" || data.result == '') {
                                        alert('<spring:message code="AL.A.ALA01.err02" text="반품 자료가 없는 결제 건은 삭제가 불가능 합니다."/>');
                                        return;
                                    } else {
                                        cancGrid.modify(checkI, "defaultCheck", "0"     );
                                        cancGrid.modify(checkI, "CancelYN"    , "1"     );
                                        cancGrid.modify(checkI, "ActTypeCd10" , "00"	);
                                        cancGrid.modify(checkI, "ValItem9"    , data.result.DealDtTm);
                                        CardAmtSum();
                                    }
                                }
                            });
                        } else {
                            cancGrid.modify(checkedList[i], "SellTypeCd"  , "T3200002");
                            cancGrid.modify(checkedList[i], "defaultCheck", "0"       );
                            cancGrid.modify(checkedList[i], "CancelYN"    , "1"       );
                            CardAmtSum();
                        }
                    } else {
                        alert('<spring:message code="AT.E.ATE01.text25" text="취소 된 건입니다."/>');
                    }
                }
            } else {
                alert('<spring:message code="AT.E.ATE01.text24" text="한건 이상 취소할수 없습니다."/>');
            }
        });
        $("#btnInsert").bind("click", function () {
            var checkedList = subgrid1.getCheckedRowId('defaultCheck');

            for (var i = 0; i < checkedList.length; i++) {
                var gridData = subgrid.search("SellItemCd", subgrid1.get(checkedList[i], "SellItemCd"), true, true);
                if (gridData != null && griddata.rowStatus != "N") {
                    alert('<spring:message code="AT.E.ATE01.text48" text="동일한 매출코드가 존재합니다."/>');
                    return;
                }
                currRow = subgrid.add();
                subgrid.modify(currRow, "SellItemCd", subgrid1.get(checkedList[i], "SellItemCd"));
                subgrid.modify(currRow, "SellNm", subgrid1.get(checkedList[i], "TktNm"));
                subgrid.modify(currRow, "Price", subgrid1.get(checkedList[i], "EventAmt"));
                subgrid.modify(currRow, "PersonTypeNm", subgrid1.get(checkedList[i], "PersonTypeNm"));
                subgrid.modify(currRow, "LgSmTypeNm", subgrid1.get(checkedList[i], "LgSmTypeNm"));
                subgrid.modify(currRow, "EventCd", $("#EventCd").val());
                subgrid.modify(currRow, "EventSeq", $("#EventSeq").val());
                subgrid.modify(currRow, "EventNm", subgrid1.get(checkedList[i], "EventNm"));
                subgrid.setEditable(currRow, "Price", false);
            }
        });
        $("#btnClose").bind("click", function() {
            if(( sijaGrid.get('R0', 'DebtorAmt') != 0 || sijaGrid.get('R0', 'CreditAmt') != 0) && !$('#basicSave').is(':hidden')){
                alert('<spring:message code="AT.E.ATE01.text27" text="처리 중인 결제 내역이 있습니다.\n저장하여 주십시요."/>');
            }
            $(".btn_del").hide();
            $("#mainFrame").show();
            $("#subFrame").hide();
        });
        $("#EventCd, #EventNm").bind("change", function() {

            if (this.value != "") {
                $("#btnEventPop").click();
            } else {
                $("#EventCd, #EventNm, #EventSeq").val("");
            }
        });
        $("#btnEventPop").bind("click", function() {
            var EventCd = $('#EventCd').val();
            var EventNm = $('#EventNm').val();
            $("#EventCd, #EventNm, #EventSeq").val("");
            cmm_openPopupAZZ01({
                EventCd : EventCd,
                EventNm : EventNm,
                EventDate : $("#SellDate").val().replace(/-/g, ""),
                GSBER : $("#GSBER").val()
            });
        });
        $("#SjCustCd, #SjCustNm").bind("change", function() {
            if(this.value != "") {
                switch(this.id) {
                    case "SjCustCd"	: $("#SjCustNm").val("");	break;
                    case "SjCustNm"	: $("#SjCustCd").val("");	break;
                }
                $("#btnSijaCustPop").click();
            }
            else {
                $("#SjCustCd, #SjCustNm").val("");
            }
        });
        $("#btnSijaCustPop, #btnPPaidCustPop").bind("click", function() {
            var CustCd = "";
            var CustNm = "";
            var form = "";
            if (this.id == "btnSijaCustPop") {
                CustCd = $("#SjCustCd").val();
                CustNm = $("#SjCustNm").val();
                form = "sija";
                $("#SjCustCd").val("");
                $("#SjCustNm").val("");
                $("#CreditAmt").val(0);
            }
            if (this.id == "btnPPaidCustPop") {
                CustCd = $("#PPaidCustCd").val();
                CustNm = $("#PPaidCustNm").val();
                form = "pPaid";
                $("#PPaidCustCd").val("");
                $("#PPaidCustNm").val("");
            }
            cmm_openPopupACZ02({
                CustCd : CustCd,
                CustNm : CustNm,
                cmm_form : form
            });
        });
    });
    $("#PPaidCustCd, #PPaidCustNm").bind("change", function() {
        if(this.value != "") {
            $("#btnPPaidCustPop").click();
        } else {
            $("#PPaidCustCd, #PPaidCustNm").val("");
        }
    });
    $("#btnRepPaidCustPop").bind("click", function() {
        var CustCd = $("#RepPaidCustCd").val();
        var CustNm = $("#RepPaidCustNm").val();
        $("#RepPaidCustCd").val("");
        $("#RepPaidCustNm").val("");
        cmm_openPopupATZ16({
            BUKRS : BUKRS
            ,GSBER : $("#GSBER").val()
            ,CustCd : CustCd
            ,CustNm : CustNm
            ,SaleDate : $('#SellDate').val().replaceAll("-","")
        });
    });
    var onClickCell = function(obj, rowId, columnName) {
        sijaRow = obj.getFocusRowId();
        $("#sijaRow").val(sijaRow);
    };
    var onClickBankSearchImage = function(obj, rowId, columnName,cellValue) {
        //무통장은행정보조회 팝업
        cmm_openPopupATZ23({
            my_test : "test1"
            , my_gs  : "test2"
        });
        window.ATZ23CallBack = function(atz23Data, atz24BANKN, atz24BANK) {
            bankGrid.modify(rowId, "ValItem3", atz23Data.IDATE);		//입금일자
            bankGrid.modify(rowId, "ValItem1", atz24BANKN);		//계좌번호
            bankGrid.modify(rowId, "ValItem2", atz24BANK);			//입금은행
            bankGrid.modify(rowId, "ValItem4", atz23Data.ITEXT);		//입금자명
            bankGrid.modify(rowId, "ValItem5", atz23Data.OSEQ);			//무통장관리번호
            bankGrid.modify(rowId, "ValAmt1" , atz23Data.IAMOUNT);		//입금액
            bankGrid.modify(rowId, "ValItem6" , atz23Data.IACCTID);		//계정ID
            bankGrid.modify(rowId, "ValItem7" , atz23Data.ITIME);		//입금시간
            bankGrid.modify(rowId, "ValItem8" , atz23Data.ICURRENCY);		//통화키
        };
    };
    var SijaeSum = function() {
        var ChanAmt = Number(sijaGrid.get('R0', 'ChanAmt'));
        $("#SaleTotAmt").val(sijaGrid.get('R0', 'CreditAmt'));
        $("#ApprTotAmt").val(sijaGrid.get('R0', 'DebtorAmt'));
        if(ChanAmt > 0){
            $("#ChanTotAmt").val(ChanAmt);
            $("#NappTotAmt").val(0);
        }else{
            $("#ChanTotAmt").val(0);
            $("#NappTotAmt").val(ChanAmt * -1);
        }
        J.setupMask();
        $("#SijaSaleTotAmt").empty();
        $("#SijaApprTotAmt").empty();
        $("#SijaChanTotAmt").empty();
        $("#SijaNappTotAmt").empty();

        $("#SijaSaleTotAmt").append($("#SaleTotAmt").val());
        $("#SijaApprTotAmt").append($("#ApprTotAmt").val());
        $("#SijaChanTotAmt").append($("#ChanTotAmt").val());
        $("#SijaNappTotAmt").append($("#NappTotAmt").val());
    };
    var SellAmtSum = function() {
        var SellAmt = subgrid.get('R0', 'SellAmt');
        $("#CredTotalAmt").val(SellAmt);
        //sap그리드 입력
        if (!isNum(SellAmt) || SellAmt == 0) {
            var data = sijaGrid.search("SttlMthNm",'<spring:message code="AT.E.ATE01.text28" text="매출액"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm",'<spring:message code="AT.E.ATE01.text28" text="매출액"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "CreditAmt",SellAmt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text28" text="매출액"/>');
				sijaGrid.modify(rowId,"CreditAmt", SellAmt);
            }
        }
        SijaeSum();
    };
    //선수금대체 추가 작업
    var RepPaidAmtSum = function() {
        var amt = repPaidGrid.get('R0', 'RepPaidAmt');
        $("#RepPaidAmt"    ).val(amt);
        $(".SijaRepPaidAmt").val(amt);
        $(".getTotRePPaidAmt").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text160" text="선수금대체"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text160" text="선수금대체"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "DebtorAmt",amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text160" text="선수금대체"/>');
				sijaGrid.modify(rowId, "DebtorAmt", amt);

            }
        }
        SijaeSum();
    };
    var GiftAmtSum = function() {
        $("#GiftAmt").val(
            giftGrid.get('R0', 'MdsCpnSellAmt'));
        var value = $("#GiftAmt").val();

        $(".SijaGiftAmt").val(giftGrid.get('R0', 'MdsCpnSellAmt'));

        if (!isNum($("#GiftAmt").val()) || $("#GiftAmt").val() == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text29" text="상품권"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text29" text="상품권"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "DebtorAmt",$("#GiftAmt").val());
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text29" text="상품권"/>');
				sijaGrid.modify(rowId, "DebtorAmt", value);
            }
        }
        SijaeSum();
    };
    var ForeAmtSum = function() {
        $("#ForeAmt").val(foreGrid.get('R0', 'ValAmt2'));
        $(".SijaForeAmt").val(foreGrid.get('R0', 'ValAmt2'));
        var value = $("#ForeAmt").val();
        if (!isNum($("#ForeAmt").val()) || $("#ForeAmt").val() == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text30" text="외화"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text30" text="외화"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "DebtorAmt",$("#ForeAmt").val());
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text30" text="외화"/>');
				sijaGrid.modify(rowId, "DebtorAmt", value);
            }
        }
        SijaeSum();
    };
    var calcGiftSum = function(rowData, columnName, value) {
        if (isNum(rowData["ValAmt1"])
            && isNum(rowData["ValQty1"])) {
            return parseInt(rowData["ValAmt1"])
                * parseInt(rowData["ValQty1"]);
        } else {
            return 0;
        }
    };
    // 현금 시재 합계
    var CashAmtSum = function() {
        J.unbindMaskData();
        var value = 0;
        if(isNum($("#N100000").val())){value += parseInt($("#N100000").val());}
        if(isNum($("#N50000").val())){value += parseInt($("#N50000").val());}
        if(isNum($("#N10000").val())){value += parseInt($("#N10000").val());}
        if(isNum($("#N5000").val())){value += parseInt($("#N5000").val());}
        if(isNum($("#N1000").val())){value += parseInt($("#N1000").val());}
        if(isNum($("#N500").val())){value += parseInt($("#N500").val());}
        if(isNum($("#N100").val())){value += parseInt($("#N100").val());}
        if(isNum($("#N50").val())){value += parseInt($("#N50").val());}
        if(isNum($("#N10").val())){value += parseInt($("#N10").val());}
        if(isNum($("#N1").val())){value += parseInt($("#N1").val());}
        $("#CashAmt").val(value);
        $(".SijaCashAmt").val(value);
        if (!isNum($("#CashAmt").val()) || $("#CashAmt").val() == 0) {
            var data = sijaGrid.search("SttlMthNm",'<spring:message code="AT.E.ATE01.text31" text="현금"/>',true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm",'<spring:message code="AT.E.ATE01.text31" text="현금"/>',true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "DebtorAmt",value);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text31" text="현금"/>');
				sijaGrid.modify(rowId, "DebtorAmt", value);
            }
        }
        SijaeSum();
    };

    var CardAmtSum = function() {
        var data    = cancGrid.search("CancelYN", "1", false, true);
        var cancAmt = 0;
        if(data.length > 0) {
            for(var i=0;data.length>i;i++){
                cancAmt += cancGrid.get(data[i].rowId, "DealAmt");
            }
        }
        if(amtTxt == "마이너스전표"){
            cancAmt = cancAmt * -1;
        }
        var amt = 0;
        data    = cardGrid.search("SellTypeCd", "T3200001", false, true);
        if(data.length > 0) {
            for(var i=0;data.length>i;i++){
                amt += cardGrid.get(data[i].rowId, "DealAmt");
            }
        }
        amt += cardImpotGrid1.get('R0', 'DealAmt')
            + cardImpotGrid2.get('R0', 'DealAmt')
            + cardImpotGrid3.get('R0', 'DealAmt')
            + PGImportGrid.get('R0', 'DealAmt'); //2021-07-16 PG 업로드 신규 추가
        var debtorAmt = amt - cancAmt;
        $("#TotCancelAmt").val(cancAmt);
        $(".SijaCardAmt").val(debtorAmt);
        if (!isNum(debtorAmt) || debtorAmt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text32" text="신용카드"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text32" text="신용카드"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "DebtorAmt", debtorAmt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text32" text="신용카드"/>');
				sijaGrid.modify(rowId, "DebtorAmt", debtorAmt);
            }
        }
        SijaeSum();
    };
    $("#CreditAmt").bind("blur", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
        if($("#CreditTypeCd").val() == null || $("#CreditTypeCd").val() == ""){
            alert('<spring:message code="AT.E.ATE01.text33" text="외상종류를 선택하세요."/>');
            $("#CreditAmt").val(0);
        }else if($("#SjCustCd").val() == null || $("#SjCustCd").val() == ""){
            alert('<spring:message code="AT.E.ATE01.text34" text="거래처를 입력하세요."/>');
            $("#CreditAmt").val(0);
        }
        CredAmtSum();
    });
    var CredAmtSum = function() {
        J.unbindMaskData();
        var amt = Number($("#CreditAmt").val());
        $(".SijaCreditAmt").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text35" text="외상매출금"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text35" text="외상매출금"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "DebtorAmt",amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text35" text="외상매출금"/>');
				sijaGrid.modify(rowId, "DebtorAmt", amt);
            }
        }
        SijaeSum();
    };
    var PointSum = function(){
        // 결제 시재 추가
        if (!isNum($("#USE_CUSTUSEPOINT").val()) || $("#USE_CUSTUSEPOINT").val() == 0) {
            var data = sijaGrid.search("SttlMthNm",'<spring:message code="AT.E.ATE01.text239" text="롯데멤버십포인트"/>',true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm",'<spring:message code="AT.E.ATE01.text239" text="롯데멤버십포인트"/>',true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "DebtorAmt",$("#USE_CUSTUSEPOINT").val());
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text239" text="롯데멤버십포인트"/>');
				sijaGrid.modify(rowId, "DebtorAmt", $("#USE_CUSTUSEPOINT").val());
            }
        }
        var pointAmt = $("#USE_CUSTUSEPOINT").val();
        $("#LotteMemPoint").val(pointAmt);
        SijaeSum();
    };
    $("#PPaidAmt").bind("blur", function() {
        // 롯데멤버십포인트 사용된경우
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
        if ($("#PPaidTypeCd").val() == "T8400008") {
            if ($("#CUSTSELLNO").val() == null || $("#CUSTSELLNO").val() == "") {
                alert('<spring:message code="AT.E.ATE01.text36" text="거래처 불출을 조회하세요."/>');
                $("#PPaidAmt").val(0);
                $("#CUSTSELLNO").focus();
            }
        } else {
            if ($("#PPaidCustCd").val() == null || $("#PPaidCustCd").val() == "") {
                alert('<spring:message code="AT.E.ATE01.text37" text="거래처를 조회하세요."/>');
                $("#PPaidCustCd").focus();
                $("#PPaidAmt").val(0);
            }
        }
        repPaidGrid.clear();
        RepPaidAmtSum();
        PPaidAmtSum();
        SijaeSum();
    });
    var PPaidAmtSum = function() {
        J.unbindMaskData();
        var amt = Number($("#PPaidAmt").val());
        $(".SijaPPaidAmt").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text38" text="선수금"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text38" text="선수금"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "CreditAmt", amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text38" text="선수금"/>');
				sijaGrid.modify(rowId, "CreditAmt", amt);
            }
        }
        SijaeSum();
    };
    var PPaidTickeAmtSum = function() {
        J.unbindMaskData();
        var amt = Number($("#PPaidAmt").val());
        $(".SijaPPaidTickeAmt").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text39" text="티켓선수"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text39" text="티켓선수"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "CreditAmt", amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text39" text="티켓선수"/>');
				sijaGrid.modify(rowId, "CreditAmt", amt);
            }
        }
        amt = Number($("#PPaidAmtVAT").val());
        $(".SijaPPaidTickeAmtVAT").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text40" text="티켓선수VAT"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text40" text="티켓선수VAT"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "CreditAmt", amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text40" text="티켓선수VAT"/>');
				sijaGrid.modify(rowId, "CreditAmt", amt);
            }
        }
        SijaeSum();
    };
    $("#SRecpAmt").bind("blur", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
        SRecpAmtSum();
    });
    var SRecpAmtSum = function() {
        J.unbindMaskData();
        var amt = Number($("#SRecpAmt").val());
        $(".SijaSRecpAmt").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text43" text="가수금"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text43" text="가수금"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "CreditAmt", amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text43" text="가수금"/>');
				sijaGrid.modify(rowId, "CreditAmt", amt);

            }
        }
        SijaeSum();
    };
    // 핸드링 충전
    $("#SbandChargeAmt").bind("blur", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
        SbandChargeAmtSum();
    });
    var SbandChargeAmtSum = function() {
        J.unbindMaskData();
        var amt = Number($("#SbandChargeAmt").val());
        $(".SijaBandChargeAmt").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text261" text="핸드링충전"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text261" text="핸드링충전"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "CreditAmt", amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text261" text="핸드링충전"/>');
				sijaGrid.modify(rowId, "CreditAmt", amt);

            }
        }
        SijaeSum();
    };
    // 핸드링 환불
    $("#SbandRefundAmt").bind("blur", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
        SbandRefundAmtSum();
    });
    var SbandRefundAmtSum = function() {
        J.unbindMaskData();
        var amt = Number($("#SbandRefundAmt").val());
        $(".SijaBandRefundAmt").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text262" text="핸드링환전"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text262" text="핸드링환전"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "CreditAmt", amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text262" text="핸드링환전"/>');
				sijaGrid.modify(rowId, "CreditAmt", amt);
            }
        }
        SijaeSum();
    };
    // 본지점 발생/대체
    $("#DivGsberBAmt").bind("blur", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
        DivGsberAmtSum();
    });
    $("#DivGsberDAmt").bind("blur", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
        DivGsberAmtSum();
    });
    var  DivGsberAmtSum = function() {
        J.unbindMaskData();
        var divGsberSttlCd = $("#spn_DivGsberSttlCd option:selected").val();
        if(divGsberSttlCd == "T1600067") {
            var amt = Number($("#DivGsberBAmt").val());
            $(".SijaDivGsberBAmt").val(amt);
            if (!isNum(amt) || amt == 0) {
                var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text262" text="본지점발생"/>', true, true);
                if (data != null) {
                    sijaGrid.remove(data.rowId);
                }
            } else {
                var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text262" text="본지점발생"/>', true, true);
                if (data != null && data.rowStatus != "N") {
                    sijaGrid.modify(data.rowId, "CreditAmt", amt);
                } else {
					var rowId = sijaGrid.add();
					sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text262" text="본지점발생"/>');
					sijaGrid.modify(rowId, "CreditAmt", amt);

                }
            }
        } else if (divGsberSttlCd == "T1600068"){
            var amt = Number($("#DivGsberDAmt").val());
            $(".SijaDivGsberDAmt").val(amt);
            if (!isNum(amt) || amt == 0) {
                var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text262" text="본지점대체"/>', true, true);
                if (data != null) {
                    sijaGrid.remove(data.rowId);
                }
            } else {
                var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text262" text="본지점대체"/>', true, true);
                if (data != null && data.rowStatus != "N") {
                    sijaGrid.modify(data.rowId, "DebtorAmt", amt);
                } else {
					var rowId = sijaGrid.add();
					sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text262" text="본지점대체"/>');
					sijaGrid.modify(rowId, "DebtorAmt", amt);

                }
            }
        }
        SijaeSum();
    };
    $(".cashOSAmt").bind("blur", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
        cashOSAmtSum();
    });
    var cashOSAmtSum = function() {
        J.unbindMaskData();
        amt = Number($("#CashOSAmt2").val());
        $(".SijaCashOSAmt2").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text44" text="현금과다"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text44" text="현금과다"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "CreditAmt", amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text44" text="현금과다"/>');
				sijaGrid.modify(rowId, "CreditAmt", amt);

            }
        }
        amt = $("#CashOSAmt1").val();
        $(".SijaCashOSAmt1").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text45" text="잡이익"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm", '<spring:message code="AT.E.ATE01.text45" text="잡이익"/>', true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "CreditAmt", amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text45" text="잡이익"/>');
				sijaGrid.modify(rowId, "CreditAmt", amt);

            }
        }
        SijaeSum();
    };
    var searchPrintAmt = function(obj, rowId, columnName, cellValue) {
        if (obj.getStatus(rowId) == "A") {
            if (columnName == "ActTypeCd1") {
                var CheckAmtCd = obj.get(rowId,"ActTypeCd1");
                if(CheckAmtCd != "T2000005"){
                    $.ajax({
                        url : "<c:url value='/lotte/at/c/searchPrintAmtATC05.do'/>",
                        type : "POST",
                        data : {
                            CheckAmtCd : CheckAmtCd,
                            BUKRS : $("#BUKRS").val(),
                            GSBER : $("#GSBER").val()
                        },
                        dataType : "json",
                        exception : function(response) {
                            alert(response.code + " : " + response.message);
                        },
                        success : function(response) {
                            var rowData = response.result;
                            if (!rowData)
                                return;
                            obj.modify(rowId, "PrintAmt", rowData.PrintAmt);
                            SupyAmtSum();
                        }
                    });
                }else{
                    obj.modify(rowId,"PrintAmt",0);
                    obj.setEditable(rowId, "PrintAmt"  , true );
                }
            }
        }
    };
    var SupyAmtSum = function() {
        var amt = supyGrid.get('R0', 'PrintAmt');
        $("#SupyAmt").val(amt);
        $(".SijaSupyAmt").val(amt);
        if (!isNum($("#SupyAmt").val()) || $("#SupyAmt").val() == 0) {
            var data = sijaGrid.search( "SttlMthNm", '<spring:message code="AT.E.ATE01.text46" text="수표"/>', true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm",'<spring:message code="AT.E.ATE01.text46" text="수표"/>',true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "DebtorAmt",amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text46" text="수표"/>');
				sijaGrid.modify(rowId, "DebtorAmt", amt);
            }
        }
        SijaeSum();
    };
    var BankAmtSum = function() {
        var amt = bankGrid.get('R0', 'DealAmt');
        $(".SijaBankAmt").val(amt);
        if (!isNum(amt) || amt == 0) {
            var data = sijaGrid.search("SttlMthNm",'<spring:message code="AT.E.ATE01.text47" text="무통장"/>',	true, true);
            if (data != null) {
                sijaGrid.remove(data.rowId);
            }
        } else {
            var data = sijaGrid.search("SttlMthNm",'<spring:message code="AT.E.ATE01.text47" text="무통장"/>',true, true);
            if (data != null && data.rowStatus != "N") {
                sijaGrid.modify(data.rowId, "DebtorAmt",amt);
            } else {
				var rowId = sijaGrid.add();
				sijaGrid.modify(rowId, "SttlMthNm", '<spring:message code="AT.E.ATE01.text47" text="무통장"/>');
				sijaGrid.modify(rowId, "DebtorAmt", amt);

            }
        }
        SijaeSum();
    };
    var onClickGiftSearchImage = function(obj, rowId, columnName, cellValue) {
        if (obj.getStatus(rowId) == "A") {
            if (columnName == "ValItem20") {
                var MdsCpnNm = cellValue;
                obj.modify(rowId, "ValItem1", "");
                obj.modify(rowId, "ValItem20", "");
                obj.modify(rowId, "ValAmt1", "");
                cmm_openPopupATZ03({
                    GSBER : $("#GSBER").val(),
                    S_MdsCpnCd : "",
                    S_MdsCpnNm : MdsCpnNm,
                    cmm_rowId : rowId
                });
            }
        }
    };
    // 선수금대체그리드의 거래처콛/거래처 검색버튼 - 매출일자를 확인해서 선수금 조회 팝업 띄우지 않기
    var onClickRepPaidSearchImage = function(obj, rowId, columnName, cellValue) {
        $.ajax({
            async      : false
            ,url        : "<c:url value='/lotte/at/g/CheckForwardATG11.do'/>"
            ,type       : "POST"
            ,data       : {
                BUKRS 		: $("#BUKRS").val()
                , GSBER		 	: $("#GSBER").val()
                , SaleDate		: $('#SellDate').val().replaceAll("-","")
                , CancYn		: '0'
            }
            ,dataType   : "json"
            ,exception  : function(response) {
                alert(response.code + " : " + response.message);
            }
            ,success : function(response){
                if(response.result.FinishYn != "0"){
                    alert("매출 달의 선수금 마감이 되었습니다. 이월을 취소하고 진행하세요.");
                    return;
                }else{
                    if(obj.getStatus(rowId) == "A") {
                        var CustCd = $("#RepPaidCustCd").val();
                        var CustNm = $("#RepPaidCustNm").val();
                        $("#RepPaidCustCd").val("");
                        $("#RepPaidCustNm").val("");
                        cmm_openPopupATZ16({
                            BUKRS : $("#BUKRS").val()
                            ,GSBER : $("#GSBER").val()
                            ,CustCd : CustCd
                            ,CustNm : CustNm
                            ,SaleDate : $('#SellDate').val().replaceAll("-","")
                            , cmm_rowId   : rowId
                        });
                    }
                }
            }
        });
    };
    window.cmm_openPopupACZ13 = function(param) {
        $.ajax({
            url : J.getCtx() + '/lotte/ac/z/searchACZ13S1.do',
            type : nvl(param.type, "post"),
            async : false,
            data : param,
            dataType : 'json',
            success : function(response) {
                var cnt = response.ACZ13Cnt;
                if (cnt == 1) {
                    var val = response.ACZ13Result;
                    ACZ13CallBack(val, param.cmm_form,
                        param.cmm_rowId);
                } else {
                    J.open(J.getCtx() + '/lotte/ac/z/ACZ13.do',
                        'ACZ13', {
                            method : "POST",
                            width : 1000,
                            height : 650,
                            data : param
                        });
                }
            }
        });
    };
    window.subGridClickImage = function(obj, rowId, columnName, cellValue) {
        var SellItemCd = obj.get(rowId, "SellItemCd");
        var SellNm = obj.get(rowId, "SellNm");
        cmm_openPopupATZ09({
            GSBER : $("#GSBER").val(),
            SellItemCd : SellItemCd,
            SellNm : SellNm,
            JobTypeCd : $("#JobTypeCd").val(),
            cmm_form : "SUBGRID1",
            cmm_rowId : rowId
        });
    };
    $("#btnCashSijaeReset").bind("click", function() {
        cmmClearForm("tblCash");
        CashAmtSum();
    });
    $("#btnSupyoReset").bind("click", function() {
        supyGrid.clear();
        SupyAmtSum();
    });
    $("#btnBankReset").bind("click", function() {
        bankGrid.clear();
        BankAmtSum();
    });
    $("#btnCardReset").bind("click", function() {
        cmmClearForm("cardForm");
        $("#CardBUKRS").val("${sessionScope.SessionVO.BUKRS}");
        $("#CardGSBER").val($("#GSBER").val());
    });
    $("#btnCardExcelTemplate").bind("click", function() {
        if ($("#selectImportGrid").val() == "1") {
                cardImpotGrid1.request("excelTemplate");
            } else if ($("#selectImportGrid").val() == "2") {
                cardImpotGrid2.request("excelTemplate");
            } else {
                cardImpotGrid3.request("excelTemplate");
            }
    });
    $("#btnCardExcelImport").bind("click", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
		if ($("#selectImportGrid").val() == "1") {
			cardImpotGrid1.request("excelImport");
		} else if ($("#selectImportGrid").val() == "2") {
			cardImpotGrid2.request("excelImport");
		} else {
			cardImpotGrid3.request("excelImport");
		}
    });
    // 2021-07-16 PG 업로드 엑셀 다운로드
    $("#btnPGExcelTemplate").bind("click", function() {
		PGImportGrid.request("excelTemplate");
    });
    $("#btnPGExcelImport").bind("click", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text251" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
            return;
        }
		PGImportGrid.request("excelImport");
    });
    $("#btnGiftReset").bind("click", function() {
        giftGrid.clear();
    });
    $("#btnForeReset").bind("click", function() {
        foreGrid.clear();
    });
    $("#N100000Qty").bind("blur",function() {
        J.unbindMaskData();
        $("#N100000").val(parseInt($('#N100000Qty').val()) * 100000);
        CashAmtSum();
    });
    $("#N50000Qty").bind("blur", function() {
        J.unbindMaskData();
        $("#N50000").val(parseInt($("#N50000Qty").val()) * 50000);
        CashAmtSum();
    });
    $("#N10000Qty").bind("blur", function() {
        J.unbindMaskData();
        $("#N10000").val(parseInt($("#N10000Qty").val()) * 10000);
        CashAmtSum();
    });
    $("#N5000Qty").bind("blur", function() {
        J.unbindMaskData();
        $("#N5000").val(parseInt($("#N5000Qty").val()) * 5000);
        CashAmtSum();
    });
    $("#N1000Qty").bind("blur", function() {
        J.unbindMaskData();
        $("#N1000").val(parseInt($("#N1000Qty").val()) * 1000);
        CashAmtSum();
    });
    $("#N500Qty").bind("blur", function() {
        J.unbindMaskData();
        $("#N500").val(parseInt($("#N500Qty").val()) * 500);
        CashAmtSum();
    });
    $("#N100Qty").bind("blur", function() {
        J.unbindMaskData();
        $("#N100").val(parseInt($("#N100Qty").val()) * 100);
        CashAmtSum();
    });
    $("#N50Qty").bind("blur", function() {
        J.unbindMaskData();
        $("#N50").val(parseInt($("#N50Qty").val()) * 50);
        CashAmtSum();
    });
    $("#N10Qty").bind("blur", function() {
        J.unbindMaskData();
        $("#N10").val(parseInt($("#N10Qty").val()) * 10);
        CashAmtSum();
    });
    $("#N1Qty").bind("blur", function() {
        J.unbindMaskData();
        $("#N1").val(parseInt($("#N1Qty").val()) * 1);
        CashAmtSum();
    });
    $("#SRecpAmt").bind("blur", function() {
        J.unbindMaskData();
        $("#SRecpAmtView").val(parseInt($("#SRecpAmt").val()) * 1);
    });
    window.ATZ09CallBack = function(data, form, rowId) {
        subgrid.modify(rowId, "SellItemCd", "");

        var gridData = subgrid.search("SellItemCd", data.SellItemCd, true, true);
        subgrid.modify(rowId, "SellItemCd",data.SellItemCd);
        subgrid.modify(rowId, "SellNm", data.SellNm);
        subgrid.modify(rowId, "PersonTypeNm", data.PersonTypeNm);
        subgrid.modify(rowId, "LgSmTypeNm", data.LgSmTypeNm);
        subgrid.modify(rowId, "Price", data.Price);
    };
    $("#CardNo").bind("change",function() {
        var cardNum = "";
        var cardNo = this.value;
        // CardPrefix (Cardbin)을 이용한 카드정보 조회
        if (cardNo.length > 0) {
            for ( var i = 8; 0 <= i; i--) {
                var cnt = 0;
                if (cardNo.substr(0, i) != null && cardNo.substr(0, i) != "") {
                    $.ajax({
                        url : "<c:url value='/lotte/at/c/searchCardATC05.do'/>",
                        type : "POST",
                        async : false,
                        data : {
                            BUKRS : $("#BUKRS").val(),
                            GSBER : $("#GSBER").val(),
                            CardNo : cardNo.substr(0,i)
                        },
                        dataType : "json",
                        exception : function(response) {
                            alert(response.code + " : " + response.message);
                        },
                        success : function(response) {
                            cnt = response.cnt;
                            if (cnt == 1) {
                                var rowData = response.result;
                                $('#cardForm').fillWith(rowData);
                                $("#CardBUKRS").val("${sessionScope.SessionVO.BUKRS}");
                                $("#CardGSBER").val($("#GSBER").val());
                            }
                        }
                    });
                } else {
                    alert('<spring:message code="cmm.message.399" text="등록된 카드가 아닙니다."/>');
                    cmmClearForm("cardForm");
                    $("#CardBUKRS").val("${sessionScope.SessionVO.BUKRS}");
                    $("#CardGSBER").val($("#GSBER").val());
                    cnt = 1;
                }
                if (cnt == 1)
                    return;
            }
        }
    });
    /****************************************
     *1. 영수증 출력
     ****************************************/
    var printTwo = function(){
        var report = "";
        var urlPath = document.location.protocol + "//" + document.location.host+"${ctx}"+"/ClipReport4/";
        var crfName = "lotte/at/e/ATE01_01_02Rpt";
        var crfParams = 'Bukrs:'+ BUKRS+'|Gsber:'+ $('#GSBER').val() +'|SellDate:'+$('#SellDate').val().replace(/-/gi,"") +'|PosId:'+$('#OrdPosId').val() +'|SlipId:'+$('#OrdSlipId').val();
        var crfDbName = 'sql_dev1';
        ClipReport("N", urlPath, crfName, crfParams, crfDbName, null);
        /* report = createJSPReport(urlPath + "Clip.jsp", urlPath + "reportInterface.jsp", "crfName="+crfName+"&crfParams="+crfParams+"&crfDbName="+crfDbName ,document.getElementById("targetDiv1"));
		   		    report.view(); */
    };
    var printTwoBix = function(){
        var report = "";
        var urlPath = document.location.protocol + "//" + document.location.host+"${ctx}"+"/ClipReport4/";
        var crfName = "lotte/at/e/ATE01_01_02_Bix_Rpt";
        var crfName2 = "lotte/at/e/ATE01_01_01Rpt";
        var crfParams = 'Bukrs:'+ BUKRS+'|Gsber:'+ $('#GSBER').val() +'|SellDate:'+$('#SellDate').val().replace(/-/gi,"") +'|PosId:'+$('#OrdPosId').val() +'|SlipId:'+$('#OrdSlipId').val();
        var crfDbName = 'sql_dev1';
        ClipReport("2", urlPath, crfName, crfParams, crfDbName, null, crfName2);
        /* report = createJSPReport(urlPath + "Clip.jsp", urlPath + "reportInterface2page.jsp", "crfName="+crfName+"crfName2="+crfName2+"&crfParams="+crfParams+"&crfDbName="+crfDbName ,document.getElementById("targetDiv1"));
		   		    report.view(); */
    };
    $("#btnATE01_01Rpt").bind("click",function() {
        if ($('#OrdPosId').val() == "") {
            alert('<spring:message code="AT.E.ATE01.text4" text="목록을 선택하세요."/>');
            return;
        }
        if($('#GSBER').val() == '1210'){
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/ADV_logo");
        }else if ($('#GSBER').val() == '1230'){
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/WATERPARK_logo");
        }else if ($('#GSBER').val() == '1240'){
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/AQUA_logo");
        }else if ($('#GSBER').val() == '1250'){
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/SEOULSKY_logo");
        }else if ($('#GSBER').val() == '1270'){	//add:부산로고추가 | 2020.10.26 | @author : yoon.jong.hyuck (동부산ERP)
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/BUSAN_logo");
        }else {
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/KINGDOM_logo");
        }
        var reportUrl = $('#reportUrl').val().replaceAll(":","@@@");
        var report = "";
        var urlPath = document.location.protocol + "//" + document.location.host+"${ctx}"+"/ClipReport4/";
        var crfName = "lotte/at/e/ATE01_01_01Rpt";
        var crfParams = 'Bukrs:'+ BUKRS+'|Gsber:'+ $('#GSBER').val() +'|SellDate:'+$('#SellDate').val().replace(/-/gi,"") +'|PosId:'+$('#OrdPosId').val() +'|SlipId:'+$('#OrdSlipId').val()+ '|ImgFilePath:'+reportUrl;
//		   			var crfParams = 'Bukrs:'+ BUKRS+'|Gsber:'+ $('#GSBER').val() +'|SellDate:'+$('#SellDate').val().replace(/-/gi,"") +'|PosId:'+$('#OrdPosId').val() +'|SlipId:'+$('#OrdSlipId').val();
        var crfParams = 'Bukrs:'+ BUKRS+'|Gsber:'+ $('#GSBER').val() +'|SellDate:'+$('#SellDate').val().replace(/-/gi,"") +'|PosId:'+$('#OrdPosId').val() +'|SlipId:'+$('#OrdSlipId').val()+ '|ImgFilePath:'+reportUrl;
// 		   			var crfParams = 'Bukrs:'+ BUKRS+'|Gsber:'+ $('#GSBER').val() +'|SellDate:'+$('#SellDate').val().replace(/-/gi,"") +'|PosId:'+$('#OrdPosId').val() +'|SlipId:'+$('#OrdSlipId').val()
        var crfDbName = 'sql_dev1';
        ClipReport("N", urlPath, crfName, crfParams, crfDbName, null);
        /* report = createJSPReport(urlPath + "Clip.jsp", urlPath + "reportInterface.jsp", "crfName="+crfName+"&crfParams="+crfParams+"&crfDbName="+crfDbName ,document.getElementById("targetDiv1"));
		   		    report.view(); */
    });
    $("#btnATE01_01_BIXOLONRpt").bind("click",function() {
        if ($('#OrdPosId').val() == "") {
            alert('<spring:message code="AT.E.ATE01.text4" text="목록을 선택하세요."/>');
            return;
        }
        if($('#GSBER').val() == '1210'){
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/ADV_logo");
        }else if ($('#GSBER').val() == '1230'){
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/WATERPARK_logo");
        }else if ($('#GSBER').val() == '1240'){
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/AQUA_logo");
        }else if ($('#GSBER').val() == '1250'){
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/SEOULSKY_logo");
        }else if ($('#GSBER').val() == '1270'){	//add:부산로고추가 | 2020.10.26 | @author : yoon.jong.hyuck (동부산ERP)
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/BUSAN_logo");
        }else {
            $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/KINGDOM_logo");
        }
        var reportUrl = $('#reportUrl').val().replaceAll(":","@@@");
        var report = "";
        var urlPath = document.location.protocol + "//" + document.location.host+"${ctx}"+"/ClipReport4/";
        var crfName = "lotte/at/e/ATE01_01_01_Bix_Rpt";
        var crfParams = 'Bukrs:'+ BUKRS+'|Gsber:'+ $('#GSBER').val() +'|SellDate:'+$('#SellDate').val().replace(/-/gi,"") +'|PosId:'+$('#OrdPosId').val() +'|SlipId:'+$('#OrdSlipId').val()+ '|ImgFilePath:'+reportUrl;
        var crfDbName = 'sql_dev1';
        ClipReport("N", urlPath, crfName, crfParams, crfDbName, null);
        /* report = createJSPReport(urlPath + "Clip.jsp", urlPath + "reportInterface.jsp", "crfName="+crfName+"&crfParams="+crfParams+"&crfDbName="+crfDbName ,document.getElementById("targetDiv1"));
		   		    report.view(); */
    });
    $("#btnATE01_02Rpt").bind(	"click",function() {
        // 모바일 접속 확인
        if(isMobile == false){
            if ($('#OrdPosId').val() == "") {
                alert('<spring:message code="AT.E.ATE01.text4" text="목록을 선택하세요."/>');
                return;
            }
            if($('#GSBER').val() == '1210'){
                $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/ADV_logo");
            }else if ($('#GSBER').val() == '1230'){
                $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/WATERPARK_logo");
            }else if ($('#GSBER').val() == '1240'){
                $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/AQUA_logo");
            }else if ($('#GSBER').val() == '1250'){
                $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/SEOULSKY_logo");
            }else if ($('#GSBER').val() == '1270'){	//add:부산로고추가 | 2020.10.26 | @author : yoon.jong.hyuck (동부산ERP)
                $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/BUSAN_logo");
            }else {
                $('#reportUrl').val(document.location.protocol + "//" + document.location.host+"${ctx}"+"/ldccerp_fileupload/etc/pos_receipt/KINGDOM_logo");
            }
            var reportUrl = $('#reportUrl').val().replaceAll(":","@@@");
            var report = "";
            var urlPath = document.location.protocol + "//" + document.location.host+"${ctx}"+"/ClipReport4/";
            var crfName = "lotte/at/e/ATE01_02Rpt";
            var crfParams = 'Bukrs:'+ BUKRS+'|Gsber:'+ $('#GSBER').val() +'|SellDate:'+$('#SellDate').val().replace(/-/gi,"") +'|PosId:'+$('#OrdPosId').val() +'|SlipId:'+$('#OrdSlipId').val()+ '|ImgFilePath:'+reportUrl;
            var crfDbName = 'sql_dev1';
            ClipReport("N", urlPath, crfName, crfParams, crfDbName, null);
            /* report = createJSPReport(urlPath + "Clip.jsp", urlPath + "reportInterface.jsp", "crfName="+crfName+"&crfParams="+crfParams+"&crfDbName="+crfDbName ,document.getElementById("targetDiv1"));
						   		    report.view(); */
        } else {
            alert("모바일에서는 지원이 되지 않습니다.");
        }
    });
    $("#btnATE01_03Rpt").bind("click",function() {
        // 모바일 접속 확인
        if(isMobile == false){
            if ($('#OrdPosId').val() == "") {
                alert('<spring:message code="AT.E.ATE01.text4" text="목록을 선택하세요."/>');
                return;
            }
            var report = "";
            var urlPath = document.location.protocol + "//" + document.location.host+"${ctx}"+"/ClipReport4/";
            var crfName = "lotte/at/e/ATE01_03Rpt";
            var crfParams = 'Bukrs:'+ BUKRS+'|Gsber:'+ $('#GSBER').val() +'|SellDate:'+$('#SellDate').val().replace(/-/gi,"") +'|PosId:'+$('#OrdPosId').val() +'|SlipId:'+$('#OrdSlipId').val();
            var crfDbName = 'sql_dev1';
            ClipReport("N", urlPath, crfName, crfParams, crfDbName, null);
            /* report = createJSPReport(urlPath + "Clip.jsp", urlPath + "reportInterface.jsp", "crfName="+crfName+"&crfParams="+crfParams+"&crfDbName="+crfDbName ,document.getElementById("targetDiv1"));
				   		    report.view(); */
        } else {
            alert("모바일에서는 지원이 되지 않습니다.");
        }
    });
    $(function() {
        maingrid = $("#Maingrid").JGrid({
            header: {
                common: {}
            },
            column: {
                common: {
                    editable: false
                },
                list: [
                    {name: "BUKRS", type: "text", hide: true, excludeExcel: true},
                    {name: "GSBER", type: "text", hide: true, excludeExcel: true},
                    {name: "SlipId", type: "text", hide: true, excludeExcel: true},
                    {name: "PosId", type: "text", hide: true, excludeExcel: true},
                    {name: "SellOccuTypeCd", type: "text", hide: true, excludeExcel: true},
                    {name: "ShopClassCd", type: "text", hide: true, excludeExcel: true},
                    {name: "ShopSysCd", type: "text", hide: true, excludeExcel: true},
                    {name: "NormalSellNo", type: "text", title : '<spring:message code="AT.E.ATE01.text60" text="일반매출번호"/>', width: 120, align: "center"  },
                    {name: "SellDate", type: "text", title : '<spring:message code="AT.E.ATE01.text61" text="매출일자"/>', width: 100, align: "center"  },
                    {name: "JobTypeNm", type: "text", title : '<spring:message code="AT.E.ATE01.text62" text="업무"/>', width: 110, align: "center"},
                    {name: "ShopClassNm", type: "text", title : '<spring:message code="AT.E.ATE01.text63" text="업장분류명"/>', width: 100, align: "center" },
                    {name: "ShopSysNm", type: "text", title : '<spring:message code="AT.E.ATE01.text64" text="업장명"/>', minWidth: 30, align: "left"  },
                    {name: "CashApprYn", type: "text", title : '<spring:message code="AT.A.ATE01.text06" text="현금영수증발행여부"/>', width: 150, align: "center" },
                    {name: "CancelYN", type: "text", title : '<spring:message code="AT.E.ATE01.text65" text="매출여부"/>', width: 100, align: "center"  },
                    {name: "RegDtTm", type: "text", title : '<spring:message code="AT.E.ATE01.text66" text="등록일자"/>', minWidth: 150, align: "left", hide: true, excludeExcel: true },
                    {name: "RegEmpNm", type: "text", title : '<spring:message code="AT.E.ATE01.text67" text="등록자"/>', width: 80, align: "center", hide: true, excludeExcel: true },
                    {name: "ModiDtTm", type: "text", title : '<spring:message code="AT.E.ATE01.text68" text="수정일자"/>', minWidth: 150, align: "left", hide: true, excludeExcel: true },
                    {name: "ModiEmpNm", type: "text", title : '<spring:message code="AT.E.ATE01.text69" text="수정자"/>', width: 80, align: "center", hide: true, excludeExcel: true },
                    {name: "Etc", type: "text", title : '<spring:message code="AT.E.ATE01.text150" text="비고"/>', minwidth: 50, align: "center" }
                ]
            },
            paging: {
                size: 10
            },
            datasource: {
                search: {
                    url: "<c:url value='/lotte/at/e/searchATE01.json' />",
                    method: "POST",
                    dataType: "json",
                    async: true
                }
            },
            event: {
                doubleClick: function (rowId, columnName, event) {
                    gridMainClick(this, rowId, columnName);
                }
            }
        });
        subgrid = $("#subgrid").JGrid({
            column: {
                common: {
                    editable: true,
                    align: "center"
                },
                list: [
                    {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                    {name:"No",width:45,type:"seq"},
                    {name:"SellItemCd",type:"text",editable:true,width:150,align:"left",title : '<span class="color_im_bl">*</span><spring:message code="AT.E.ATE01.text70" text="매출코드"/>',validate : [ J.getProperty("validate.notNull") ],"validateTitle":"<spring:message code='AT.E.ATE01.text70' text='매출코드'/>",backgroundColor:"#cff092"},
                    {name:"SellNm",type:"button",buttonType:"img",editable:true,align:"left",title : '<span class="color_im_bl">*</span><spring:message code="AT.E.ATE01.text59" text="매출명"/>',validate : [ J.getProperty("validate.notNull") ],"validateTitle":"<spring:message code='AT.E.ATE01.text59' text='매출명'/>",src:"<c:url value='/resources/theme/${theme}/image/contents/ico_sch.gif'/>",backgroundColor:"#cff092"},
                    {name:"PersonTypeNm",type:"text",editable:false,width:80,align:"center",title : '<spring:message code="AT.E.ATE01.text58" text="개인구분"/>'},
                    {name:"LgSmTypeNm",title : '<spring:message code="AT.E.ATE01.text71" text="대소구분"/>',type:"text",editable:false,width:80,align:"center"},
                    {name:"Price",title : '<spring:message code="AT.E.ATE01.text72" text="단가"/>',type:"int",width:80,align:"right"},
                    {name:"SellQty",title : '<spring:message code="AT.E.ATE01.text73" text="총수량"/>',type:"int",editable:true,width:80,align:"right"},
                    {name:"SellAmt",title : '<spring:message code="AT.E.ATE01.text74" text="총금액"/>',type:"int",width:80,align:"right"},
                    {name:"EventCd",title : '<spring:message code="AT.E.ATE01.text75" text="행사코드"/>',type:"text",editable:false,width:150,align:"center"},
                    {name:"EventSeq",title : '<spring:message code="AT.E.ATE01.text76" text="행사코드순번"/>',type:"int",editable:false,width:120,align:"center"},
                    {name:"EventNm",title : '<spring:message code="AT.E.ATE01.text57" text="행사명"/>',type:"text",editable:false,align:"center"},
                    {name:"NormalSellNo",title : '<spring:message code="AT.E.ATE01.text60" text="일반매출번호"/>',type:"text",hide:true,width:100,align:"center"},
                    {name:"BUKRS",type:"text",hide:true},
                    {name:"GSBER",type:"text",hide:true},
                    {name:"Seq",type:"text",hide:true}
                ]
            },
            paging: {
                size: 0
            },
            formula: {
                top: [
                    [
                        {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                        {name:"SellItemCd",colspan:6},
                        {name:"SellAmt",formula:"sum"}
                    ]
                ]},
            event: {
                change: function(rowId, columnName, value, oldValue) {
                    var cellValue = this.get(rowId, columnName);
                    if (columnName == "SellItemCd"	|| columnName == "SellNm") {
                        if (cellValue == "") {
                            this.modify(rowId,"SellItemCd",	"");
                            this.modify(	rowId,"SellNm", "");
                        } else {
                            switch (columnName) {
                                case "SellItemCd":
                                    this.modify(rowId,"SellNm", "");
                                    break;
                                case "SellNm":
                                    this.modify(rowId,"SellItemCd","");
                                    break;
                            }
                        }
                        subGridClickImage(this, rowId);
                    }
                    if (columnName == "SellQty" || columnName == "Price") {
                        var Price = obj.get(rowId, "Price");
                        var SellQty = obj.get(rowId, "SellQty");
                        if (isNum(Price)&& isNum(SellQty)) {
                            obj.modify( rowId, "SellAmt", parseFloat(Price) * parseFloat(SellQty));
                        } else {
                            obj.modify(rowId, "SellAmt", 0);
                        }
                        SellAmtSum();
                    }
                    if (columnName == "SellAmt") {
                        SellAmtSum();
                    }
                },
                clickImage: function(rowId, columnName) {
                    var cellValue = this.get(rowId, columnName);
                    subGridClickImage(this, rowId, columnName, cellValue)
                },
                click: function(rowId, columnName, event) {
                    onClickCell(this,rowId,columnName)
                },
                endEditByEnter: function(rowId, columnName) {
                    // 현재 컬럼 다음 컬럼들을 탐색
                    for (var nextCol = this.getNextCol(columnName); nextCol; nextCol = this.getNextCol(nextCol)) {
                        // edit가 가능한 셀일 경우 focus
                        if (!this.getCellReadonly(rowId, nextCol)) {
                            this.focusIn(rowId, nextCol);
                            return;
                        }
                    }
                    var nextRowId = this.getNextRow(rowId);
                    for (var nextCol = this.getFirstCol(); nextCol && nextCol; nextCol = this.getNextCol(nextCol)) {
                        if (!this.getCellReadonly(nextRowId, nextCol)) {
                            this.focusIn(nextRowId, nextCol);
                            return;
                        }
                    }
                }
            }
        });
        subgrid1 = $("#subgrid1").JGrid({
                column: {
                    common: {
                        editable: false,
                        align: "center"
                    },
                    list: [
                        {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                        {name:"No",width:45,type:"seq"},
                        {name:"BUKRS",type:"text",hide:true},
                        {name:"GSBER",type:"text",hide:true},
                        {name:"SellItemCd",title : '<spring:message code="AT.E.ATE01.text77" text="매출품목코드"/>',type:"text",width:80,align:"center"},
                        {name:"TktCd",title : '<spring:message code="AT.E.ATE01.text55" text="티켓코드"/>',type:"text",width:80,align:"center"},
                        {name:"TktNm",title : '<spring:message code="AT.E.ATE01.text56" text="티켓명"/>',type:"text",minWidth:100,align:"left"},
                        {name:"EventNm",title : '<spring:message code="AT.E.ATE01.text57" text="행사명"/>',type:"text",minWidth:100,align:"left"},
                        {name:"PersonTypeNm",title : '<spring:message code="AT.E.ATE01.text58" text="개인구분"/>',type:"text",width:80,align:"center"},
                        {name:"LgSmTypeNm",title : '<spring:message code="AT.E.ATE01.text71" text="대소구분"/>',type:"text",width:80,align:"center"},
                        {name:"EventAmt",title : '<spring:message code="AT.E.ATE01.text78" text="행사금액"/>',type:"int",width:80,align:"right"}
                    ]
                },
                paging: {
                    size: 0
                },
                event: {
                    click: function(rowId, columnName, event) {
                        var obj = this.grid;
                            sijaRow = obj.get(rowId);
                            $("#sijaRow").val(sijaRow);
                            var rowData = maingrid.grid.get(rowId);
                            var bindingData = {};
                            bindingData.SellItemCd = subgrid1.get(rowId, "SellItemCd");
                            bindingData.SellNm = subgrid1.get(rowId, "TktNm");
                            bindingData.Price = subgrid1.get(rowId, "EventAmt");
                            bindingData.PersonTypeNm = subgrid1.get(rowId, "PersonTypeNm");
                            bindingData.LgSmTypeNm = subgrid1.get(rowId, "LgSmTypeNm");
                            bindingData.EventCd = $("#EventCd").val();
                            bindingData.EventSeq = $("#EventSeq").val();
                            bindingData.EventNm = subgrid1.get(rowId, "EventNm");
                            this.grid.add(rowId, bindingData, 'after');
                            this.grid.setEditable(rowId, 'Price', false);
                    }
                }
            }
        );
        //잔액
        var calcSijaAmt = function(rowData, columnName, value) {
            return parseFloat(rowData["DebtorAmt"]) - parseFloat(rowData["CreditAmt"]);
        };
        sijaGrid = $("#sijaGrid").JGrid({
            column: {
                common: {
                    editable: false,
                    align: "center"
                },
                list: [
                    {name:"No",width:45,type:"seq"},
                    {name:"SttlMthNm",type:"text",editable:false,hide:false,align:"left",title : '<spring:message code="AT.E.ATE01.text49" text="시재명"/>'},
                    {name:"DebtorAmt",type:"int",editable:false,hide:false,align:"right",title : '<spring:message code="AT.E.ATE01.text50" text="차변금액"/>'},
                    {name:"CreditAmt",type:"int",editable:false,hide:false,align:"right",title : '<spring:message code="AT.E.ATE01.text51" text="대변금액"/>'},
                    {name:"ChanAmt",type:"int",editable:false,hide:false,align:"right",title : '<spring:message code="AT.E.ATE01.text52" text="잔액"/>'}
                ]
            },
            formula: {
                top: [
                    [
                        {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                        {name:"SttlMthNm"},
                        {name:"DebtorAmt",formula:"sum"},
                        {name:"CreditAmt",formula:"sum"},
                        {name:"ChanAmt",formula:"sum"}
                    ]
                ]},
            event: {}
        });
        var supyBtnCalc = function(rowData, columnName, value) {
            return "<a onclick='javascript:supyGridClickButton('"
                + rowData.id
                + "');return false;'>"
                + '<button><spring:message code="AT.E.ATE01.text79" text="수표조회하기"/></button>'
                + "</a>";
        };
        supyGrid = $("#supyGrid").JGrid({
            column: {
                common: {
                    editable: true,
                    align: "center"
                },
                list: [
                    {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                    {name:"No",width:45,type:"seq"},
                    {name:"SttlMthCd",type:"text",editable:false,hide:true,align:"left",title:"SttlMthCd"},
                    {name:"Seq",type:"text",editable:false,hide:true,align:"left",title:"Seq"},
                    {name:"ValItem1",type:"text",editable:true,hide:false,align:"left",title : '<spring:message code="AT.E.ATE01.text80" text="수표번호"/>'},
                    {name:"ActTypeCd3",type:"combo",editable:true,hide:false,align:"left",title : '<spring:message code="AT.E.ATE01.text81" text="수표종류"/>',items:comboCheckTypeCd},
                    {name:"ActTypeCd1",type:"combo",editable:true,hide:false,align:"left",title : '<spring:message code="AT.E.ATE01.text82" text="수표금액"/>',items:comboCheckAmtCd},
                    {name:"PrintAmt",type:"int",editable:false,hide:false,align:"right",title : '<spring:message code="AT.E.ATE01.text83" text="권면금액"/>'},
                    {name:"Qty",type:"int",editable:false,hide:false,align:"right",title : '<spring:message code="AT.E.ATE01.text84" text="수량"/>'},
                    {name:"ActTypeCd2",type:"combo",editable:true,hide:false,align:"left",title : '<spring:message code="AT.E.ATE01.text85" text="발행은행"/>',items:comboBankCd},
                    {name:"ValItem5",type:"text",editable:true,hide:false,align:"left",title : '<spring:message code="AT.E.ATE01.text86" text="발행지점"/>'},
                    {name:"ValItem3",type:"date",editable:true,hide:false,align:"left",title : '<spring:message code="AT.E.ATE01.text87" text="발행일자"/>'},
                    {name:"SupyoSrch",editable:false,align:"left",title : '<spring:message code="AT.E.ATE01.text79" text="수표조회하기"/>', calc : supyBtnCalc }
                ]
            },
            paging: {
                size: 0
            },
            formula: {
                bottom: [
                    [
                        {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                        {name:"ValItem1",colspan:4},
                        {name:"PrintAmt",formula:"sum"}
                    ]
                ]},
            event: {
                change: function(rowId, columnName, value, oldValue) {
                    if (this.getStatus(rowId) == "A") {
                        if (columnName == "ActTypeCd1") {
                            searchPrintAmt(this, rowId, columnName, value);
                        }
                    }
                }
            }
        });
        supyGrid.hideRow('R0',true,true);
        cardGrid = $("#cardGrid").JGrid({
                    column: {
                        common: {
                            editable: false,
                            align: "center"
                        },
                        list: [
                            {name:"No",width:45,type:"seq"},
                            {name:"SellTypeCd",type:"combo",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text88"  text="판매구분코드"/>',items:comboSellTypeCd},
                            {name:"SttlMthCd",type:"combo",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text91"  text="항목"/>',items:comboSttlMthCd},
                            {name:"ValItem1",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>'},
                            {name:"ValItem20",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text90"  text="카드명"/>'},
                            {name:"ValItem8",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text92"  text="유효기간"/>'},
                            {name:"ValItem9",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text93"  text="거래일시"/>'},
                            {name:"ValItem10",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text94"  text="할부기간"/>'},
                            {name:"ValItem11",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text95"  text="가맹점번호"/>'},
                            {name:"DealAmt",type:"int",editable:false,align:"right",title:'<spring:message code="AT.E.ATE01.text96"  text="거래금액"/>'},
                            {name:"ValItem2",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text97"  text="승인번호"/>'},
                            {name:"Seq",type:"text",hide:true,align:"left",title:"Seq"},
                            {name:"ValItem3",type:"text",hide:true,align:"left",title:"CardBizCd"},
                            {name:"ValItem4",type:"text",hide:true,align:"left",title:"CardBizMinorCd"},
                            {name:"ValItem6",type:"text",hide:true,align:"left",title:"CardPrefix"},
                            {name:"ActTypeCd5",type:"text",hide:true,align:"left",title:"KeyInTypeCd"},
                            {name:"ValItem13",type:"text",hide:true,align:"left",title:"MembStoreBizId"},
                            {name:"ActTypeCd6",type:"text",hide:true,align:"left",title:"VanCustTypeCd"},
                            {name:"ActTypeCd10",type:"text",hide:true,align:"left",title:"RespCd"},
                            {name:"ValItem17",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text98"  text="발급사코드"/>'},
                            {name:"ValItem18",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text99"  text="매입사코드"/>'},
                            {name:"eunYn",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text100"  text="은련카드여부"/>'},
                            {name:"PwCard",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text21" text="비밀번호"/>'}
                        ]
                    },
                    paging: {
                        size: 0
                    },
                    formula: {
                        bottom: [
                            [
                                {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                                {name:"SellTypeCd",colspan:8},
                                {name:"DealAmt",formula:"sum"}
                            ]
                        ]},
                    event: {}
                });
        cardGrid.hideRow('R0',true,true);
        cardGrid.hideRow('R0',true,true);
        //선수금대체 그리드 추가 작업
        repPaidGrid = $("#repPaidGrid").JGrid({
            column: {
                common: {
                    editable: true,
                    align: "center"
                },
                list: [
                    {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                    {name:"No",width:45,type:"seq"},
                    {name:"SttlMthCd",type:"text",hide:true,editable:false,align:"left",title:"SttlMthCd"},
                    {name:"Seq",type:"text",hide:true,editable:false,align:"left",title:"Seq"},
                    {name:"RepPaidTypeCd",type:"text",hide:true,editable:false,align:"left",title:"RepPaidTypeCd"},
                    {name:"RepOrdBUKRS",type:"text",hide:true,editable:false,align:"left",title:"RepOrdBUKRS"},
                    {name:"RepOrdGSBER",type:"text",hide:true,editable:false,align:"left",title:"RepOrdGSBER"},
                    {name:"RepOrdSeq",type:"text",hide:true,editable:false,align:"left",title:"RepOrdSeq"},
                    {name:"RepPaidCustCd",type:"button",buttonType:"img",minWidth:70,editable:true,align:"left",title:'<spring:message code="AT.C.ATC05.text05" text="거래처코드"/>',src:"<c:url value='/resources/theme/${theme}/image/contents/ico_sch.gif'/>",backgroundColor:"#cff092"},
                    {name:"RepPaidCustNm",type:"button",buttonType:"img",minWidth:100,editable:true,align:"left",title:'<spring:message code="AT.C.ATC05.text12"  text="거래처"/>',src:"<c:url value='/resources/theme/${theme}/image/contents/ico_sch.gif'/>",backgroundColor:"#cff092"},
                    {name:"tPPaidTypeCd",type:"text",minWidth:70,editable:false,align:"left",title:'<spring:message code="AT.C.ATC05.text161" text="행사형식"/>'},
                    {name:"PPaidBizNo",type:"text",minWidth:70,editable:false,align:"left",title:'<spring:message code="AT.C.ATC05.text07" text="사업자번호"/>'},
                    {name:"RepOrdSellDate",type:"text",minWidth:70,editable:false,align:"left",title:"발생매출일자"},
                    {name:"RepOrdPosId",type:"text",minWidth:70,editable:false,align:"left",title:"발생포스번호"},
                    {name:"RepOrdSlipId",type:"text",minWidth:70,editable:false,align:"left",title:"발생전표번호"},
                    {name:"GuestNm",type:"text",minWidth:70,hide:true,editable:false,align:"left",title:'<spring:message code="AT.C.ATC05.text103" text="고객명"/>'},
                    {name:"BirthD",type:"text",minWidth:70,hide:true,editable:false,align:"left",title:'<spring:message code="AT.C.ATC05.text162" text="생년월일"/>'},
                    {name:"GrpTel",type:"text",minWidth:70,hide:true,editable:false,align:"left",title:'<spring:message code="AT.C.ATC05.text163" text="연락처"/>'},
                    {name:"EventName",type:"text",minWidth:70,editable:false,align:"left",title:'<spring:message code="AT.C.ATC05.text09" text="행사명"/>'},
                    {name:"EventStart",type:"text",minWidth:70,editable:false,align:"left",title:'<spring:message code="AT.C.ATC05.text164" text="행사시작일"/>'},
                    {name:"EventEnd",type:"text",minWidth:70,editable:false,align:"left",title:'<spring:message code="AT.C.ATC05.text165" text="행사종료일"/>'},
                    {name:"PPaidAmt",type:"int",minWidth:70,editable:false,align:"right",title:'<spring:message code="AT.C.ATC05.text159" text="선수금"/>'},
                    {name:"RemAmt",type:"int",minWidth:70,editable:false,align:"right",title:'<spring:message code="AT.C.ATC05.text118"  text="잔액"/>'},
                    {name:"RepPaidAmt",type:"int",minWidth:70,editable:false,align:"right",title:'<spring:message code="AT.C.ATC01.text165"  text="대체처리금"/>'}
                ]
            },
            formula: {
                bottom: [
                    [
                        {name:"No",value:"<spring:message code='AT.C.ATC05.text134' text='총합'/>"},
                        {name:"RepPaidCustNm",colspan:6},
                        {name:"RepPaidAmt",formula:"sum"}
                    ]
                ]},
            event: {
                clickImage: function(rowId, columnName) {
                    var cellValue = this.get(rowId, columnName);
                    onClickRepPaidSearchImage(this,rowId,columnName,cellValue)
                    },
                change: function(rowId, columnName, value, oldValue) {
                    var cellType = this.getType(columnName);
                    if(columnName == "RepPaidAmt") {
                        // 롯데멤버십포인트 사용된경우
                        if(!fn_sijaUseCheck(sijaGrid)){
                            alert('<spring:message code="AT.E.ATC05.message12" text="롯데멤버십포인트가 등록되어 현재 시재를 사용할수 없습니다."/>');
                            return;
                        }
                        J.unbindMaskData();

                        if (this.get(rowId, "RepPaidCustCd") == null || obj.get(rowId, "RepPaidCustCd") == "") {
                            alert('<spring:message code="AT.E.ATC05.message13" text="거래처를 조회하세요."/>');
                            this.modify(rowId, "RepPaidAmt" , 0);
                        }else if(Number(this.get(rowId, "RepPaidAmt")) > Number(Number(this.get(rowId, "RemAmt")))){
                            alert('<spring:message code="AT.E.ATC05.text52" text="잔액"/> '+this.get(rowId, "RemAmt")+'<spring:message code="AT.E.ATC05.message14" text="을 넘었습니다."/>');
                            this.modify(rowId, "RepPaidAmt" , 0);
                        }
                        cmmClearForm("pPaidForm");
                        PPaidAmtSum();
                        RepPaidAmtSum();
                        SijaeSum();
                    }
                }
            }
        });
        repPaidGrid.hideRow('R0',true,true);
        var giftValidate = function(obj, data, columnName, title, value){
            if(String(value).length >= 13){
                return true;
            }else{
                alert('<spring:message code="AT.E.ATE01.text101"  text="상품권 번호(13자리 이상)를 확인하세요."/>');
                return false;
            }
        };
        giftGrid = $("#giftGrid").JGrid({
            column: {
                common: {
                    editable: true,
                    align: "center"
                },
                list: [
                    {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                    {name:"No",width:45,type:"seq"},
                    {name:"ValItem20",type:"button",buttonType:"img",align:"left",title:'<spring:message code="AT.E.ATE01.text102" text="상품권명"/>',src:"<c:url value='/resources/theme/${theme}/image/contents/ico_sch.gif'/>",backgroundColor:"#cff092"},
                    {name:"ValAmt1",type:"int",hide:true,align:"right",title:'<spring:message code="AT.E.ATE01.text83" text="권면금액"/>'},
                    {name:"ValItem5",type:"check",hide:true,align:"center",title:'<spring:message code="AT.E.ATE01.text103" text="연속유무"/>'},
                    {name:"ValItem6",type:"text",align:"left",title:'<span class="color_im_bl">*</span><spring:message code="AT.E.ATE01.text104" text="상품권 번호"/>',validate : [ giftValidate ],"validateTitle":"<spring:message code='AT.E.ATE01.text104' text='상품권 번호'/>"},
                    {name:"ValItem7",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text105" text="상품권종료번호"/>'},
                    {name:"ValQty1",type:"int",align:"right",title:'<spring:message code="AT.E.ATE01.text84" text="수량"/>'},
                    {name:"MdsCpnSellAmt",type:"int",editable:false,align:"right",title:'<spring:message code="AT.E.ATE01.text106" text="상품권매출금"/>'},
                    {name:"SttlMthCd",type:"text",hide:true,align:"left",title:"SttlMthCd"},
                    {name:"Seq",type:"text",hide:true,align:"left",title:"Seq"},
                    {name:"ValItem1",type:"text",hide:true,align:"left",title:"MdsCpnCd"},
                    {name:"ValItem2",type:"text",hide:true,align:"left",title:"SeqNo01"}
                ]
            },
            paging: {
                size: 0
            },
            formula: {
                bottom: [
                    [
                        {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                        {name:"ValItem20",colspan:6},
                        {name:"MdsCpnSellAmt",formula:"sum"}
                    ]
                ]},
            event: {
                clickImage: function (rowId, columnName) {
                    var cellValue = this.get(rowId, columnName);
                    onClickGiftSearchImage(this,rowId,columnName,cellValue)
                },
                change: function(rowId, columnName, value, oldValue) {
                    var cellType = this.getType(columnName);
                    var cellValue = this.get(rowId, columnName);
                    if(this.getStatus(rowId) == "A") {
                        if(columnName == "ValItem20") {
                            if(cellValue == "") {
                                this.modify(rowId, "ValItem1" , "");
                                this.modify(rowId, "ValItem20", "");
                                this.modify(rowId, "ValAmt1"  , "");
                            } else {
                                onClickGiftSearchImage(this ,rowId ,columnName, cellValue);
                            }
                        } else {
                            GiftAmtSum();
                        }
                    }
                }
            }
        });
        giftGrid.hideRow('R0',true,true);
        var calcForeSum = function(rowData, columnName, value) {
            if (isNum(rowData["ValAmt3"])
                && isNum(rowData["ValAmt1"])) {
                return Math.ceil(parseFloat(rowData["ValAmt3"])
                    * parseFloat(rowData["ValAmt1"]) / 10) * 10;
            } else {
                return 0;
            }
        };
        foreGrid = $("#foreGrid").JGrid({
                column: {
                    common: {
                        editable: true,
                        align: "center"
                    },
                    list: [
                        {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                        {name:"No",width:45,type:"seq"},
                        {name:"SttlMthCd",type:"text",editable:false,hide:true,align:"left",title:"SttlMthCd"},
                        {name:"Seq",type:"text",editable:false,hide:true,align:"left",title:"Seq"},
                        {name:"ActTypeCd1",type:"combo",editable:true,hide:false,align:"left",title : '<spring:message code="AT.E.ATE01.text107"  text="외화구분코드"/>',items:comboFoTypeCd},
                        {name:"ActTypeCd2",type:"combo",editable:true,hide:false,align:"left",title : '<spring:message code="AT.E.ATE01.text108"  text="현금/TC구분"/>',items:comboCashTcTypeCd},
                        {name:"ValAmt3",hide:false,align:"right",title : '<spring:message code="AT.E.ATE01.text109"  text="환율"/>'},
                        {name:"ValAmt1",type:"int",editable:true,hide:false,align:"right",title : '<spring:message code="AT.E.ATE01.text110" text="외화수령금액"/>'},
                        {name:"ValAmt2",type:"int",editable:false,hide:false,align:"right",title : '<spring:message code="AT.E.ATE01.text111" text="외화매출금"/>'}
                    ]
                },
                paging: {
                    size: 0
                },
                formula: {
                    bottom: [
                        [
                            {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                            {name:"ActTypeCd1",colspan:4},
                            {name:"ValAmt2",formula:"sum"}
                        ]
                    ]},
                event: {
                    change: function(rowId, columnName, value, oldValue) {
                        var cellType = this.getType(columnName);
                        if (columnName == "ActTypeCd1"	|| columnName == "ActTypeCd2") {
                            var FoTypeCd = this.get(rowId, "ActTypeCd1");
                            var CashTcTypeCd = this.get(rowId,"ActTypeCd2");
                            if (FoTypeCd != ""	&& CashTcTypeCd != "") {
                                $.ajax({	url : "<c:url value='/lotte/at/c/searchExRateATC05.do'/>",
                                    type : "POST",
                                    async : false,
                                    data : {BUKRS : $("#BUKRS").val(),
                                        GSBER : $("#GSBER").val(),
                                        FoTypeCd : FoTypeCd,
                                        CashTcTypeCd : CashTcTypeCd
                                    },
                                    dataType : "json",
                                    exception : function(response) {},
                                    success : function(response) {
                                        var rowData = response.result;
                                        if (!rowData)return;
                                        this.modify(rowId, "ValAmt3",	rowData.ExRate);
                                    }
                                });
                            }
                        }
                        ForeAmtSum();
                    }
                }
            });
        foreGrid.hideRow('R0',true,true);
        //무통장 그리드
        bankGrid = $("#BankGrid").JGrid({
            column: {
                common: {
                    editable: true,
                    align: "center"
                },
                list: [
                    {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                    {name:"No",width:45,type:"seq"},
                    {name:"findInfo",type:"button",buttonType:"img",align:"center",title:"계좌선택",width:"80",src:"<c:url value='/resources/theme/${theme}/image/contents/ico_sch.gif'/>",backgroundColor:"#cff092"},
                    {name:"SttlMthCd",type:"text",editable:false,hide:true,align:"left",title:"SttlMthCd"},
                    {name:"Seq",type:"text",editable:false,hide:true,align:"left",title:"Seq"},
                    {name:"ValItem3",type:"text",editable:false,align:"center",title : '<spring:message code="AT.E.ATE01.text112"  text="입금일자"/>'},
                    {name:"ValItem1",type:"text",editable:false,align:"left",title : '<spring:message code="AT.E.ATE01.text113"  text="입금계좌번호"/>'},
                    {name:"ValItem2",type:"text",editable:false,align:"left",title : '<spring:message code="AT.E.ATE01.text114"  text="입금은행"/>'},
                    {name:"ValItem4",type:"text",editable:false,align:"left",title : '<spring:message code="AT.E.ATE01.text115"  text="입금자명"/>'},
                    {name:"ValItem5",type:"text",editable:false,align:"left",title : '<spring:message code="AT.E.ATE01.text116"  text="무통장관리번호"/>'},
                    {name:"ValAmt1",type:"int",editable:false,align:"right",title : '<spring:message code="AT.E.ATE01.text117"  text="입금액"/>'},
                    {name:"DealAmt",type:"int",align:"right",title : '<spring:message code="AT.E.ATE01.text118"  text="결제금액"/>'},
                    {name:"ValAmt2",type:"int",hide:true,align:"right",title : '<spring:message code="AT.E.ATE01.text119"  text="지급수수료"/>'},
                    {name:"ValItem6",type:"text",hide:true,title:"계정ID"},
                    {name:"ValItem7",type:"text",hide:true,title:"입금시간"},
                    {name:"ValItem8",type:"text",hide:true,title:"통화키"}
                ]
            },
            paging: {
                size: 0
            },
            formula: {
                bottom: [
                    [
                        {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                        // {name:"ActTypeCd3",colspan:6},
                        {name:"DealAmt",formula:"sum"}
                    ]
                ]},
            event: {
                change: function (rowId, columnName, value, oldValue) {
                    var cellType = this.getType(columnName);
                    if (columnName == "DealAmt") {
                        BankAmtSum();
                    }
                },
                clickImage: function (rowId, columnName) {
                    var cellValue = this.get(rowId, columnName);
                    onClickBankSearchImage(this,rowId,columnName,cellValue)
                }
            }
        });
        bankGrid.hideRow('R0',true,true);
        cancGrid = $("#cancGrid").JGrid({
            column: {
                common: {
                    editable: false,
                    align: "center"
                },
                list: [
                    {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                    {name:"No",width:45,type:"seq"},
                    {name:"SellTypeCd",type:"combo",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text88" text="판매구분코드"/>',items:comboSellTypeCd},
                    {name:"ValItem1",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>'},
                    {name:"ValItem20",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text90"  text="카드명"/>'},
                    {name:"ValItem8",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text92"  text="유효기간"/>'},
                    {name:"ValItem9",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text93"  text="거래일시"/>'},
                    {name:"ValItem10",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text94"  text="할부기간"/>'},
                    {name:"ValItem11",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text95"  text="가맹점번호"/>'},
                    {name:"DealAmt",type:"int",editable:false,align:"right",title:'<spring:message code="AT.E.ATE01.text96"  text="거래금액"/>'},
                    {name:"ValItem2",type:"text",editable:false,align:"left",title:'<spring:message code="AT.E.ATE01.text97"  text="승인번호"/>'},
                    {name:"CancelYN",type:"check",editable:true,align:"center",title:'<spring:message code="AT.E.ATE01.text120" text="취소여부"/>'},
                    {name:"SttlMthCd",type:"text",hide:true,align:"left",title:"SttlMthCd"},
                    {name:"Seq",type:"text",hide:true,align:"left",title:"Seq"},
                    {name:"ValItem3",type:"text",hide:true,align:"left",title:"CardBizCd"},
                    {name:"ValItem4",type:"text",hide:true,align:"left",title:"CardBizMinorCd"},
                    {name:"ValItem6",type:"text",hide:true,align:"left",title:"CardPrefix"},
                    {name:"ActTypeCd5",type:"text",hide:true,align:"left",title:"KeyInTypeCd"},
                    {name:"ValItem13",type:"text",hide:true,align:"left",title:"MembStoreBizId"},
                    {name:"ActTypeCd6",type:"text",hide:true,align:"left",title:"VanCustTypeCd"},
                    {name:"ActTypeCd10",type:"text",hide:true,align:"left",title:"RespCd"},
                    {name:"ValItem17",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text98"  text="발급사코드"/>'},
                    {name:"ValItem18",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text99"  text="매입사코드"/>'},
                    {name:"eunYn",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text100"  text="은련카드여부"/>'},
                    {name:"PwCard",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text21" text="비밀번호"/>'},
                    {name:"AppFlag",type:"text",hide:true,align:"left",title:'<spring:message code="AT.E.ATE01.text121"  text="전문생성여부"/>'}
                ]
            },
            paging: {
                size: 0
            },
            event: {}
        });
        cardImpotGrid1 = $("#CardImpotGrid1").JGrid({
            column: {
                common: {
                    editable: false,
                    align: "center"
                },
                list: [
                    {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                    {name:"No",width:45,type:"seq"},
                    {name:"TEMP1",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text122"  text="점포"/>'},
                    {name:"TEMP2",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text123"  text="승인구분"/>'},
                    {name:"ValItem9",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text124" text="승인일자"/>'},
                    {name:"TEMP3",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text125"  text="POS번호"/>'},
                    {name:"TEMP4",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text126"  text="거래번호"/>'},
                    {name:"TEMP5",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text127"  text="예약유형"/>'},
                    {name:"ValItem20",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text128" text="카드사명"/>'},
                    {name:"ValItem1",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>'},
                    {name:"ValItem2",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text97"  text="승인번호"/>'},
                    {name:"DealAmt",type:"int",align:"right",title:'<spring:message code="AT.E.ATE01.text129" text="승인금액"/>'},
                    {name:"ValItem10",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text94"  text="할부기간"/>'},
                    {name:"TEMP7",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text130"  text="구분"/>'},
                    {name:"TEMP8",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text131"  text="원승인일자"/>'},
                    {name:"TEMP9",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text132"  text="원승인번호"/>'},
                    {name:"ValItem13",type:"text",hide:true,excludeExcel:true},
                    {name:"ValItem3",type:"text",hide:true,excludeExcel:true},
                    {name:"ValItem4",type:"text",hide:true,excludeExcel:true},
                    {name:"ValItem6",type:"text",hide:true,excludeExcel:true},
                    {name:"ValItem11",type:"text",hide:true,excludeExcel:true},
                    {name:"ValItem8",type:"text",hide:true,excludeExcel:true},
                    {name:"ActTypeCd5",type:"text",hide:true,excludeExcel:true}
                ]
            },
            paging: {
                size: 0
            },
            formula: {
                bottom: [
                    [
                        {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                        {name:"DealAmt",formula:"sum"}
                    ]
                ]},
            event: {}
        });
        cardImpotGrid1.hideRow('R0',true,true);
        //엑셀 업로드
        cardImpotGrid1.excelImport = function(divId, frmId) {
            var jGrid = this;
            //var cols = jGrid.treegrid.ColNames[1];              //컬럼목록.
            var columnList = {};
            //컬럼이름:컬럼ID 형태의 데이터를 만든다, 엑셀 upload에는 컬럼 제목만 존재하므로. 컬럼 ID로 변경이 필요함.

            var headers = this.userOptions.columnProperties.column;
            switch($.type(headers[0])) {
                case "object" 	: headers = [headers]; break;
                case "array"	: break;
            }
            var rowCnt = (headers.length - 1);
            for(var j=0; j<headers[rowCnt].length; j++) {
                var column = headers[rowCnt][j];
                var excelColumn = {};
                excelColumn.name = column.name;
                excelColumn.title = column.excelTitle ? column.excelTitle : column.title;
                columnList[excelColumn.title] = excelColumn.name;
            }
            var textColumnList = JSON.stringify(columnList);
            var columnRowCnt = headers.length;

            $("#"+frmId).ajaxSubmit({
                url : ctx+"/jgrid/excel/gridExcelUpload.json"
                ,data:{"HeaderInfo":textColumnList,"HeaderRowCnt":columnRowCnt }
                ,dataType:"json"
                ,success: function(response){
                    $("#"+divId).hide();
                    // JComponent wrapping model
                    var data = response.data;
                    // list id 셋팅.
                    var listAttribute = jGrid.options.id + "_list";
                    if(data[listAttribute] == null){
                        listAttribute = "jgrid_list";
                    }
                    var items = data[listAttribute];
                    if(items == null) return;
                    var size = items.length;
                    for(var i=0; i<size; i++){
                        var item = items[i];
                        item.Added = true;
                        item.Changed = true;
                        item.ValItem8 = "1111";
                        item.ActTypeCd5 = "T5400004";			//easycheck
                        if(!isNum(item.ValItem10)){
                            item.ValItem10 = "00";				//할부기간
                        }
                        item.ValItem1 = item.ValItem1.trim();	//카드번호
                        item.ValItem2 = item.ValItem2.trim();	//승인번호
                        // CardPrefix (Cardbin)을 이용한 카드정보 조회
                        for ( var k = 8; 0 <= k; k--) {
                            var cnt = 0;
                            if (item.ValItem1.substr(0, k) != null && item.ValItem1.substr(0, k) != "") {
                                $.ajax({
                                    url : "<c:url value='/lotte/at/c/searchCardATC05.do'/>",
                                    type : "POST",
                                    async : false,
                                    useBlockUI : false,
                                    data : {
                                        BUKRS : $("#BUKRS").val(),
                                        GSBER : $("#GSBER").val(),
                                        CardNo : item.ValItem1.substr(0,k)
                                    },
                                    dataType : "json",
                                    exception : function(response) {
                                    },
                                    success : function(response) {
                                        cnt = response.cnt;

                                        if (cnt == 1) {
                                            var rowData = response.result;
                                            item.ValItem13 = rowData.CardCustBizNo;
                                            item.ValItem3 = rowData.CardCustCd;
                                            item.ValItem4 = rowData.CardCustMinorCd;
                                            item.ValItem20 = rowData.CardNm;
                                            item.ValItem6 = rowData.CardPrefix;
                                            //승인일자 YYYYMMDDHHmmss 형태로 변환(이래야 프로시저SATKCreditCard01S 에서 에러는 않냄.20140429.최선일)
                                            item.ValItem9 = (item.ValItem9.replace(/-/g, "").replace(" ", "")) + ("000001");
                                            item.ValItem11 = rowData.MembNo;
                                        }
                                    }
                                });
                            } else {
                                item.Added = false;
                                alert('<spring:message code="cmm.message.399" text="등록된 카드가 아닙니다."/>'+'(<spring:message code="AT.E.ATE01.text89"  text="카드번호"/> :'+ item.ValItem1+")");
                                return;
                                //cnt = 1;
                            }
                            if (cnt == 1) break;
                        }
                    }
                    cardImpotGrid1.setData(items);
                    CardAmtSum();
                }
            });
        };
        cardImpotGrid2 = $("#CardImpotGrid2").JGrid({
            column: {
                common: {
                    editable: false,
                    align: "center"
                },
                list: [
                    {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                    {name:"No",width:45,type:"seq"},
                    {name:"Seq",type:"text",hide:true,align:"left",title:"No"},
                    {name:"ValItem9",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text133" text="판매일자"/>'},
                    {name:"TEMP1",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text126"  text="거래번호"/>'},
                    {name:"ValItem1",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>'},
                    {name:"ValItem20",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text128" text="카드사명"/>'},
                    {name:"ValItem2",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text97"  text="승인번호"/>'},
                    {name:"TEMP2",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text130"  text="구분"/>'},
                    {name:"DealAmt",type:"int",align:"right",title:'<spring:message code="AT.E.ATE01.text118" text="결제금액"/>'},
                    {name:"ValItem10",hide:true,excludeExcel:true},
                    {name:"ValItem13",hide:true,excludeExcel:true},
                    {name:"ValItem3",hide:true,excludeExcel:true},
                    {name:"ValItem4",hide:true,excludeExcel:true},
                    {name:"ValItem6",hide:true,excludeExcel:true},
                    {name:"ValItem11",hide:true,excludeExcel:true},
                    {name:"ValItem8",hide:true,excludeExcel:true},
                    {name:"ActTypeCd5",hide:true,excludeExcel:true}
                ]
            },
            paging: {
                size: 0
            },
            formula: {
                bottom: [
                    [
                        {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                        {name:"Seq",colspan:11},
                        {name:"DealAmt",formula:"sum"}
                    ]
                ]},
            event: {}
        });
        cardImpotGrid2.hideRow('R0',true,true);
        //엑셀 업로드
        cardImpotGrid2.excelImport = function(divId, frmId) {
            var jGrid = this;
            //var cols = jGrid.treegrid.ColNames[1];              //컬럼목록.
            var columnList = {};
            //컬럼이름:컬럼ID 형태의 데이터를 만든다, 엑셀 upload에는 컬럼 제목만 존재하므로. 컬럼 ID로 변경이 필요함.
            var headers = this.userOptions.columnProperties.column;
            switch($.type(headers[0])) {
                case "object" 	: headers = [headers]; break;
                case "array"	: break;
            }
            var rowCnt = (headers.length - 1);
            for(var j=0; j<headers[rowCnt].length; j++) {
                var column = headers[rowCnt][j];
                var excelColumn = {};
                excelColumn.name = column.name;
                excelColumn.title = column.excelTitle ? column.excelTitle : column.title;
                columnList[excelColumn.title] = excelColumn.name;
            }
            var textColumnList = JSON.stringify(columnList);
            var columnRowCnt = headers.length;

            $("#"+frmId).ajaxSubmit({
                url : ctx+"/jgrid/excel/gridExcelUpload.json"
                ,data:{"HeaderInfo":textColumnList,"HeaderRowCnt":columnRowCnt }
                ,dataType:"json"
                ,success: function(response){
                    $("#"+divId).hide();
                    // JComponent wrapping model
                    var data = response.data;
                    // list id 셋팅.
                    var listAttribute = jGrid.options.id + "_list";
                    if(data[listAttribute] == null){
                        listAttribute = "jgrid_list";
                    }
                    var items = data[listAttribute];
                    if(items == null) return;
                    var size = items.length;
                    var cardDate = "";
                    for(var i=0; i<size; i++){
                        var item = items[i];
                        item.Added = true;
                        item.Changed = true;
                        item.ValItem8 = "1111";
                        item.ActTypeCd5 = "T5400004"; //easyCheck
                        item.ValItem10 = "00";
                        item.ValItem1 = item.ValItem1.trim();
                        item.ValItem2 = item.ValItem2.trim();

                        if(item.ValItem9 != null && item.ValItem9 != ""){
                            cardDate = item.ValItem9;
                        }else{
                            item.ValItem9 = cardDate;
                        }
                        // CardPrefix (Cardbin)을 이용한 카드정보 조회
                        for ( var k = 8; 0 <= k; k--) {
                            var cnt = 0;
                            if (item.ValItem1.substr(0, k) != null && item.ValItem1.substr(0, k) != "") {
                                $.ajax({
                                    url : "<c:url value='/lotte/at/c/searchCardATC05.do'/>",
                                    type : "POST",
                                    async : false,
                                    useBlockUI : false,
                                    data : {
                                        BUKRS : $("#BUKRS").val(),
                                        GSBER : $("#GSBER").val(),
                                        CardNo : item.ValItem1.substr(0,k)
                                    },
                                    dataType : "json",
                                    exception : function(response) {
                                    },
                                    success : function(
                                        response) {
                                        cnt = response.cnt;
                                        if(k < 1){
                                            alert(5);
                                        }
                                        if (cnt == 1) {
                                            var rowData = response.result;
                                            item.ValItem13 = rowData.CardCustBizNo;
                                            item.ValItem3 = rowData.CardCustCd;
                                            item.ValItem4 = rowData.CardCustMinorCd;
                                            item.ValItem20 = rowData.CardNm;
                                            item.ValItem6 = rowData.CardPrefix;
                                            //승인일자 YYYYMMDDHHmmss 형태로 변환(이래야 프로시저SATKCreditCard01S 에서 에러는 않냄.20140429.최선일)
                                            item.ValItem9 = (item.ValItem9.replace(/-/g, "").replace(" ", "")) + ("000001");
                                            item.ValItem11 = rowData.MembNo;
                                        }
                                    }
                                });
                            } else {
                                item.Added = false;
                                alert('<spring:message code="cmm.message.399" text="등록된 카드가 아닙니다."/> (<spring:message code="AT.E.ATE01.text134"  text="순번"/> ' + item.Seq +')');
                                return;
                                //cnt = 1;
                            }
                            if (cnt == 1) break;

                        }
                    }
                    cardImpotGrid2.setData(items);
                    CardAmtSum();
                }
            });
        };
        cardImpotGrid3 = $("#CardImpotGrid3").JGrid({
            column: {
                common: {
                    editable: false,
                    align: "center"
                },
                list: [
                    {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                    {name:"No",width:45,type:"seq"},
                    {name:"Seq",type:"text",hide:true,align:"left",title:"No"},
                    {name:"TEMP1",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text133" text="판매일자"/>'},
                    {name:"TEMP2",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text135"  text="실판매시간"/>'},
                    {name:"TEMP3",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text125"  text="POS번호"/>'},
                    {name:"TEMP4",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text126"  text="거래번호"/>'},
                    {name:"TEMP5",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text136"  text="거래종류"/>'},
                    {name:"ValItem20",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text128" text="카드사명"/>'},
                    {name:"ValItem1",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>'},
                    {name:"ValItem9",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text124" text="승인일자"/>'},
                    {name:"ValItem10",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text94"  text="할부기간"/>'},
                    {name:"ValItem2",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text97"  text="승인번호"/>'},
                    {name:"DealAmt",type:"int",align:"right",title:'<spring:message code="AT.E.ATE01.text118"  text="결제금액"/>'},
                    {name:"TEMP7",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text137"  text="부가세"/>'},
                    {name:"TEMP8",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text138"  text="등록구분"/>'},
                    {name:"TEMP9",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text139"  text="전자서명여부"/>'},
                    {name:"ValItem13",hide:true,excludeExcel:true},
                    {name:"ValItem3",hide:true,excludeExcel:true},
                    {name:"ValItem4",hide:true,excludeExcel:true},
                    {name:"ValItem6",hide:true,excludeExcel:true},
                    {name:"ValItem11",hide:true,excludeExcel:true},
                    {name:"ValItem8",hide:true,excludeExcel:true},
                    {name:"ActTypeCd5",hide:true,excludeExcel:true}
                ]
            },
            paging: {
                size: 0
            },
            formula: {
                bottom: [
                    [
                        {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                        {name:"Seq",colspan:11},
                        {name:"DealAmt",formula:"sum"}
                    ]
                ]},
            event: {}
        });
        cardImpotGrid3.hideRow('R0',true,true);
        //엑셀 업로드
        cardImpotGrid3.excelImport = function(divId, frmId) {
            var jGrid = this;
            //var cols = jGrid.treegrid.ColNames[1];              //컬럼목록.
            var columnList = {};
            //컬럼이름:컬럼ID 형태의 데이터를 만든다, 엑셀 upload에는 컬럼 제목만 존재하므로. 컬럼 ID로 변경이 필요함.
            var headers = this.userOptions.columnProperties.column;
            switch($.type(headers[0])) {
                case "object" 	: headers = [headers]; break;
                case "array"	: break;
            }
            var rowCnt = (headers.length - 1);
            for(var j=0; j<headers[rowCnt].length; j++) {
                var column = headers[rowCnt][j];
                var excelColumn = {};
                excelColumn.name = column.name;
                excelColumn.title = column.excelTitle ? column.excelTitle : column.title;
                columnList[excelColumn.title] = excelColumn.name;
            }
            var textColumnList = JSON.stringify(columnList);
            var columnRowCnt = headers.length;
            $("#"+frmId).ajaxSubmit({
                url : ctx+"/jgrid/excel/gridExcelUpload.json"
                ,data:{"HeaderInfo":textColumnList,"HeaderRowCnt":columnRowCnt }
                ,dataType:"json"
                ,success: function(response){
                    $("#"+divId).hide();
                    // JComponent wrapping model
                    var data = response.data;
                    // list id 셋팅.
                    var listAttribute = jGrid.options.id + "_list";
                    if(data[listAttribute] == null){
                        listAttribute = "jgrid_list";
                    }
                    var items = data[listAttribute];
                    if(items == null) return;
                    var size = items.length;
                    for(var i=0; i<size; i++){
                        var item = items[i];
                        item.Added = true;
                        item.Changed = true;
                        item.ValItem8 = "1111";
                        item.ActTypeCd5 = "T5400004";	//easyCheck
                        item.ValItem1 = item.ValItem1.trim();
                        item.ValItem2 = item.ValItem2.trim();
                        // CardPrefix (Cardbin)을 이용한 카드정보 조회
                        for ( var k = 8; 0 <= k; k--) {
                            var cnt = 0;
                            if (item.ValItem1.substr(0, k) != null && item.ValItem1.substr(0, k) != "") {
                                $.ajax({
                                    url : "<c:url value='/lotte/at/c/searchCardATC05.do'/>",
                                    type : "POST",
                                    async : false,
                                    useBlockUI : false,
                                    data : {
                                        BUKRS : $("#BUKRS").val(),
                                        GSBER : $("#GSBER").val(),
                                        CardNo : item.ValItem1.substr(0,k)
                                    },
                                    dataType : "json",
                                    exception : function(response) {
                                    },
                                    success : function(
                                        response) {
                                        cnt = response.cnt;

                                        if (cnt == 1) {
                                            var rowData = response.result;
                                            item.ValItem13 = rowData.CardCustBizNo;
                                            item.ValItem3 = rowData.CardCustCd;
                                            item.ValItem4 = rowData.CardCustMinorCd;
                                            item.ValItem20 = rowData.CardNm;
                                            item.ValItem6 = rowData.CardPrefix;
                                            //승인일자 YYYYMMDDHHmmss 형태로 변환(이래야 프로시저SATKCreditCard01S 에서 에러는 않냄.20140429.최선일)
                                            item.ValItem9 = (item.ValItem9.replace(/-/g, "").replace(" ", "")) + ("000001");
                                            item.ValItem11 = rowData.MembNo;
                                        }
                                    }
                                });
                            } else {
                                alert('<spring:message code="cmm.message.399" text="등록된 카드가 아닙니다."/> (<spring:message code="AT.E.ATE01.text134"  text="순번"/> ' + item.Seq +')');
                                return;
                            }
                            if (cnt == 1) break;
                        }
                    }
                    cardImpotGrid3.setData(items);
                    CardAmtSum();
                }
            });
        };
    });
    // 2021-07-16 PG 업로드 신규 추가
    PGImportGrid = $("#PGImportGrid").JGrid({
        column: {
            common: {
                editable: false,
                align: "center"
            },
            list: [
                {name:"defaultCheck",title:"",width:60,type:"check",checkAll:true},
                {name:"No",width:45,type:"seq"},
                {name:"Seq",type:"text",hide:true,align:"left",title:"No"},
                {name:"ValItem9",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text133" text="판매일자"/>'},
                {name:"TEMP1",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text126"  text="거래번호"/>'},
                {name:"ValItem1",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>'},
                {name:"ValItem20",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text128" text="카드사명"/>'},
                {name:"ValItem2",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text97"  text="승인번호"/>'},
                {name:"TEMP2",type:"text",align:"left",title:'<spring:message code="AT.E.ATE01.text130"  text="구분"/>'},
                {name:"DealAmt",type:"int",align:"right",title:'<spring:message code="AT.E.ATE01.text118" text="결제금액"/>'},
                {name:"ValItem10",hide:true,excludeExcel:true},
                {name:"ValItem13",hide:true,excludeExcel:true},
                {name:"ValItem3",hide:true,excludeExcel:true},
                {name:"ValItem4",hide:true,excludeExcel:true},
                {name:"ValItem6",hide:true,excludeExcel:true},
                {name:"ValItem11",hide:true,excludeExcel:true},
                {name:"ValItem8",hide:true,excludeExcel:true},
                {name:"ActTypeCd5",hide:true,excludeExcel:true},
                {name:"ActTypeCd6",hide:true,excludeExcel:true}
            ]
        },
        paging: {
            size: 0
        },
        formula: {
            bottom: [
                [
                    {name:"No",value:"<spring:message code='AT.E.ATE01.text53' text='총합'/>"},
                    {name:"Seq",colspan:11},
                    {name:"DealAmt",formula:"sum"}
                ]
            ]},
        event: {}
    });
    PGImportGrid.hideRow('R0',true,true);
    //엑셀 업로드
    PGImportGrid.excelImport = function(divId, frmId) {
        var jGrid = this;
        //var cols = jGrid.treegrid.ColNames[1];              //컬럼목록.
        var columnList = {};
        //컬럼이름:컬럼ID 형태의 데이터를 만든다, 엑셀 upload에는 컬럼 제목만 존재하므로. 컬럼 ID로 변경이 필요함.
        var headers = this.userOptions.columnProperties.column;
        switch($.type(headers[0])) {
            case "object" 	: headers = [headers]; break;
            case "array"	: break;
        }
        var rowCnt = (headers.length - 1);
        for(var j=0; j<headers[rowCnt].length; j++) {
            var column = headers[rowCnt][j];
            var excelColumn = {};
            excelColumn.name = column.name;
            excelColumn.title = column.excelTitle ? column.excelTitle : column.title;
            columnList[excelColumn.title] = excelColumn.name;
        }
        var textColumnList = JSON.stringify(columnList);
        var columnRowCnt = headers.length;
        $("#"+frmId).ajaxSubmit({
            url : ctx+"/jgrid/excel/gridExcelUpload.json"
            ,data:{"HeaderInfo":textColumnList,"HeaderRowCnt":columnRowCnt }
            ,dataType:"json"
            ,success: function(response){
                $("#"+divId).hide();
                // JComponent wrapping model
                var data = response.data;
                // list id 셋팅.
                var listAttribute = jGrid.options.id + "_list";
                if(data[listAttribute] == null){
                    listAttribute = "jgrid_list";
                }
                var items = data[listAttribute];
                if(items == null) return;
                var size = items.length;
                var cardDate = "";
                for(var i=0; i<size; i++){
                    var item = items[i];
                    item.Added = true;
                    item.Changed = true;
                    item.ValItem8 = "1111";
                    item.ActTypeCd5 = "T5400016"; // PG 등록 신규 코드 수정 - T5400016 : PG 업로드
                    item.ActTypeCd6 = "T5900020"; // PG 등록 신규 코드 수정 - T5900020 : NICE( ERP 업로드 )
                    item.ValItem10 = "00";
                    item.ValItem1 = item.ValItem1.trim();
                    item.ValItem2 = item.ValItem2.trim();
                    if(item.ValItem9 != null && item.ValItem9 != ""){
                        cardDate = item.ValItem9;
                    }else{
                        item.ValItem9 = cardDate;
                    }
                    // CardPrefix (Cardbin)을 이용한 카드정보 조회
                    for ( var k = 8; 0 <= k; k--) {
                        var cnt = 0;
                        if (item.ValItem1.substr(0, k) != null && item.ValItem1.substr(0, k) != "") {
                            $.ajax({
                                url : "<c:url value='/lotte/at/c/searchCardATC05.do'/>",
                                type : "POST",
                                async : false,
                                useBlockUI : false,
                                data : {
                                    BUKRS : $("#BUKRS").val(),
                                    GSBER : $("#GSBER").val(),
                                    CardNo : item.ValItem1.substr(0,k)
                                },
                                dataType : "json",
                                exception : function(response) {
                                },
                                success : function(
                                    response) {
                                    cnt = response.cnt;
                                    if(k < 1){
                                        alert(5);
                                    }
                                    if (cnt == 1) {
                                        var rowData = response.result;
                                        item.ValItem13 = rowData.CardCustBizNo;
                                        item.ValItem3 = rowData.CardCustCd;
                                        item.ValItem4 = rowData.CardCustMinorCd;
                                        item.ValItem20 = rowData.CardNm;
                                        item.ValItem6 = rowData.CardPrefix;
                                        //승인일자 YYYYMMDDHHmmss 형태로 변환(이래야 프로시저SATKCreditCard01S 에서 에러는 않냄.20140429.최선일)
                                        item.ValItem9 = (item.ValItem9.replace(/-/g, "").replace(" ", "")) + ("000001");
                                        item.ValItem11 = rowData.MembNo;
                                    }
                                }
                            });
                        } else {
                            item.Added = false;
                            alert('<spring:message code="cmm.message.399" text="등록된 카드가 아닙니다."/> (<spring:message code="AT.E.ATE01.text134"  text="순번"/> ' + item.Seq +')');
                            return;
                            //cnt = 1;
                        }
                        if (cnt == 1) break;
                    }
                }
                PGImportGrid.setData(items);
                CardAmtSum();
            }
        });
    };
    $(document).ready(function(){//채권 및 외상 프로그램 링크});
    $(function() {
        var OnChangeFlag    = '${param.OnChangeFlag}';
        var Gsber       = '${param.GSBER}';
        var StartDate	= '${param.StartDate}';
        var EndDate		= '${param.EndDate}';
        var SlipId		= '${param.SlipId}';
        $(".btn_del").hide();
        $(".btn_reset").hide();
        $(".date").datepicker();
        $("#SellDate").val(toDayDtm.substring(0, 10));
        $("#S_StartDay").val(toDayDtm.substring(0, 10));
        $("#S_EndDay").val(toDayDtm.substring(0, 10));
        $("#RtnEndDate").val(toDayDtm.substring(0, 10));
        $("#GSBER").change();
        currRow = subgrid.getRowCount() + 1;
        onChangePPaidTypeCd();
        onChangeDivGsberSttlCdCombo();
        //mask_money_pm 일경우 숫자 아니면 0입력
        $("[jwork_mask=mask_money_pm]").bind("change",function() {
            J.unbindMaskData();
            if(!isNum(this.value)){
                this.value = 0;
            }
        });
        J.setupMask();
//						var OnChangeFlag    = '${param.OnChangeFlag}';
        if( OnChangeFlag == 'Y' ) {
            $('#S_StartDay').datepicker();
            $('#S_EndDay').datepicker();
            $('#S_GSBER').val(Gsber);
            $('#S_StartDay').val(StartDate.substring(0,4) + '-' + StartDate.substring(4,6) + '-'  + StartDate.substring(6,8));
            $('#S_EndDay').val(EndDate.substring(0,4) + '-'  + EndDate.substring(4,6) + '-'  + EndDate.substring(6,8));
            $('#S_SlipId').val(SlipId);
            basicSearch();
            $('#S_SlipId').val(""); // 점프된 이후에 점프용 전표번호 히든필드 초기화
        }
    });
    //현금영수증 팝업 띄우기
    window.fn_cashPopOpen = function(obj) {
        if(obj.crudYn == "S"){			//저장일때
            //현금영수증 이미 등록 되어있으면 팝업을 띄우지 않는다.
            J.unbindMaskData();
            var rowData = null;
            rowData = obj;
            $.ajax({
                url : "<c:url value='/lotte/at/z/searchCashAppYnATZ26.do'/>",
                type : "POST",
                data : {
                    BUKRS : rowData.BUKRS
                    , GSBER : rowData.GSBER
                    , TACSellDate : rowData.SellDate
                    , PosId : rowData.PosId
                    , SlipId : rowData.SlipId
                },
                dataType : "json",
                exception : function(response) {
                    J.setupMask();
                },
                success : function(response) {
                    if(response.appYn == "Y") {
                        return;
                    }else{
                        fn_hyungumPop(obj);
                    }
                }
            });
        }else if(obj.crudYn == "D"){	//삭제일때
            fn_hyungumPop(obj);
        }
        J.setupMask();
    };
    $("#CardNo").bind("focusout", function(){
        var temp = $.trim($("#CardNo").val());
        if(temp.length > 16){
            var lCardNo = temp.substring(0, 16);  //카드번호
            var expDt = temp.substring(17, 21);	//유효기간
            $("#CardNo").val(lCardNo);
            $('#CardNo').trigger('change');
            $('#ValidTerm').val(expDt);
            $("#CardNo").val(temp);
        }
    });
    // 포인트 시재 화면 클리어
    $("#btnUsePointFormReset").bind("click", function() {
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text252" text="멤버십포인트가 이미 사용 되었습니다. 변경을 원하실경우 Point사용 취소후 사용하여 주십시오."/>');
            return;
        }
        cmmClearForm("memPointFormUse");
    });
    // 롯데멤버십포인트 회원인증
    $("#USE_CUSTACCEPT").bind("click", function() {
        if(!$("#memPointFormUse").validate()) {
            return false;
        }
        if(!fn_memPointUseCheck(cardImpotGrid1, cardImpotGrid2, cardImpotGrid3 , sijaGrid, PGImportGrid)){
            alert('<spring:message code="AT.E.ATE01.text250" text="멤버십포인트를 사용할수 없습니다."/>');
            return;
        }
        $.ajax({
            url : "<c:url value='/lotte/at/e/lotteMemCustAccept.do'/>",
            type : "POST",
            async : false,
            data : {
                MAINFORM : $("#regForm").formToJsonString()
                , MEMPOINTFORMUSE : $("#memPointFormUse").formToJsonString()
                , CODE	: "J1700002"
                , memCardEmvData : memCardEmvData
            },
            dataType : "json",
            exception : function(response) {
            },
            success : function(response) {
                var rowData = response.result;
                $('#memPointFormUse').fillWith(rowData);
            }
        });
    });
    // 롯데멤버십포인트 사용승인
    $("#btnUsePointAccept").bind("click", function() {
        J.unbindMaskData();
        if(!$("#memPointFormUse").validate()) {
            return false;
        }
        if(!fn_memPointUseCheck(cardImpotGrid1, cardImpotGrid2, cardImpotGrid3 , sijaGrid, PGImportGrid)){
            alert('<spring:message code="AT.E.ATE01.text250" text="멤버십포인트를 사용할수 없습니다."/>');
            return;
        }
        if(!fn_sijaUseCheck(sijaGrid)){
            alert('<spring:message code="AT.E.ATE01.text252" text="멤버십포인트가 이미 사용 되었습니다. 변경을 원하실경우 Point사용 취소후 사용하여 주십시오."/>');
            return;
        }
        if(!fn_maxPointAmtCheck( $("#USE_CUSTMAXPOINT").val() ) ){
            alert('<spring:message code="AT.E.ATE01.text253" text="가용포인트 1,000포인트 이상 사용가능합니다."/>');
            return;
        }
        if(!fn_usePointAmtCheck( $("#USE_CUSTUSEPOINT").val() ) ){
            alert('<spring:message code="AT.E.ATE01.text254" text="100포인트 단위로 입력하여 주십시오."/>');
            return;
        }
        $.ajax({
            url : "<c:url value='/lotte/at/e/lotteMemPointUseAccept.do'/>",
            type : "POST",
            async : false,
            data : {
                MAINFORM : $("#regForm").formToJsonString()
                , MEMPOINTFORMUSE : $("#memPointFormUse").formToJsonString()
                , CODE	: "J1700002"
                , memCardEmvData : memCardEmvData
            },
            dataType : "json",
            exception : function(response) {
// 				alert(response.code + " : " + response.message);
            },
            success : function(response) {
                var rowData = response.result;
                $('#memPointFormUse').fillWith(rowData);
                $('#USE_CUSTAPPRNO').val(rowData.tr_receive_Use12); // 승인번호
                $('#tr_receive_UseCancel12').val(""); 				// 취소 승인번호 클리어
                PointSum();
                J.setupMask();
            }
        });
    });
    // 롯데멤버십포인트 사용 승인취소 Start
    $("#btnUsePointCancel").bind("click", function() {
        J.unbindMaskData();
        if(!$("#memPointFormUse").validate()) {
            return false;
        }
        if(fn_pointCancelCheck( $("#tr_receive_Mem02").val() ,$("#tr_receive_Use12").val() , $("#tr_receive_UseCancel12").val()) == "1" ){
            // 회원인증안함
            alert('<spring:message code="AT.E.ATE01.text257" text="회원인증이 되지 않았습니다."/>');
            return false;
        }
        if(fn_pointCancelCheck( $("#tr_receive_Mem02").val() ,$("#tr_receive_Use12").val() , $("#tr_receive_UseCancel12").val()) == "2" ){
            // 사용승인 안함
            alert('<spring:message code="AT.E.ATE01.text258" text="사용승인후 취소하여 주십시오."/>');
            return false;
        }
        if(fn_pointCancelCheck( $("#tr_receive_Mem02").val() ,$("#tr_receive_Use12").val() , $("#tr_receive_UseCancel12").val()) == "3" ){
            // 이미 취소했음
            alert('<spring:message code="AT.E.ATE01.text259" text="이미 취소 되었습니다."/>');
            return false;
        }
        if(fn_pointCancelCheck( $("#tr_receive_Mem02").val() ,$("#tr_receive_Use12").val() , $("#tr_receive_UseCancel12").val()) == "0" ){
            // 취소전문 전송 가능
            $.ajax({
                url : "<c:url value='/lotte/at/e/lotteMemPointUseCancel.do'/>",
                type : "POST",
                async : false,
                data : {
                    MAINFORM : $("#regForm").formToJsonString()
                    , MEMPOINTFORMUSE : $("#memPointFormUse").formToJsonString()
                    , CODE	: "J1700002"
                    , memCardEmvData : memCardEmvData
                },
                dataType : "json",
                exception : function(response) {
                    alert(response.code + " : " + response.message);
                },
                success : function(response) {
                    var rowData = response.result;
                    $('#memPointFormUse').fillWith(rowData);
                    $("#USE_CUSTUSEPOINT").val(0);
                    $("#USE_CUSTAPPRNO").val("");	// 사용승인번호 클리어
                    PointSum();
                }
            });
        }
    });// 롯데멤버십포인트 사용 승인취소 End
    	$("#btnExcelDownload1").bind("click", function () {
            maingrid.request({
                command: 'excel',
                fileName: '${currentMenuName}',
                data: $('#searchForm').formToJson()
            });
        });
        $("#btnExcelDownload2").bind("click", function () {
            subgrid1.request({
                command:'excel',
                fileName: '${currentMenuName}',
                data: subgrid1param
            });
        });
        $("#btnExcelDownload3").bind("click", function () {
            subgrid.request({
                command:'excel',
                fileName: '${currentMenuName}',
                data: searchData
            });
        });
    });
});

</script>
<div id="mainFrame" class="frame_contents">
	<input type="hidden" id="reportUrl" name= "reportUrl"/>
	<div class="frame_contents">
		<div class="section">
			<h3><spring:message code="AT.E.ATE01.text140"  text="조회정보입력"/></h3>
			<!-- table 영역 -->
			<div class="sub_btn_right_t">
			</div>
			<div class="table-box">
				<form id="searchForm">
					<table class="tbl_Sch" summary="조회조건 폼 입니다.">
						<caption>조회조건</caption>
						<colgroup>
							<col width="100px"/>
							<col width="*"/>
							<col width="100px"/>
							<col width="*"/>
							<col width="100px"/>
							<col width="*"/>
							<col width="130px"/>
							<col width="*"/>
							<col width="130px"/>
							<col width="220px"/>
						</colgroup>
						<tr>
							<th scope="row"><label for="">
								<spring:message code="AT.E.ATE01.text141" text="사업영역"/> </label></th>
							<td><jcode:select id="S_GSBER" name="S_GSBER" codeGrpId="GSBER" isEmptySelect="false"/></td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text144" text="업무"/></label>
							</th>
							<td><span id="spn_JobTypeCd_H"></span></td>
							<th scope="row"><label for="">
								<spring:message code="AT.E.ATE01.text10" text="업장분류"/> </label></th>
							<td><span id="spn_ShopClassCd_H"></span></td>
							<th scope="row"><label for="">
								<spring:message code="AT.E.ATE01.text10" text="매출구분"/> </label></th>
							<td>          <!-- <span id="spn_SellOccuTypeCd_H"></span> -->
								<select id="SellOccuTypeCd_H" name="SellOccuTypeCd_H">
									<option value="">선택</option>
									<option value="1">POS위약금취소</option>
									<option value="2">PIN외상매출취소</option>
								</select></td>
							<th scope="row"><label for="">
								<spring:message code="AT.E.ATE01.text61" text="매출일자"/> </label></th>
							<td>
								<input id="S_StartDay" name="S_StartDay" type="text" class="basic date vt_date_last" style="width: 75px;" jwork_mask="mask_date" value="2024-04-01"/> ~
								<input id="S_EndDay" name="S_EndDay" type="text" class="basic date vt_date_last" style="width: 75px;" jwork_mask="mask_date" value=""/>
								<input name="S_SlipId" id="S_SlipId" type="text" class="basic num" jwork_mask="mask_num4" value="" alt="<spring:message code="AT.I.ATI03.text02" text="전표번호"/>" style="display: none;"/>
							</td>
						</tr>
					</table>
				</form>
			</div>

		</div>
		<!-- section 종료 -->

		<div id="mainData">
			<!-- section 시작 -->
			<div class="section">
				<h3>
					<spring:message code="AT.E.ATE01.text142"  text="매출내역"/>
					<span class="show_hide_wrap">
	            		<img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn"/>
	        		</span>

	        	</h3>
	        	<div class="sub_btn_right_t">
				<span class="btn_duty"><a id="btnExcelDownload1" href="#">Excel다운로드</a></span>
				</div>
				<div class="table-box grid_wrap grid_height_l" id="mainGridDiv">
					<div id="Maingrid"></div>
				</div>
			</div>
			<!-- section 시작 -->
			<div class="section">
				<h3><spring:message code="AT.E.ATE01.text143"  text="등록정보"/></h3>
				<!-- table 영역 -->
				<div class="table-box">
					<form id="regForm">
						<input id="OrdBUKRS" name="OrdBUKRS" type="hidden">
						<input id="OrdGSBER" name="OrdGSBER" type="hidden">
						<input id="OrdSlipId" name="OrdSlipId" type="hidden">
						<input id="OrdSellDate" name="OrdSellDate" type="hidden">
						<input id="OrdPosId" name="OrdPosId" type="hidden">
						<input id="OrdShopSysCd" name="OrdShopSysCd" type="hidden">
						<input id="OrdSellOccuTypeCd" name="OrdSellOccuTypeCd" type="hidden">
						<table class="tbl_Form" summary="상세정보">
							<caption>상세정보</caption>
							<colgroup><col width="170px" /><col width="*" /><col width="120px" /><col width="15%" /><col width="90px" /><col width="15%" /><col width="120px" /><col width="15%" />
							</colgroup>
							<tr><th scope="row">	<span class="color_im_bl">*</span>	<label for="">		<spring:message code="AT.E.ATE01.text141"	text="사업영역" />	</label></th><td>	<input id="BUKRS" name="BUKRS" type="hidden" class="basic num off" value="" disabled="disabled" value="${sessionScope.SessionVO.BUKRS}" /><jcode:select id="GSBER" name="GSBER" codeGrpId="GSBER" isEmptySelect="false" onchange="onChangeGSBERCombo();"/></td><th scope="row">	<spring:message code="AT.E.ATE01.text60" text="일반매출번호"/></th><td>	<input name="NormalSellNo" class="basic num off" readonly="readonly"></td><th scope="row">	<span class="color_im_bl">*</span>	<label for="">		<spring:message code="AT.E.ATE01.text61" text="매출일자"/>	</label></th><td>	<input id="SellDate" name="SellDate" type="text" style="width: 75px;" class="basic date vt_date_last" value="" /></td><th scope="row">	<span class="color_im_bl">*</span>	<label for=""><spring:message code="AT.E.ATE01.text144"  text="업무"/></label></th><td><span id="spn_JobTypeCd"></span></td>
							</tr>
							<tr><th scope="row">	<label for="">		<spring:message code="AT.E.ATE01.text145"  text="취소전_원래매출번호"/>	</label></th><td colspan="3">	<input name="OrgNormalSellNo" type="text" class="basic num off" value="" readonly="readonly"/></td><td colspan="2">	<span class="padding-left-20">		<input id="OrgCancelYN" type="checkbox" disabled="disabled" class="check" name="CancelYN" />		<spring:message code="AT.E.ATE01.text146"  text="매출취소여부"/>	</span></td><th scope="row">	<span class="color_im_bl">*</span>	<label for="">		<spring:message code="AT.E.ATE01.text10" text="업장분류" />	</label></th><td>	<span id="spn_ShopClassCd"></span></td>
							</tr>
							<tr><th scope="row">	<span class="color_im_bl">*</span>	<label for="">		<spring:message code="AT.E.ATE01.text147"  text="매출업장명(프론트업장)"/>	</label></th><td colspan="3" >	<input id="TypeShopCd" name="TypeShopCd" type="text" class="basic code" value="" jwork_mask="mask_num8"/>	<input id="TypeShopNm" name="TypeShopNm" type="text" class="basic name help_pr" value="" />	<input id="ShopSysCd" name="ShopSysCd" type="hidden" class="basic num off" value="" disabled="disabled" />	<a href="#" id="btnStkShopPop">		<img src="${ctx}/resources/theme/${theme}/image/contents/ico_sch.gif" class="img_ic" align="absbottom" alt='검색제어' />	</a></td><th scope="row">	<label for="">		<spring:message code="AT.E.ATE01.text148"  text="내국인수"/>	</label></th><td>	<input id="LocalQty" name="LocalQty" type="text" class="basic num_s text-right" value="" jwork_mask="mask_qty" /></td><th scope="row">	<label for="">		<spring:message code="AT.E.ATE01.text149"  text="외국인수"/>	</label></th><td>	<input id="ForeignerQty" name="ForeignerQty" type="text" class="basic num_s text-right" value="" jwork_mask="mask_qty" /></td>
							</tr>
							<tr><th scope="row">	<label for="">		<spring:message code="AT.E.ATE01.text150"  text="비고"/>	</label></th><td colspan="7">	<input id="Etc" name="Etc" type="text" class="basic name_s03p value="" maxlength="50"/>	<input id="sijaRow" name="sijaRow" type="hidden" class="basic num" value="" disabled="disabled" /></td>
							</tr>
						</table>
					</form>
				</div>
			</div>
			<!-- section 종료 -->
			<div class="sub_btn_right_t">

				<span class="btn_print"><a id="btnATE01_01Rpt" href="#"><spring:message code="AT.E.ATE01.text151"  text="영수증출력"/></a></span>
				<span class="btn_print"><a id="btnATE01_01_BIXOLONRpt" href="#"><spring:message code="AT.E.ATE01.text151"  text="영수증출력(모바일)"/></a></span>
				<span class="btn_sum"><a id="btnATE01_02Rpt" href="#"><spring:message code="AT.E.ATE01.text152"  text="매출자금입금표"/></a></span>
				<span class="btn_sum"><a id="btnATE01_03Rpt" href="#"><spring:message code="AT.E.ATE01.text153"  text="외상매출금전표"/></a></span>
			</div>
			<!-- section 시작 -->
			<div class="section">
				<h3><spring:message code="AT.E.ATE01.text154"  text="행사조회"/></h3>
				<!-- table 영역 -->
				<div class="table-box">
					<table class="tbl_Sch" summary="상세정보">
						<caption>상세정보</caption>
						<colgroup>
							<col width="110px" />
							<col width="*" />
						</colgroup>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text75" text="행사코드"/></label></th>
							<td class="right_noline"><input id="EventCd" name="EventCd" type="text" class="basic code off" value="" /><input	id="EventSeq" name="EventSeq" type="text" class="basic sbox off text-right" value="" disabled="disabled" /><input id="EventNm" name="EventNm" type="text" class="basic name_s01 off" value="" /><a href="#" 	id="btnEventPop" style="display: none">	<img src="${ctx}/resources/theme/${theme}/image/contents/ico_sch.gif" class="img_ic" align="absbottom" alt='검색제어' /></a>
							</td>
						</tr>
					</table>
				</div>
				<div class="section">
					<h3><spring:message code="AT.E.ATE01.text155"  text="행사목록"/><span class="show_hide_wrap">
	            <img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn"/>
	        </span></h3>
			        <div class="sub_btn_right_t">
						<span class="btn_duty"><a id="btnExcelDownload2" href="#">Excel다운로드</a></span>
					</div>
					<div class="table-box grid_wrap grid_height_s" id="subGridDiv1">
						<div id="subgrid1"></div>
					</div>
				</div>
			</div>
			<!-- section 종료 -->

			<!-- section 시작 -->
			<div class="section">
				<div class="sectionbtn">
					<button id="btnInsert" class="downbtn">
						<span class="alttxt">아래 페이지로</span>
					</button>
				</div>
			</div>
			<!-- section 종료 -->

			<!-- section 시작 -->
			<div class="section">
				<h3><spring:message code="AT.E.ATE01.text156"  text="매출목록"/><span class="show_hide_wrap">
	            <img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn"/>
	        </span></h3>
				<!-- sub_button -->
				<div class="sub_btn_right_t">
						<span class="btn_duty"><a id="btnExcelDownload3" href="#">Excel다운로드</a></span>
						<span class="btn_row_ins"><a class="btnRowInsert"  href="#" value="sub" id="subgridBtnIn"><spring:message code="AT.E.ATE01.text157" text="행추가" /></a></span>
						<span class="btn_row_del"><a class="btnRowDelete" href="#" value="sub" id="subgridBtnDel"><spring:message code="AT.E.ATE01.text158" text="행삭제" /></a></span>
				</div>
				<div class="table-box grid_wrap grid_height_l" id="subGridDiv">
					<div id="subgrid" style="width: 100%; height: 100%;"></div>
				</div>
			</div>
			<!-- section 종료 -->

			<!-- section 시작 -->
			<div id="" class="section">
				<h3><spring:message code="AT.E.ATE01.text159"  text="결제정보"/></h3>
				<!-- sub_button -->
				<div class="sub_btn_right_t">
					<span class="btn_duty"><a href="#" id="btnAppr"><spring:message code="AT.E.ATE01.text160" text="결제화면" /></a></span>
				</div>

				<form id="regSijaForm">
				<!-- table 영역 -->
				<div class="table-box">
					<table class="tbl_Form" summary="상세정보">
						<caption>상세정보</caption>
						<colgroup>
							<col width="125px" />
							<col width="*" />
							<col width="125px" />
							<col width="*" />
							<col width="145px" />
							<col width="*" />
							<col width="115px" />
							<col width="*" />
						</colgroup>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text161"  text="현금총액"/></label></th>
							<td><input id="getTotHyungum" name="getTotHyungum" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text162"  text="받은외화총금액"/></label></th>
							<td><input id="getTotForeAmt" name="getTotForeAmt" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text163"  text="현금과다금액"/></label></th>
							<td><input id="getTotCashOsAmt" name="getTotCashOsAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text164"  text="수표총액"/></label></th>
							<td><input id="getTotSupyoAmt" name="getTotSupyoAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
						</tr>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text165"  text="외상발생금액"/></label></th>
							<td><input id="getTotCredAmt" name="getTotCredAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text166"  text="무통장총금액"/></label></th>
							<td><input id="getTotBankAmt" name="getTotBankAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text167"  text="카드결제금총액"/></label></th>
							<td><input id="i_totCard" name="i_totCard" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text168"  text="선수금발생"/></label></th>
							<td><input id="getTotPPaidAmt" name="getTotPPaidAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
						</tr>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text43"  text="가수금"/></label></th>
							<td><input id="getTotSrecpAmt" name="getTotSrecpAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text169"  text="상품권총액"/></label></th>
							<td><input id="getTotGiftAmt" name="getTotGiftAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text42"  text="선수금대체"/></label></th>
							<td><input id="getTotRePPaidAmt" name="getTotRePPaidAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text238"  text="티켓선수발생"/></label></th>
							<td><input id="getTotPPaidTickeAmt" name="getTotPPaidTickeAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
						</tr>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text45"  text="잡이익"/></label></th>
							<td><input id="getTotCashOsAmt1" name="getTotCashOsAmt1" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text40"  text="티켓선수VAT"/></label></th>
							<td><input id="getTotPPaidTickeVatAmt" name="getTotPPaidTickeVatAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text260"  text="롯데멤버십 사용포인트"/></label></th>
							<td ><input id="getTotPointAmt" name="getTotPointAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" /><input id="getTotPointSaveAmt" name="getTotPointSaveAmt" type="hidden"/>	 <!-- 롯데멤버십 적립포인트	 -->
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text261"  text="핸드링충전"/></label></th>
							<td><input id="getTotBandChargeAmt" name="getTotBandChargeAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
						</tr>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text262"  text="핸드링환불"/></label></th>
							<td><input id="getTotBandRefundAmt" name="getTotBandRefundAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text263"  text="본지점발생"/></label></th>
							<td><input id="getDivGsberBAmt" name="getDivGsberBAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text264"  text="본지점대체"/></label></th>
							<td><input id="getDivGsberDAmt" name="getDivGsberDAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text264"  text="VAT금액"/></label></th>
							<td><input id="getVatAmt" name="getVatAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
						</tr>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text262"  text="티켓선수대체"/></label></th>
							<td colspan = "7"><input id="getTotRePPaidTickeAmt" name="getTotRePPaidTickeAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
						</tr>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text172"  text="매출액합계1"/></label></th>
							<td><input id="SaleTotAmt" name="SaleTotAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text173"  text="총결제금액"/></label></th>
							<td><input id="ApprTotAmt" name="ApprTotAmt" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text174"  text="총거스름금액"/></label></th>
							<td><input id="getTotChange" name="getTotChange" type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text175"  text="총미결제금액"/></label></th>
							<td><input id="NappTotAmt" name="NappTotAmt"  type="text" class="basic value off" value="" readonly="readonly" jwork_mask="mask_money_pm" />
							</td>
						</tr>
					</table>
				</div>
				</form>
			</div>
			<!-- section 종료 -->

			<!-- section 시작 -->
			<div class="section">
				<h3 id="myTool"><spring:message code="AT.E.ATE01.text176"  text="사원정보"/></h3>
				<!-- table 영역 -->
				<div class="table-box">
					<table class="tbl_Form" summary="상세정보">
						<caption>상세정보</caption>
						<colgroup>
							<col width="120px" />
							<col width="*" />
							<col width="120px" />
							<col width="*" />
							<col width="130px" />
							<col width="*" />
							<col width="110px" />
							<col width="*" />
						</colgroup>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text66" text="등록일자"/></label></th>
							<td><input id="EmpRegDate" name="EmpRegDate" type="text" class="basic off" jwork_mask="mask_date" value="" readonly="readonly" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text177"  text="등록사원"/></label></th>
							<td><input id="EmpRegEmpNm" name="EmpRegEmpNm" type="text" class="basic name off" value="" readonly="readonly" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text68" text="수정일자"/></label></th>
							<td><input id="EmpUptDate" name="EmpUptDate" type="text" class="basic off" jwork_mask="mask_date" value="" readonly="readonly" />
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text178"  text="수정사원"/></label></th>
							<td><input id="EmpUptEmpNm" name="EmpUptEmpNm" type="text" class="basic name off" value="" readonly="readonly" />
							</td>
						</tr>
					</table>
				</div>
			</div>
			<!-- section 종료 -->
		</div>
	</div>
</div>
<!-- block 여기가 내용이 들어가는 본문 시작 -->
<div id="subFrame" class="frame_contents" style="display: none;">
	<div class="section">
		<h3>
			<spring:message code="AT.E.ATE01.text179" text="일반매출등록(SAP)" />
		</h3>
		<!-- table 영역 -->
		<div class="table-box">

			<!-- section 시작 -->
			<div class="section">
				<!-- table 영역 -->
				<div class="table-box">
					<table class="tbl_Sch" summary="조회조건 폼 입니다.">
						<caption>조회조건</caption>
						<colgroup>
							<col width="110px" />
							<col width="*" />
							<col width="110px" />
							<col width="*" />
						</colgroup>
						<tr>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text180" text="처리업무구분" /></label></th>
							<td><input id="ProcType" name="ProcType" type="text" class="basic name_s1 off " value='<spring:message code="AT.E.ATE01.text181"  text="일반매출등록 신규"/>' readonly="readonly"/>
							</td>
							<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text182"  text="처리매출번호"/></label></th>
							<td><input id="ShopSellNo" name="ShopSellNo" type="text" class="basic num off NormalSellNo" value="" readonly="readonly" />
							</td>
						</tr>
					</table>
				</div>
			</div>
			<div class="section">
				<h3><spring:message code="AT.E.ATE01.text183"  text="대차"/><span class="show_hide_wrap">
            <img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn"/>
        </span></h3>
				<div class="table-box grid_wrap grid_height_l">
					<div id="sijaGrid" style="width: 100%; height: 100%;"></div>
				</div>
				<!-- 내부 section 종료 -->
			</div>
			<!-- section 종료 -->
			<!-- 내부 탭 시작 -->
			<div class="contents-tab-box">
                    <ul class="contents-tab">
                        <li id="tab1" class="on"><span class="tab-tit"     onclick="tabClick('1')"><a href="#"><spring:message      code="AT.E.ATE01.text184" text="현금/수표"/></a></span></li>
                        <li id="tab2"><span class="tab-tit" onclick="tabClick('2')">><a href="#"><spring:message      code="AT.E.ATE01.text32" text="신용카드"/></a></span></li>
                        <li id="tab3"><span class="tab-tit" onclick="tabClick('3')">><a href="#"><spring:message      code="AT.E.ATE01.text29" text="상품권"/></a></span></li>
                        <li id="tab4"><span class="tab-tit" onclick="tabClick('4')">><a href="#"><spring:message      code="AT.E.ATE01.text30" text="외화"/></a></span></li>
                        <li id="tab5"><span class="tab-tit" onclick="tabClick('5')">><a href="#"><spring:message      code="AT.E.ATE01.text185" text="외상"/></a></span></li>
                        <li id="tab6"><span class="tab-tit" onclick="tabClick('6')">><a href="#"><spring:message      code="AT.E.ATE01.text38" text="선수금"/></a></span></li>
                        <li id="tab7"><span class="tab-tit" onclick="tabClick('7')">><a href="#"><spring:message      code="AT.E.ATE01.text47" text="무통장"/></a></span></li>
                        <li id="tab8"><span class="tab-tit" onclick="tabClick('8')">><a href="#"><spring:message      code="AT.E.ATE01.text43" text="가수금"/></a></span></li>
                        <li id="tab9"><span class="tab-tit" onclick="tabClick('9')">><a href="#"><spring:message      code="AT.E.ATE01.text44" text="현금과다"/></a></span></li>
                        <li id="tab10"><span class="tab-tit" onclick="tabClick('10')">><a href="#"><spring:message      code="AT.E.ATE01.text186" text="카드취소"/></a></span></li>
                        <li id="tab11"><span class="tab-tit" onclick="tabClick('11')">><a href="#"><spring:message      code="AT.E.ATE01.text239" text="롯데멤버십포인트"/></a></span></li>
                        <li id="tab12"><span class="tab-tit" onclick="tabClick('12')">><a href="#"><spring:message      code="AT.E.ATE01.text187" text="전체시재"/></a></span></li>
                        <li id="tab13"><span class="tab-tit" onclick="tabClick('13')">><a href="#"><spring:message      code="AT.E.ATE01.text188" text="신용카드 업로드"/></a></span></li>
                        <li id="tab14"><span class="tab-tit" onclick="tabClick('14')">><a href="#"><spring:message      code="AT.E.ATE01.text261" text="핸드링충전"/></a></span></li>
                        <li id="tab15"><span class="tab-tit" onclick="tabClick('15')">><a href="#"><spring:message      code="AT.E.ATE01.text262" text="핸드링환불"/></a></span></li>
                        <li id="tab16"><span class="tab-tit" onclick="tabClick('16')">><a href="#"><spring:message      code="AT.E.ATE01.text265" text="본지점발생/대체"/></a></span></li>
                        <li id="tab17"><span class="tab-tit" onclick="tabClick('17')">><a href="#"><spring:message      code="AT.E.ATE01.text265" text="PG사 업로드"/></a></span></li>
                    </ul>
                </div>
			<!-- 내부 탭 종료 -->

			<!-- 현금/수표 시작 -->
			<div id="divCash" class="section">
				<!-- section 시작 -->
				<div class="section">
					<h3>
						<spring:message code="AT.E.ATE01.text189"  text="현금등록"/>
						<span class="show_hide_wrap"><img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn"/></span>
			        </h3>
					<!-- 타이틀이 없는 sub_button -->
					<div class="sub_btn_right_t btn_save">
						<span class="btn_table_in"><a href="#" id="btnCashSijaeReset"><spring:message code="AT.E.ATE01.text190" text="현금시재초기화" /></a></span>
					</div>
					<!-- table 영역 -->
					<div class="table-box grid_wrap">
						<form id="cashForm" >
							<input type="hidden" name="Seq">
							<table id="tblCash" class="tbl_Form" summary="등록정보"><caption>등록정보</caption><colgroup>	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="100px" />	<col width="*" /></colgroup><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text191" text="100,000원 권" /></label></th>	<td>		<input id="N100000Qty" name="N100000Qty" type="text" class="basic sbox" style="width: 40px;" value=""  jwork_mask="mask_money_pm" />		<input id="N100000" name="N100000" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td>
	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text192" text="5,000원 권" /></label></th>	<td>		<input id="N5000Qty" name="N5000Qty" type="text" class="basic sbox" style="width: 40px;" value=""  jwork_mask="mask_money_pm"/>		<input id="N5000" name="N5000" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td>
	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text193" text="100원 권" /></label></th>	<td>		<input id="N100Qty" name="N100Qty" type="text" class="basic sbox" style="width: 40px;" value=""  jwork_mask="mask_money_pm"/>		<input id="N100" name="N100" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td>
	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text194" text="1원 권" /></label></th>	<td>		<input id="N1Qty" name="N1Qty" type="text" class="basic sbox" style="width: 40px;" value=""  jwork_mask="mask_money_pm"/>		<input id="N1" name="N1" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text195" text="50,000원 권" /></label></th>	<td>		<input id="N50000Qty" name="N50000Qty" type="text" class="basic sbox" style="width: 40px;" value=""  jwork_mask="mask_money_pm"/>		<input id="N50000" name="N50000" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td>
	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text196" text="1,000원 권" /></label></th>	<td>		<input id="N1000Qty" name="N1000Qty" type="text" class="basic sbox" style="width: 40px;" alue=""  jwork_mask="mask_money_pm"/>		<input id="N1000" name="N1000" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td>
	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text197" text="50원 권" /></label></th>	<td colspan="3">		<input id="N50Qty" name="N50Qty" type="text" class="basic sbox" style="width: 40px;" value=""  jwork_mask="mask_money_pm"/>		<input id="N50" name="N50" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td>
</tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text198" text="10,000원 권" /></label></th>	<td>		<input id="N10000Qty" name="N10000Qty" type="text" class="basic sbox" style="width: 40px;" value=""  jwork_mask="mask_money_pm"/>		<input id="N10000" name="N10000" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td>
	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text199" text="500원 권" /></label></th>	<td>		<input id="N500Qty" name="N500Qty" type="text" class="basic sbox" style="width: 40px;" value=""  jwork_mask="mask_money_pm" />		<input id="N500" name="N500" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td>
	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text200" text="10원 권" /></label></th>	<td colspan="3">		<input id="N10Qty" name="N10Qty" type="text" class="basic sbox" style="width: 40px;" value=""  jwork_mask="mask_money_pm"/>		<input id="N10" name="N10" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td></tr>
							</table>
						</form>
					</div>
				</div>
				<!--  section 종료 -->

				<div class="section">
					<h3><spring:message code="AT.E.ATE01.text201"  text="수표등록"/><span class="show_hide_wrap">
			            <img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn"/>
			        </span></h3>
					<!-- 타이틀이 없는 sub_button -->
					<div class="sub_btn_right_t btn_save">
						<span class="btn_table_in"><a href="#" id="btnSupyoReset"><spring:message code="AT.E.ATE01.text202" text="수표시재초기화" /></a></span>
						<span class="btn_row_ins"><a href="#" class="btnRowInsert" value="supy"><spring:message code="AT.E.ATE01.text157" text="행추가" /></a></span>
						<span class="btn_row_del"><a href="#" class="btnRowDelete" value="supy"><spring:message code="AT.E.ATE01.text158" text="행삭제" /></a></span>
					</div>
					<div class="table-box grid_wrap">
						<div id="supyGrid" style="width: 100%; height: 136px;"></div>
					</div>
				</div>
				<!-- 내부 section 종료 -->

				<!-- section 시작 -->
				<div class="section">
					<!-- table 영역 -->
					<div class="table-box">
						<table class="tbl_Form" summary="상세정보">
							<caption>상세정보</caption>
							<colgroup><col width="110px" /><col width="*" /><col width="110px" /><col width="*" /><col width="110px" /><col width="*" /><col width="110px" /><col width="*" />
							</colgroup>
							<tr><td colspan="4"></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text161"  text="현금총액"/></label></th><td class="right">	<input id="CashAmt" name="CashAmt" type="text" class="basic value off" jwork_mask="mask_money_pm" value="" disabled="disabled" /></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text164"  text="수표총액"/></label></th><td class="right">	<input id="SupyAmt" name="SupyAmt" type="text" class="basic value off" jwork_mask="mask_money_pm" value="" disabled="disabled" /></td>
							</tr>
						</table>
					</div>
				</div>
				<!-- section 종료 -->
			</div>
			<!-- 현금/수표 종료 -->

			<!-- 카드 시작 -->
			<div id="divCard" class="section" style="display: none;">
				<div class="section section-two">
					<!-- left sect. -->
					<div class="section">
						<!-- 내부 section 시작 -->
						<form id="cardForm" >
							<div class="section"><h3>	<spring:message code="AT.E.ATE01.text204"  text="카드등록"/>	<span class="show_hide_wrap">
					            		<img id="cardWp" src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn" name="divCard"/>
					        		</span>
						        </h3>
<div class="table-box">		<table id="tblCard" class="tbl_Form" summary="등록정보">			<caption>등록정보</caption>			<colgroup>				<col width="110px" />				<col width="*" />				<col width="100px" />				<col width="*" />			</colgroup>			<tr>				<th scope="row">					<span class="color_im_bl">*</span>					<label for="">						<spring:message code="AT.E.ATE01.text118"  text="결제금액"/>					</label>				</th>				<td>					<input id="CardBUKRS" name="BUKRS" type="hidden" value="${sessionScope.SessionVO.BUKRS}">					<input id="CardGSBER" name="GSBER" type="hidden">					<input id="CardPrefix" name="CardPrefix" type="hidden" value="">					<input id="CardCustMinorCd" name="CardCustMinorCd" type="hidden" value="">					<input id="CardCustCd" name="CardCustCd" type="hidden" alt='<spring:message code="AT.E.ATE01.text205"  text="카드회사코드"/>' value="">					<input id="CardCustBizNo" name="CardCustBizNo" type="hidden" value="">					<input id="MembNo" name="MembNo" type="hidden" value="">					<input id="FoYN" name="FoYN" type="hidden" value="">					<input id="CreditYN" name="CreditYN" type="hidden" value="">					<input id="JoinYN" name="JoinYN" type="hidden" value="">					<input id="PwYN" name="PwYN" type="hidden" value="">					<input id="KeyinTypeCd" name="KeyinTypeCd" type="hidden" value="">					<input id="DealPoint" name="DealPoint" type="hidden" value="">					<input id="DealAmt"	alt='<spring:message code="AT.E.ATE01.text118"  text="결제금액"/>' name="DealAmt" type="text" class="basic value" value="" jwork_mask="mask_money_pm" />					<span class="btn_table_in">
					 									<a href="#" id="btnCallCardData">
					 										<spring:message code="AT.E.ATE01.text209" text="카드정보호출" />
					 									</a>					</span>				</td>				<th scope="row">					<label for="">						<spring:message code="AT.E.ATE01.text100"  text="은련카드여부"/>					</label>				</th>				<td>					<input id="eunYn" alt='<spring:message code="AT.E.ATE01.text100"  text="은련카드여부"/>' name="eunYn" type="checkbox" class="check" value="1" />				</td>			</tr>			<tr>				<th scope="row">					<span class="color_im_bl">*</span>					<label for="">						<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>					</label>				</th>				<td>					<input id="CardNo" alt='<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>' name="CardNo" type="text" class="basic name_s01p" value=""/>					<input id="hhdBixCardInfo" name="hhdBixCardInfo" type="hidden">					<input id="EtcValue" name="EtcValue" type="hidden">					<span class="btn_duty" style="display:none"><a id="btnBixMsrRead"></a></span>				</td>				<th scope="row">					<span class="color_im_bl">*</span>					<label for="">						<spring:message code="AT.E.ATE01.text90"  text="카드명"/>					</label>				</th>				<td>					<input id="CardNm" alt='<spring:message code="AT.E.ATE01.text90"  text="카드명"/>' name="CardNm" type="text" class="basic name" value="" maxlength="50"/>				</td>			</tr>			<tr>				<th scope="row">					<span class="color_im_bl">*</span>					<label for="">						<spring:message code="AT.E.ATE01.text92"  text="유효기간"/>					</label>				</th>				<td>					<input id="ValidTerm" alt='<spring:message code="AT.E.ATE01.text92"  text="유효기간"/>' name="ValidTerm" type="text" class="basic value" value="" jwork_mask="mask_num4" maxlength="4"/> (YYMM)
				</td>				<th scope="row">					<label for="">						<spring:message code="AT.E.ATE01.text21" text="비밀번호"/>					</label>				</th>				<td>					<input id="PwCard" name="PwCard" alt='<spring:message code="AT.E.ATE01.text21" text="비밀번호"/>' type="password" class="basic pass" value="" maxlength="6"/>				</td>			</tr>			<tr>				<th scope="row">					<span class="color_im_bl">*</span>					<label for="">						<spring:message code="AT.E.ATE01.text94"  text="할부기간"/>					</label>				</th>				<td>					<input id="DvdTerm" alt='<spring:message code="AT.E.ATE01.text94"  text="할부기간"/>' name="DvdTerm" type="text" class="basic num_s" value="" jwork_mask="mask_num2"/>					<spring:message code="AT.E.ATE01.text206" text="(개월)" />				</td>				<th scope="row">					<label for="">						<spring:message code="AT.E.ATE01.text97"  text="승인번호"/>					</label>				</th>				<td>					<input id="ApprNo" name="ApprNo" type="text" class="basic num" value="" maxlength="12" alt='<spring:message code="AT.E.ATE01.text97"  text="승인번호" />'/>				</td>			</tr>		</table></div><div class="space15"></div><!-- 좌우 위치 맞춰주기 위해 -->
							</div>
						</form>
						<!-- 내부 section 종료 -->
					</div>

					<!-- right sect. -->
					<div class="section">
						<!-- 내부 section 시작 -->
						<div class="section">
							<h3>카드내역<span class="show_hide_wrap">
					            	<img id="cardWp1" src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn" name="divCard"/>
					        	</span>
					        </h3>
							<!-- 타이틀이 없는 sub_button -->
							<div class="sub_btn_right_t btn_save"><span class="btn_table_in">	<a href="#" id="btnCardReset">		<spring:message code="AT.E.ATE01.text207" text="화면클리어" />	</a></span><span class="btn_table_in">	<a href="#" id="btnEasyCheck">		<spring:message	code="AT.E.ATE01.text208" text="EasyCheck" />	</a></span><!-- 20180723 kjh 여전법 시행으로 카드승인 일시 막음--><span class="btn_table_in">
 									<a href="#" id="btnAutoApproval">
 										<spring:message code="AT.E.ATE01.text209" text="자동승인" />
 									</a></span><span class="btn_table_in">	<a href="#" id="btnManualApproval">		<spring:message code="AT.E.ATE01.text209" text="수동승인" />	</a></span><!-- 2016.03.07 Hong 휴대폰 승인 추가 --><span class="btn_table_in">	<a href="#" id="btnHPApproval">		<spring:message code="AT.E.ATE01.text209" text="휴대폰승인" />	</a></span>
							</div>
							<div class="table-box grid_wrap grid_height_s"><div id="cardGrid" style="width: 100%; height: 100%;"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div id="divGift" class="section" style="display: none;">
				<div class="section">
					<h3>
						<spring:message code="AT.E.ATE01.text29"  text="상품권"/>
						<span class="show_hide_wrap"><img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn"/></span>
					</h3>
					<div class="sub_btn_right_t btn_save">
						<span class="btn_table_in">
							<a href="#" id="btnGiftReset"><spring:message	code="AT.E.ATE01.text210" text="상품권시재초기화" />
							</a>
						</span>
						<span class="btn_row_ins">
							<a href="#" class="btnRowInsert" value="gift"><spring:message code="AT.E.ATE01.text157" text="행추가" />
							</a>
						</span>
						<span class="btn_row_del">
							<a href="#"	class="btnRowDelete" value="gift"><spring:message code="AT.E.ATE01.text158" text="행삭제" />
							</a>
						</span>
					</div>
					<div class="table-box grid_wrap grid_height_s">
						<div id="giftGrid" style="width: 100%; height: 100%;"></div>
					</div>
					<div class="section">
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup>	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" /></colgroup><tr>	<td colspan="6"></td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text211" text="상품권총금액" /></label></th>	<td class="right">		<input id="GiftAmt" name="GiftAmt" type="text" class="basic value off" jwork_mask="mask_money_pm" value="0" disabled="disabled" />	</td></tr>
							</table>
						</div>
					</div>
				</div>
			</div>

			<div id="divFore" class="section" style="display: none;">
				<div class="section">
					<h3>
		        		<spring:message code="AT.E.ATE01.text30"  text="외화"/>
						<span class="show_hide_wrap"><img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn"/></span>
					</h3>
					<div class="sub_btn_right_t btn_save">
						<span class="btn_table_in">
							<a href="#" id="btnForeReset"><spring:message code="AT.E.ATE01.text212" text="외화시재초기화" />
							</a>
						</span>
						<span class="btn_row_ins">
							<a href="#" class="btnRowInsert" value="fore"><spring:message code="AT.E.ATE01.text157" text="행추가" />
							</a>
						</span>
						<span class="btn_row_del">
							<a href="#" class="btnRowDelete" value="fore"><spring:message code="AT.E.ATE01.text158" text="행삭제" />
							</a>
						</span>
					</div>
					<div class="table-box grid_wrap grid_height_s">
						<div id="foreGrid" style="width: 100%; height: 100%;"></div>
					</div>
					<div class="section">
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup>	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" /></colgroup><tr>	<td colspan="6"></td>	<th scope="row">		<label for="">			<spring:message	code="AT.E.ATE01.text111" text="외화매출금" />		</label>	</th>	<td class="right">		<input id="ForeAmt" name="ForeAmt" type="text" class="basic value off" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td></tr>
							</table>
						</div>
					</div>
				</div>
			</div>
			<div id="divCred" class="section" style="display: none;">
					<h3>
						<spring:message code="AT.E.ATE01.text30"  text="외상"/>
					</h3>
					<div class="table-box">
						<form id="credForm">
							<input type="hidden" name="Seq">
							<input id="CredTotalAmt" name="ValAmt10" type="hidden" alt='<spring:message code="AT.E.ATE01.text74" text="총금액"/>'>
							<input id="CredCustCd" name="CredCustCd" type="hidden">
							<input id="CredCustNm" name="CredCustNm" type="hidden">
							<table class="tbl_Form" summary="등록정보"><caption>등록정보</caption><colgroup>	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" /></colgroup><tr>	<th scope="row">		<label for="">			<span class="color_im_bl">*			</span>			<spring:message	code="AT.E.ATE01.text213" text="외상종류" />		</label>	</th>	<td>		<input id="CreditTypeCd" name="CreditTypeCd" type="text" class="basic code help_pr txtPop" value=""/>		<input id="CreditTypeNm" name="CreditTypeNm" type="text" class="basic name_s01 help_pr txtPop" value=""/>		<a id="btnCreditTypePopUp" href="#"><img src="${ctx}/resources/theme/${theme}/image/contents/ico_sch.gif" class="img_ic" align="absbottom" alt="검색제어" /></a>	</td>	<th scope="row">		<label for="">			<span class="color_im_bl">*			</span><spring:message code="AT.E.ATE01.text214" text="거래처" />		</label>	</th>	<td>		<input id="SjCustCd" name="SjCustCd" type="text" class="basic code help_pr" value="" />		<input id="SjCustNm" name="SjCustNm" type="text" class="basic name_s01 help_pr" value="" maxlength="50" />		<input id="SjAddr" name="SjAddr" type="hidden">		<a href="#" id="btnSijaCustPop"> <img src="${ctx}/resources/theme/${theme}/image/contents/ico_sch.gif" class="img_ic" align="absbottom" alt='검색제어' /> </a>	</td>	<th scope="row"><label for=""><spring:message	code="AT.E.ATE01.text215" text="사업자번호" /></label></th>	<td>		<input id="LawRegNo" name="LawRegNo" type="text" class="basic num" jwork_mask="mask_bn" value="" />	</td></tr><tr>	<th scope="row"><label for=""><spring:message	code="AT.E.ATE01.text216" text="고객명" /></label></th>	<td>		<input id="CustomNm" name="CustomNm" type="text" class="basic name" value="" maxlength="50" />	</td>	<th scope="row"><label for=""><spring:message	code="AT.E.ATE01.text217" text="생년월일" /></label></th>	<td>		<input id="ResId" name="ResId" type="text" class="basic num" jwork_mask="mask_ssn1" value="" />	</td>	<th scope="row"><label for=""><spring:message	code="AT.E.ATE01.text218" text="연락처" /></label></th>	<td>		<input id="Tel01" name="Tel01" type="text" class="basic num" value="" />	</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text219" text="상환완료일자" /></label></th>	<td>		<input id="RtnEndDate" name="RtnEndDate" type="text" class="basic date vt_date_last" value="" jwork_mask="mask_date"/>	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text35" text="외상매출금"/></label></th>	<td>		<input id="CreditAmt" name="CreditAmt" type="text" class="basic value" value="" jwork_mask="mask_money_pm" />	</td>	<th scope="row"><spring:message code="AT.E.ATE01.text600" text="소셜PIN번호"/></th>	<td>		<input id="CouponNo" name="CouponNo" type="text" class="basic num off" value="" size="19" maxlength="19" readonly="readonly"/>	</td>	<%--                                     <th scope="row"><label for=""><spring:message code="AT.C.ATC05.text108" text="담보설정잔액"/></label></th> --%></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text219" text="판매일자" /></label></th>	<td>		<input id="CredSellDate" name="CredSellDate" type="text" class="basic date vt_date_last" value="" jwork_mask="mask_date"/>	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text35" text="POS번호"/></label></th>	<td>		<input id="CredPosId" name="CredPosId" type="text" class="basic num off" value="" jwork_mask="mask_num4" readonly="readonly"/>	</td>	<th scope="row"><spring:message code="AT.E.ATE01.text600" text="전표번호"/></th>	<td>		<input id="CredSlipId" name="CredSlipId" type="text" class="basic num off" value="" jwork_mask="mask_num4" readonly="readonly"/>	</td>	<%--                                     <th scope="row"><label for=""><spring:message code="AT.C.ATC05.text108" text="담보설정잔액"/></label></th> --%></tr>
							</table>
						</form>
						<spring:message code="AT.E.ATE01.text220"  text="외상매출 내역만 가능합니다. 외상대체는 "/><span class="btn_basic" onclick="moveATF01();">
						<a href="#"><spring:message code="AT.E.ATE01.text221"  text="외상매출대체등록[ATF01]"/></a>
						</span><spring:message code="AT.E.ATE01.text222"  text="으로 이동하세요."/>
					</div>
			</div>

			<div id="divPPaid" class="section" style="display: none;">
				<form id="pPaidForm" >
					<input type="hidden" name="Seq">
					<input type="hidden" name="VATSeq">
					<input id="PPaidSttlMthCd" name="SttlMthCd" type="hidden">
					<input id="PPaidBizAddr" name="PPaidBizAddr" type="hidden">
					<div class="section">
						<h3><spring:message code="AT.E.ATE01.text168"  text="선수금발생"/></h3>
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup>	<col width="120px" />	<col width="*" />	<col width="120px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" /></colgroup><tr>	<th scope="row"><span class="color_im_bl">*</span><label for="">행사형식</label></th>	<td><span id="spn_PPaidTypeCd"></span></td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text223"  text="거래처불출조회"/></label></th>	<td>		<input id="CUSTSELLNO" name="CUSTSELLNO" name="Input" type="text" class="PPaidType1 basic name" value="" maxlength="50" readonly="readonly" />
<!-- 										<input id="CUSTSELLNO" name="CUSTSELLNO" type="text" class="basic num" value="" maxlength="15" readonly="readonly" />  -->		<a href="#"	id="SearchExptOutOrder" class="PPaidType1Btn"> <img src="${ctx}/resources/theme/${theme}/image/contents/ico_sch.gif" class="img_ic" align="absbottom" alt='검색제어' /></a>	</td>	<th scope="row">		<span class="color_im_bl">*</span>		<label for=""><spring:message code="AT.E.ATE01.text214" text="거래처" /></label>	</th>	<td colspan="3">		<input id="PPaidCustCd" name="PPaidCustCd" type="text" class="PPaidType2 basic code help_pr" value="" />		<input id="PPaidCustNm" name="PPaidCustNm" type="text" class="PPaidType2 basic name help_pr" value="" />		<a id="btnPPaidCustPop" href="#" class="PPaidType2Btn"> <img src="${ctx}/resources/theme/${theme}/image/contents/ico_sch.gif" class="img_ic" align="absbottom" alt='검색제어' /></a>	</td></tr><tr>	<th scope="row"><label for=""><spring:message	code="AT.E.ATE01.text215" text="사업자번호" /></label></th>	<td>		<input id="PPaidBizNo" name="PPaidBizNo" type="text" class="basic num off" value="" readonly="readonly" />	</td>	<th scope="row"><label for=""><spring:message	code="AT.E.ATE01.text216" text="고객명" /></label></th>	<td>		<input id="EMPNM" name="EMPNM" type="text" class="basic name" value="" maxlength="50" />	</td>
	<th scope="row"><label for=""><spring:message	code="AT.E.ATE01.text217" text="생년월일" /></label></th>	<td>		<input id="BirthD" name="BirthD" type="text" class="basic num" value="" jwork_mask="mask_ssn1"/>	</td>	<th scope="row"><label for=""><spring:message	code="AT.E.ATE01.text218" text="연락처" /></label></th>	<td>		<input id="GrpTel" name="GrpTel" type="text" class="basic num" value="" />	</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text57" text="행사명"/></label></th>	<td>		<input id="EVENTNM" name="EVENTNM" type="text" class="basic name" value="" />	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text224"  text="행사일자"/></label></th>	<td>		<input id="EventStartDate" name="EventStartDate" type="text" class="basic date vt_date_last" jwork_mask="mask_date" value="" /> ~ <input id="EventEndDate" name="EventEndDate" type="text"  class="basic date  vt_date_last"  jwork_mask="mask_date" value="" />	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text225"  text="행사종료여부"/></label></th>	<td colspan="3">		<input name="EventEndYn" type="checkbox" class="check" value="1"/>	</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text38" text="선수금" /></label></th>	<td>		<input id="PPaidAmt" name="PPaidAmt" type="text" class="PPaidType2 basic value" value="" jwork_mask="mask_money_pm" />	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text40"  text="티켓선수VAT"/></label></th>	<td colspan="5">		<input id="PPaidAmtVAT" name="PPaidAmtVAT" type="text" class="basic value off" jwork_mask="mask_money_pm" value="" readonly="readonly" />	</td></tr>
							</table>
						</div>
					</div>
				</form>
		        <div class="section">
		            <h3><spring:message code="AT.C.ATE01.title7" text="선수금대체"/></h3>
		            <div class="sub_btn_right">
		                <jcode:select id="addRepPaidRowCount" name="addRepPaidRowCount" codeGrpId="GADDROW" isEmptySelect="false"/>
		                <span class="btn_row_ins"><a href="#" class="btnRowInsert"  id="btnRowInsert" value="reppaid"><spring:message code="AT.C.ATE01.button2" text="행추가"/></a></span>
		                <span class="btn_row_del"><a href="#" class="btnRowDelete"  id="btnRowDelete" value="reppaid"><spring:message code="AT.C.ATE01.button3" text="행삭제"/></a></span>
		            </div>
		            <div class="table-box grid_wrap grid_height_l"><!-- grid가 들어갈경우 grid_wrap추가 -->
		                <div id="repPaidGrid" style="width:100%; height:80%;"></div>
		            </div>
		        </div>
                   <div class="section">
                       <div class="table-box">
                           <table class="tbl_Form" summary="상세정보">
                               <caption>상세정보</caption>
                               <colgroup><col width="110px"/><col width="*"/><col width="110px"/><col width="*"/><col width="110px"/><col width="*"/><col width="110px"/><col width="*"/></colgroup>
                               <tr>
                                   <td colspan="6"></td>
                                   <th scope="row"><label for=""><spring:message code="AT.C.ATE01.text30" text="선수금대체총액"/></label></th>
                                   <td class="right"><input id="RepPaidAmt" name="RepPaidAmt" type="text" class="basic value off" jwork_mask="mask_money" value="" disabled="disabled"/></td>
                               </tr>
                           </table>
                       </div>
                   </div>
			</div>
			<!-- 선수금 종료-->
			<!-- 무통장 -->
			<div id="divBank" class="section"  style="display: none;">
				<div class="section">
					<h3><spring:message code="AT.E.ATE01.text47" text="무통장"/></h3>
					<div class="sub_btn_right_t btn_save">
						<span class="btn_table_in"><a href="#" id="btnBankReset"><spring:message code="AT.E.ATE01.text203"  text="무통장초기화"/></a></span>
						<span class="btn_row_ins"><a href="#" class="btnRowInsert" value="bank"><spring:message code="AT.E.ATE01.text157" text="행추가" /></a></span>
						<span class="btn_row_del"><a href="#" class="btnRowDelete" value="bank"><spring:message code="AT.E.ATE01.text158" text="행삭제" /></a></span>
					</div>
					<div id="BankGrid" class="table-box grid_wrap grid_height_s"><!-- grid가 들어갈경우 grid_wrap추가 -->
					</div>
				</div>
			</div>
			<!-- 무통장 종료 -->
			<!-- 가수금 -->
			<div id="divSRecp" class="section" style="display: none;">
				<form id="sRecpForm">
					<input type="hidden" name="Seq">
					<div class="section">
						<h3><spring:message code="AT.E.ATE01.text43"  text="가수금"/></h3>
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup><col width="120px" /><col width="*" /><col width="120px" /><col width="*" /></colgroup><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text227"  text="가수금발생"/></label></th>	<td colspan="7">		<input id="SRecpAmt" name="SRecpAmt" type="text" class="basic value" value="" jwork_mask ="mask_money_pm" />
 										<input id="SRecpAmtView" name="SRecpAmtView" type="text" class="basic value off" style="width: 100px;" jwork_mask="mask_money_pm" value="" disabled="disabled" />	</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text150"  text="비고"/></label></th>	<td colspan="7">		<textarea id="SRecpEtc" name="SRecpEtc" rows="3" class="size-98p" maxlength="50"></textarea>	</td></tr>
							</table>
						</div>
					</div>
				</form>
				</div>
			<!-- 가수금 종료 -->

			<!-- 현금과부족 (부족 주석) -->
			<!-- 현금과다-->
				<div id="divCashOS" class="section" style="display: none;">
				<form id="cashOSForm">
					<input type="hidden" name="Seq1">
					<input type="hidden" name="Seq2">
					<input type="hidden" name="Seq3">
					<div class="section">
						<h3>
							<spring:message code="AT.E.ATE01.text44"  text="현금과다"/>
						</h3>
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup>	<col width="120px" />	<col width="*" />	<col width="120px" />	<col width="*" /></colgroup><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text163"  text="현금과다금액"/></label></th>	<td colspan="2">		<input id="CashOSAmt2" name="CashOSAmt2" type="text" class="cashOSAmt basic value" value="" jwork_mask="mask_money_pm" />	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text45"  text="잡이익"/></label></th>	<td colspan="2">
				                        <span id="EtcValueCd"></span>		<input id="CashOSAmt1" name="CashOSAmt1" type="text" class="cashOSAmt basic value" value="" jwork_mask="mask_money_pm"/>		<a href="#" id="btnChargePop" style="display: none">			<img src="${ctx}/resources/theme/${theme}/image/contents/ico_sch.gif" class="img_ic" align="absbottom" alt='검색제어' />		</a>	</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text150"  text="비고"/></label></th>	<td colspan="5">		<textarea name="CashOSEtc" rows="3" class="size-98p" maxlength="50"></textarea>	</td></tr></table>
						</div>
					</div>
					<!-- section 종료 -->
				</form>
				</div>
			<!-- 현금과다 종료 -->
			<!-- 현금과부족( 부족 주석) 종료 -->

			<!-- 카드취소 -->
			<div id="divCanc" class="section" style="display: none;">
				<!-- section 시작 -->
				<div class="section">
					<h3>
						<spring:message	code="AT.E.ATE01.text186" text="카드취소" />
						<span class="show_hide_wrap">
					    	<img id="canCardWp" src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn"/>
						</span>
					</h3>
					<!-- 타이틀이 없는 sub_button -->
					<div id="btnsCanc" class="sub_btn_right_t">
						<span class="btn_duty"><a href="#" id="btnCardCancel"><spring:message code="승인취소" text="승인취소" />
							</a>
						</span>
						<span class="btn_duty">
							<a href="#" id="btnEasyCancel"><spring:message	code="AT.E.ATE01.text229" text="EasyCheck취소" />
							</a>
						</span>
						<span class="btn_duty">
							<a href="#" id="btnManualCancel"><spring:message code="AT.E.ATE01.text230" text="강제취소" />
							</a>
						</span>
					</div>
					<div class="table-box grid_wrap grid_height_s">
						<div id="cancGrid" style="width: 100%; height: 100%;"></div>
					</div>
				</div>
				<!-- section 종료 -->

				<!-- section 시작 -->
				<div class="section">
					<!-- table 영역 -->
					<div class="table-box">
						<table class="tbl_Form" summary="상세정보">
							<caption>상세정보</caption>
							<colgroup><col width="*" /><col width="110px" /><col width="100px" />
							</colgroup>
							<tr>	<td>
<!-- 										<input id="CardCancelLotte" name="CardCancelLotte" type="checkbox" value="1" class="check" /> -->	</td><th scope="row">	<label for=""><spring:message code="AT.E.ATE01.text167"  text="카드결제금총액"/></label></th><td class="right">	<input id="TotCancelAmt" name="TotCancelAmt" type="text" class="basic value off" jwork_mask="mask_money_pm" value="" disabled="disabled" /></td>
							</tr>
						</table>
					</div>
				</div>
				<!-- section 종료 -->
			</div>
			<!-- 카드취소 종료 -->
			<!-- 롯데멤버십포인트 시작 -->
			<div id="divLotteMemPoint" class="section" style="display: none;">
				<form id="memPointFormUse">
					<!-- 회원인증 결과값 시작 -->
					<input id="tr_receive_Mem01" name="tr_receive_Mem01" type="hidden"/>   <!-- 고객식별구분코드              -->
					<input id="tr_receive_Mem02" name="tr_receive_Mem02" type="hidden"/>   <!-- 카드번호	                  -->
					<input id="tr_receive_Mem03" name="tr_receive_Mem03" type="hidden"/>   <!-- 고객식별값                    -->
					<input id="tr_receive_Mem04" name="tr_receive_Mem04" type="hidden"/>   <!-- 제휴가맹점번호                -->
					<input id="tr_receive_Mem05" name="tr_receive_Mem05" type="hidden"/>   <!-- 점포번호	                  -->
					<input id="tr_receive_Mem06" name="tr_receive_Mem06" type="hidden"/>   <!-- POS번호	                  	  -->
					<input id="tr_receive_Mem07" name="tr_receive_Mem07" type="hidden"/>   <!-- 가용포인트                    -->
					<input id="tr_receive_Mem08" name="tr_receive_Mem08" type="hidden"/>   <!-- 잔여포인트부호                -->
					<input id="tr_receive_Mem09" name="tr_receive_Mem09" type="hidden"/>   <!-- 잔여포인트                    -->
					<input id="tr_receive_Mem10" name="tr_receive_Mem10" type="hidden"/>   <!-- 제휴사잔여포인트부호 	  	  -->
					<input id="tr_receive_Mem11" name="tr_receive_Mem11" type="hidden"/>   <!-- 제휴사잔여포인트              -->
					<input id="tr_receive_Mem12" name="tr_receive_Mem12" type="hidden"/>   <!-- 포인트적립가능여부 	          -->
					<input id="tr_receive_Mem13" name="tr_receive_Mem13" type="hidden"/>   <!-- 포인트사용가능여부 	          -->
					<input id="tr_receive_Mem14" name="tr_receive_Mem14" type="hidden"/>   <!-- 메시지1	                  	  -->
					<input id="tr_receive_Mem15" name="tr_receive_Mem15" type="hidden"/>   <!-- 메시지2	                  	  -->
					<input id="tr_receive_Mem16" name="tr_receive_Mem16" type="hidden"/>   <!-- 제휴카드코드                  -->
					<input id="tr_receive_Mem17" name="tr_receive_Mem17" type="hidden"/>   <!-- 멤버스카드상품코드	          -->
					<input id="tr_receive_Mem18" name="tr_receive_Mem18" type="hidden"/>   <!-- 보유카드구분                  -->
					<input id="tr_receive_Mem19" name="tr_receive_Mem19" type="hidden"/>   <!-- 선불카드 기명화 여부 	  	  -->
					<input id="tr_receive_Mem20" name="tr_receive_Mem20" type="hidden"/>   <!-- 동전적립이용이력              -->
					<input id="tr_receive_Mem21" name="tr_receive_Mem21" type="hidden"/>   <!-- 동전적립잔여포인트 	          -->
					<input id="tr_receive_Mem22" name="tr_receive_Mem22" type="hidden"/>   <!-- 포인트합산 신청고객 여부 	  -->
					<input id="tr_receive_Mem23" name="tr_receive_Mem23" type="hidden"/>   <!-- 동전적립자동신청여부 	  	  -->
					<input id="tr_receive_Mem24" name="tr_receive_Mem24" type="hidden"/>   <!-- FILLER	                  	  -->
					<input id="tr_receive_Mem25" name="tr_receive_Mem25" type="hidden"/>   <!-- 제휴사 회원 등급              -->
					<input id="tr_receive_Mem26" name="tr_receive_Mem26" type="hidden"/>   <!-- 멤버십 회원 등급              -->
					<input id="tr_receive_Mem27" name="tr_receive_Mem27" type="hidden"/>   <!-- 직원구분	                  -->
					<input id="tr_receive_Mem28" name="tr_receive_Mem28" type="hidden"/>   <!-- 제휴사법인구분                -->
					<input id="tr_receive_Mem29" name="tr_receive_Mem29" type="hidden"/>   <!-- 첫거래포인트 기 지급여부 	  -->
					<input id="tr_receive_Mem30" name="tr_receive_Mem30" type="hidden"/>   <!-- 생일포인트 기 지급여부 	  	  -->
					<input id="tr_receive_Mem31" name="tr_receive_Mem31" type="hidden"/>   <!-- 법정생년월일                  -->
					<input id="tr_receive_Mem32" name="tr_receive_Mem32" type="hidden"/>   <!-- 결혼기념일포인트 기 지급여부  -->
					<input id="tr_receive_Mem33" name="tr_receive_Mem33" type="hidden"/>   <!-- 결혼기념일	                  -->
					<input id="tr_receive_Mem34" name="tr_receive_Mem34" type="hidden"/>   <!-- 현금영수증자동발행여부 	  	  -->
					<input id="tr_receive_Mem35" name="tr_receive_Mem35" type="hidden"/>   <!-- 고객번호	                  -->
					<input id="tr_receive_Mem36" name="tr_receive_Mem36" type="hidden"/>   <!-- 회원이름	                  -->
					<input id="tr_receive_Mem37" name="tr_receive_Mem37" type="hidden"/>   <!-- 전화번호	                  -->
					<input id="tr_receive_Mem38" name="tr_receive_Mem38" type="hidden"/>   <!-- 핸드폰번호                    -->
					<input id="tr_receive_Mem39" name="tr_receive_Mem39" type="hidden"/>   <!-- 주소1	                  	  -->
					<input id="tr_receive_Mem40" name="tr_receive_Mem40" type="hidden"/>   <!-- 주소2	                      -->
					<input id="tr_receive_Mem41" name="tr_receive_Mem41" type="hidden"/>   <!-- 제휴사최근거래일자 	          -->
					<input id="tr_receive_Mem42" name="tr_receive_Mem42" type="hidden"/>   <!-- 주거래점	                  -->
					<input id="tr_receive_Mem43" name="tr_receive_Mem43" type="hidden"/>   <!-- 참여사영역			  		  -->
					<!-- 회원인증 결과값 종료 -->
					<!-- 포인트 사용승인 응답 시작 -->
					<input id="SlipIdPoint" name="SlipIdPoint" type="hidden"/>	 <!--고객 식별 구분코드			 -->
					<input id="tr_receive_Use01" name="tr_receive_Use01" type="hidden"/>	 <!--고객 식별 구분코드			 -->
					<input id="tr_receive_Use02" name="tr_receive_Use02" type="hidden"/>	 <!--카드번호	 	 	 	 -->
					<input id="tr_receive_Use03" name="tr_receive_Use03" type="hidden"/>	 <!--FILLER	 	 	 	 -->
					<input id="tr_receive_Use04" name="tr_receive_Use04" type="hidden"/>	 <!--제휴가맹점번호	 	 	 -->
					<input id="tr_receive_Use05" name="tr_receive_Use05" type="hidden"/>	 <!--점포번호	 	 	 	 -->
					<input id="tr_receive_Use06" name="tr_receive_Use06" type="hidden"/>	 <!--POS번호	 	 	 	 -->
					<input id="tr_receive_Use07" name="tr_receive_Use07" type="hidden"/>	 <!--제휴사승인번호	 	 	 -->
					<input id="tr_receive_Use08" name="tr_receive_Use08" type="hidden"/>	 <!--거래일자	 	 	 	 -->
					<input id="tr_receive_Use09" name="tr_receive_Use09" type="hidden"/>	 <!--거래시간	 	 	 	 -->
					<input id="tr_receive_Use10" name="tr_receive_Use10" type="hidden"/>	 <!--거래구분	 	 	 	 -->
					<input id="tr_receive_Use11" name="tr_receive_Use11" type="hidden"/>	 <!--거래사유	 	 	 	 -->
					<input id="tr_receive_Use12" name="tr_receive_Use12" type="hidden"/>	 <!--승인번호	 	 	 	 -->
					<input id="tr_receive_Use13" name="tr_receive_Use13" type="hidden"/>	 <!--승인일자	 	 	 	 -->
					<input id="tr_receive_Use14" name="tr_receive_Use14" type="hidden"/>	 <!--승인시간	 	 	 	 -->
					<input id="tr_receive_Use15" name="tr_receive_Use15" type="hidden"/>	 <!--금회사용/취소포인트		 -->
					<input id="tr_receive_Use16" name="tr_receive_Use16" type="hidden"/>	 <!--봉투구매포인트	 	 	 -->
					<input id="tr_receive_Use17" name="tr_receive_Use17" type="hidden"/>	 <!--첫거래포인트 발생여부	 	 -->
					<input id="tr_receive_Use18" name="tr_receive_Use18" type="hidden"/>	 <!--첫거래포인트	 	 	 -->
					<input id="tr_receive_Use19" name="tr_receive_Use19" type="hidden"/>	 <!--생일포인트발생여부	 	 	 -->
					<input id="tr_receive_Use20" name="tr_receive_Use20" type="hidden"/>	 <!--생일포인트	 	 	 	 -->
					<input id="tr_receive_Use21" name="tr_receive_Use21" type="hidden"/>	 <!--결혼기념일 포인트발생여부	 	 -->
					<input id="tr_receive_Use22" name="tr_receive_Use22" type="hidden"/>	 <!--결혼기념일포인트	 	 	 -->
					<input id="tr_receive_Use23" name="tr_receive_Use23" type="hidden"/>	 <!--이벤트포인트	 	 	 -->
					<input id="tr_receive_Use24" name="tr_receive_Use24" type="hidden"/>	 <!--운영사이벤트포인트	 	 	 -->
					<input id="tr_receive_Use25" name="tr_receive_Use25" type="hidden"/>	 <!--가용포인트	 	 	 	 -->
					<input id="tr_receive_Use26" name="tr_receive_Use26" type="hidden"/>	 <!--잔여포인트부호	 	 	 -->
					<input id="tr_receive_Use27" name="tr_receive_Use27" type="hidden"/>	 <!--잔여포인트	 	 	 	 -->
					<input id="tr_receive_Use28" name="tr_receive_Use28" type="hidden"/>	 <!--제휴사잔여포인트부호		 -->
					<input id="tr_receive_Use29" name="tr_receive_Use29" type="hidden"/>	 <!--제휴사잔여포인트	 		 -->
					<input id="tr_receive_Use30" name="tr_receive_Use30" type="hidden"/>	 <!--메시지1	 	 	 	 -->
					<input id="tr_receive_Use31" name="tr_receive_Use31" type="hidden"/>	 <!--메시지2	 	 	 	 -->
					<input id="tr_receive_Use32" name="tr_receive_Use32" type="hidden"/>	 <!--매출금액	 	 	 	 -->
					<input id="tr_receive_Use33" name="tr_receive_Use33" type="hidden"/>	 <!--동전적립이용이력	 	 	 -->
					<input id="tr_receive_Use34" name="tr_receive_Use34" type="hidden"/>	 <!--동전적립잔여포인트	 	 	 -->
					<input id="tr_receive_Use35" name="tr_receive_Use35" type="hidden"/>	 <!--법인 사용제한 등록여부	 	 -->
					<input id="tr_receive_Use36" name="tr_receive_Use36" type="hidden"/>	 <!--포인트 대상금액	 	 	 -->
					<input id="tr_receive_Use37" name="tr_receive_Use37" type="hidden"/>	 <!--적립/적립취소포인트	 	 -->
					<input id="tr_receive_Use38" name="tr_receive_Use38" type="hidden"/>	 <!--현장할인금액	 	 	 -->
					<input id="tr_receive_Use39" name="tr_receive_Use39" type="hidden"/>	 <!--차감할인후 결제금액	 	 -->
					<input id="tr_receive_Use40" name="tr_receive_Use40" type="hidden"/>	 <!--FILLER	 	 	 	 -->
					<input id="tr_receive_Use41" name="tr_receive_Use41" type="hidden"/>	 <!--제휴사 회원 등급	 	 	 -->
					<input id="tr_receive_Use42" name="tr_receive_Use42" type="hidden"/>	 <!--멤버십 회원 등급	 	 	 -->
					<input id="tr_receive_Use43" name="tr_receive_Use43" type="hidden"/>	 <!--직원구분	 	 	 	 -->
					<input id="tr_receive_Use44" name="tr_receive_Use44" type="hidden"/>	 <!--제휴사법인구분	 	 	 -->
					<input id="tr_receive_Use45" name="tr_receive_Use45" type="hidden"/>	 <!--첫거래포인트 기지급여부	 	 -->
					<input id="tr_receive_Use46" name="tr_receive_Use46" type="hidden"/>	 <!--생일포인트 기지급여부	 	 -->
					<input id="tr_receive_Use47" name="tr_receive_Use47" type="hidden"/>	 <!--생일	 	 	 	 -->
					<input id="tr_receive_Use48" name="tr_receive_Use48" type="hidden"/>	 <!--결혼기념일포인트 기지급여부	 -->
					<input id="tr_receive_Use49" name="tr_receive_Use49" type="hidden"/>	 <!--결혼기념일	 	 	 	 -->
					<input id="tr_receive_Use50" name="tr_receive_Use50" type="hidden"/>	 <!--현금영수증자동발행여부	 	 -->
					<input id="tr_receive_Use51" name="tr_receive_Use51" type="hidden"/>	 <!--고객번호	 	 	 	 -->
					<input id="tr_receive_Use52" name="tr_receive_Use52" type="hidden"/>	 <!--회원이름	 	 	 	 -->
					<input id="tr_receive_Use53" name="tr_receive_Use53" type="hidden"/>	 <!--법인명	 	 	 	 -->
					<input id="tr_receive_Use54" name="tr_receive_Use54" type="hidden"/>	 <!--전화번호	 	 	 	 -->
					<input id="tr_receive_Use55" name="tr_receive_Use55" type="hidden"/>	 <!--핸드폰번호	 	 	 	 -->
					<input id="tr_receive_Use56" name="tr_receive_Use56" type="hidden"/>	 <!--주소1	 	 	 	 -->
					<input id="tr_receive_Use57" name="tr_receive_Use57" type="hidden"/>	 <!--주소2	 	 	 	 -->
					<input id="tr_receive_Use58" name="tr_receive_Use58" type="hidden"/>	 <!--제휴사최근거래일자	 	 	 -->
					<input id="tr_receive_Use59" name="tr_receive_Use59" type="hidden"/>	 <!--주거래점	 	 	 	 -->
					<input id="tr_receive_Use60" name="tr_receive_Use60" type="hidden"/>	 <!--참여사영역	 	 	 	 -->
					<!-- 포인트 사용승인 응답 종료 -->
					<!-- 포인트 사용취소 응답 시작 -->
					<input id="tr_receive_UseCancel01" name="tr_receive_UseCancel01" type="hidden"/>	 <!--고객 식별 구분코드			 -->
					<input id="tr_receive_UseCancel02" name="tr_receive_UseCancel02" type="hidden"/>	 <!--카드번호	 	 	 	 -->
					<input id="tr_receive_UseCancel03" name="tr_receive_UseCancel03" type="hidden"/>	 <!--FILLER	 	 	 	 -->
					<input id="tr_receive_UseCancel04" name="tr_receive_UseCancel04" type="hidden"/>	 <!--제휴가맹점번호	 	 	 -->
					<input id="tr_receive_UseCancel05" name="tr_receive_UseCancel05" type="hidden"/>	 <!--점포번호	 	 	 	 -->
					<input id="tr_receive_UseCancel06" name="tr_receive_UseCancel06" type="hidden"/>	 <!--POS번호	 	 	 	 -->
					<input id="tr_receive_UseCancel07" name="tr_receive_UseCancel07" type="hidden"/>	 <!--제휴사승인번호	 	 	 -->
					<input id="tr_receive_UseCancel08" name="tr_receive_UseCancel08" type="hidden"/>	 <!--거래일자	 	 	 	 -->
					<input id="tr_receive_UseCancel09" name="tr_receive_UseCancel09" type="hidden"/>	 <!--거래시간	 	 	 	 -->
					<input id="tr_receive_UseCancel10" name="tr_receive_UseCancel10" type="hidden"/>	 <!--거래구분	 	 	 	 -->
					<input id="tr_receive_UseCancel11" name="tr_receive_UseCancel11" type="hidden"/>	 <!--거래사유	 	 	 	 -->
					<input id="tr_receive_UseCancel12" name="tr_receive_UseCancel12" type="hidden"/>	 <!--승인번호	 	 	 	 -->
					<input id="tr_receive_UseCancel13" name="tr_receive_UseCancel13" type="hidden"/>	 <!--승인일자	 	 	 	 -->
					<input id="tr_receive_UseCancel14" name="tr_receive_UseCancel14" type="hidden"/>	 <!--승인시간	 	 	 	 -->
					<input id="tr_receive_UseCancel15" name="tr_receive_UseCancel15" type="hidden"/>	 <!--금회사용/취소포인트		 -->
					<input id="tr_receive_UseCancel16" name="tr_receive_UseCancel16" type="hidden"/>	 <!--봉투구매포인트	 	 	 -->
					<input id="tr_receive_UseCancel17" name="tr_receive_UseCancel17" type="hidden"/>	 <!--첫거래포인트 발생여부	 	 -->
					<input id="tr_receive_UseCancel18" name="tr_receive_UseCancel18" type="hidden"/>	 <!--첫거래포인트	 	 	 -->
					<input id="tr_receive_UseCancel19" name="tr_receive_UseCancel19" type="hidden"/>	 <!--생일포인트발생여부	 	 	 -->
					<input id="tr_receive_UseCancel20" name="tr_receive_UseCancel20" type="hidden"/>	 <!--생일포인트	 	 	 	 -->
					<input id="tr_receive_UseCancel21" name="tr_receive_UseCancel21" type="hidden"/>	 <!--결혼기념일 포인트발생여부	 	 -->
					<input id="tr_receive_UseCancel22" name="tr_receive_UseCancel22" type="hidden"/>	 <!--결혼기념일포인트	 	 	 -->
					<input id="tr_receive_UseCancel23" name="tr_receive_UseCancel23" type="hidden"/>	 <!--이벤트포인트	 	 	 -->
					<input id="tr_receive_UseCancel24" name="tr_receive_UseCancel24" type="hidden"/>	 <!--운영사이벤트포인트	 	 	 -->
					<input id="tr_receive_UseCancel25" name="tr_receive_UseCancel25" type="hidden"/>	 <!--가용포인트	 	 	 	 -->
					<input id="tr_receive_UseCancel26" name="tr_receive_UseCancel26" type="hidden"/>	 <!--잔여포인트부호	 	 	 -->
					<input id="tr_receive_UseCancel27" name="tr_receive_UseCancel27" type="hidden"/>	 <!--잔여포인트	 	 	 	 -->
					<input id="tr_receive_UseCancel28" name="tr_receive_UseCancel28" type="hidden"/>	 <!--제휴사잔여포인트부호		 -->
					<input id="tr_receive_UseCancel29" name="tr_receive_UseCancel29" type="hidden"/>	 <!--제휴사잔여포인트	 		 -->
					<input id="tr_receive_UseCancel30" name="tr_receive_UseCancel30" type="hidden"/>	 <!--메시지1	 	 	 	 -->
					<input id="tr_receive_UseCancel31" name="tr_receive_UseCancel31" type="hidden"/>	 <!--메시지2	 	 	 	 -->
					<input id="tr_receive_UseCancel32" name="tr_receive_UseCancel32" type="hidden"/>	 <!--매출금액	 	 	 	 -->
					<input id="tr_receive_UseCancel33" name="tr_receive_UseCancel33" type="hidden"/>	 <!--동전적립이용이력	 	 	 -->
					<input id="tr_receive_UseCancel34" name="tr_receive_UseCancel34" type="hidden"/>	 <!--동전적립잔여포인트	 	 	 -->
					<input id="tr_receive_UseCancel35" name="tr_receive_UseCancel35" type="hidden"/>	 <!--법인 사용제한 등록여부	 	 -->
					<input id="tr_receive_UseCancel36" name="tr_receive_UseCancel36" type="hidden"/>	 <!--포인트 대상금액	 	 	 -->
					<input id="tr_receive_UseCancel37" name="tr_receive_UseCancel37" type="hidden"/>	 <!--적립/적립취소포인트	 	 -->
					<input id="tr_receive_UseCancel38" name="tr_receive_UseCancel38" type="hidden"/>	 <!--현장할인금액	 	 	 -->
					<input id="tr_receive_UseCancel39" name="tr_receive_UseCancel39" type="hidden"/>	 <!--차감할인후 결제금액	 	 -->
					<input id="tr_receive_UseCancel40" name="tr_receive_UseCancel40" type="hidden"/>	 <!--FILLER	 	 	 	 -->
					<input id="tr_receive_UseCancel41" name="tr_receive_UseCancel41" type="hidden"/>	 <!--제휴사 회원 등급	 	 	 -->
					<input id="tr_receive_UseCancel42" name="tr_receive_UseCancel42" type="hidden"/>	 <!--멤버십 회원 등급	 	 	 -->
					<input id="tr_receive_UseCancel43" name="tr_receive_UseCancel43" type="hidden"/>	 <!--직원구분	 	 	 	 -->
					<input id="tr_receive_UseCancel44" name="tr_receive_UseCancel44" type="hidden"/>	 <!--제휴사법인구분	 	 	 -->
					<input id="tr_receive_UseCancel45" name="tr_receive_UseCancel45" type="hidden"/>	 <!--첫거래포인트 기지급여부	 	 -->
					<input id="tr_receive_UseCancel46" name="tr_receive_UseCancel46" type="hidden"/>	 <!--생일포인트 기지급여부	 	 -->
					<input id="tr_receive_UseCancel47" name="tr_receive_UseCancel47" type="hidden"/>	 <!--생일	 	 	 	 -->
					<input id="tr_receive_UseCancel48" name="tr_receive_UseCancel48" type="hidden"/>	 <!--결혼기념일포인트 기지급여부	 -->
					<input id="tr_receive_UseCancel49" name="tr_receive_UseCancel49" type="hidden"/>	 <!--결혼기념일	 	 	 	 -->
					<input id="tr_receive_UseCancel50" name="tr_receive_UseCancel50" type="hidden"/>	 <!--현금영수증자동발행여부	 	 -->
					<input id="tr_receive_UseCancel51" name="tr_receive_UseCancel51" type="hidden"/>	 <!--고객번호	 	 	 	 -->
					<input id="tr_receive_UseCancel52" name="tr_receive_UseCancel52" type="hidden"/>	 <!--회원이름	 	 	 	 -->
					<input id="tr_receive_UseCancel53" name="tr_receive_UseCancel53" type="hidden"/>	 <!--법인명	 	 	 	 -->
					<input id="tr_receive_UseCancel54" name="tr_receive_UseCancel54" type="hidden"/>	 <!--전화번호	 	 	 	 -->
					<input id="tr_receive_UseCancel55" name="tr_receive_UseCancel55" type="hidden"/>	 <!--핸드폰번호	 	 	 	 -->
					<input id="tr_receive_UseCancel56" name="tr_receive_UseCancel56" type="hidden"/>	 <!--주소1	 	 	 	 -->
					<input id="tr_receive_UseCancel57" name="tr_receive_UseCancel57" type="hidden"/>	 <!--주소2	 	 	 	 -->
					<input id="tr_receive_UseCancel58" name="tr_receive_UseCancel58" type="hidden"/>	 <!--제휴사최근거래일자	 	 	 -->
					<input id="tr_receive_UseCancel59" name="tr_receive_UseCancel59" type="hidden"/>	 <!--주거래점	 	 	 	 -->
					<input id="tr_receive_UseCancel60" name="tr_receive_UseCancel60" type="hidden"/>	 <!--참여사영역	 	 	 	 -->
					<!-- 포인트 사용취소 응답 종료 -->

					<!-- section 시작 -->
					<div class="section">
						<h3>
							<spring:message code="AT.E.ATE01.text240"  text="롯데멤버십포인트 사용정보"/>
						</h3>
						<!-- 타이틀이 없는 sub_button -->
						<div class="sub_btn_right_t btn_save">
							<span class="btn_table_in"><a href="#" id="btnUsePointFormReset">	<spring:message code="AT.E.ATE01.text207" text="화면클리어" /></a>
							</span>
							<span class="btn_table_in"><a href="#" id="btnUsePointAccept">	<spring:message	code="AT.E.ATE01.text247" text="Point사용 승인" /></a>
							</span>
							<span class="btn_table_in"><a href="#" id="btnUsePointCancel">	<spring:message	code="AT.E.ATE01.text248" text="Point사용 취소" /></a>
							</span>
						</div>
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup>	<col width="120px" />	<col width="*" />	<col width="120px" />	<col width="*" />	<col width="120px" />	<col width="*" /></colgroup><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text242"  text="고객식별구분"/></label></th>	<td>		<select id="USE_CUSTGUBUN" name="USE_CUSTGUBUN" disabled="disabled">
				                            <option value="1">카드번호</option>
				                            <option value="2">고객번호</option>
				                            <option value="3">카드고객번호</option>
				                        </select>	</td>	<th scope="row"><span class="color_im_bl">*</span><label for=""><spring:message code="AT.E.ATE01.text45"  text="카드번호"/></label></th>	<td colspan="3">		<input id="USE_CUSTCARDNO" name="USE_CUSTCARDNO" type="text" maxlength="16" class="basic name_s02p vt_notnull" value="" alt='<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>'/>		<!-- KEYIN or MSR -->		<input id="USE_CUSTCARDWCC" name="USE_CUSTCARDWCC" type="hidden"/>		<span class="btn_table_in btn_save"><a id="USE_CUSTACCEPT"><spring:message	code="AT.E.ATE01.text249" text="회원인증" /></a></span>		<span class="btn_table_in"><a href="#" id="btnCallMemCardData"><spring:message code="AT.E.ATE01.text250" text="멤버십카드정보호출" /></a></span>	</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text216"  text="고객명"/></label></th>	<td>		<input id="USE_CUSTNAME" name="USE_CUSTNAME" type="text" class="basic name off" value="" readonly="readonly"/>	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text243"  text="가용포인트"/></label></th>	<td>		<input id="USE_CUSTMAXPOINT" name="USE_CUSTMAXPOINT" type="text" class="basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text244"   text="잔여포인트"/></label></th>	<td>		<input id="USE_CUSTMINPOINT" name="USE_CUSTMINPOINT" type="text" class="basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	</td></tr><tr>	<td colspan="2">		가용포인트 1,000포인트 이상 사용가능합니다.(100포인트 단위)	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text245"  text="사용포인트"/></label></th>	<td>		<input id="USE_CUSTUSEPOINT" name="USE_CUSTUSEPOINT" type="text" class="basic value" value="0" jwork_mask="mask_money_pm" alt='<spring:message code="AT.E.ATE01.text245"  text="사용포인트"/>'/>	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text97"  text="승인번호" /></label></th>	<td>		<input id="USE_CUSTAPPRNO" name="USE_CUSTAPPRNO" type="text" class="basic value off" value="" readonly="readonly"/>		<input id="USE_CUSTAPPRNO2" name="USE_CUSTAPPRNO2" type="hidden"/>	 <!-- 제휴사승인번호	 	 	 	 -->	</td></tr>
							</table>
						</div>
					</div>
					<!-- section 종료 -->
				</form>
				<form id="memPointFormSave">
					<!-- section 시작 -->
					<div class="section">
						<h3>
							<spring:message code="AT.E.ATE01.text241"  text="롯데멤버십포인트 적립정보"/>
						</h3>
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup>	<col width="120px" />	<col width="*" />	<col width="120px" />	<col width="*" />	<col width="120px" />	<col width="*" /></colgroup><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text163"  text="카드번호"/></label></th>	<td>		<input id="SAVE_CUSTCARDNO" name="SAVE_CUSTCARDNO" type="text" class="basic name_s02p off" value=""  alt='<spring:message code="AT.E.ATE01.text89"  text="카드번호"/>' readonly="readonly"/>	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text45"  text="승인번호"/></label></th>		<td><input id="SAVE_CUSTAPPRNO" name="SAVE_CUSTAPPRNO" type="text" class="basic off" value="" readonly="readonly"/>		<input id="SAVE_CUSTAPPRNO2" name="SAVE_CUSTAPPRNO2" type="hidden"/>	 <!-- 제휴사승인번호	 	 	 	 -->		<input id="SAVE_CUSTGUBUN" name="SAVE_CUSTGUBUN" type="hidden"/>		 <!-- 고객식별구분 1:카드번호 , 2:고객번호, 3:카드고객번호 	 	 	 	 -->		<input id="SAVE_CUSTCARDWCC" name="SAVE_CUSTCARDWCC" type="hidden"/>		 <!-- 고객식별구분 1:카드번호 , 2:고객번호, 3:카드고객번호 	 	 	 	 -->	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text45"  text="적립포인트"/></label></th>	<td>		<input id="SAVE_CUSTSAVEPOINT" name="SAVE_CUSTSAVEPOINT" type="text" class="basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	</td></tr>
							</table>
						</div>
					</div>
					<!-- section 종료 -->
				</form>
			</div>
			<!-- 롯데멤버십포인트 종료 -->
			<!-- 전체시재 -->
			<div id="divSija" class="section" style="display: none;">
				<!-- section 시작 -->
				<div class="section">
					<!-- table 영역 -->
					<div class="table-box">
						<table class="tbl_Form" summary="등록정보">
							<caption>등록정보</caption>
							<colgroup><col width="120px" /><col width="*" /><col width="120px" /><col width="*" /><col width="120px" /><col width="*" />
							</colgroup>
							<tr><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text161"  text="현금총액"/></label></th><td><input id="totalCashAmt" name="totalCashAmt" type="text" class="SijaCashAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('1')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text165"  text="외상발생금액"/></label></th><td><input type="text" class="SijaCreditAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('5')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text164"  text="수표총액"/></label></th><td><input type="text" class="SijaSupyAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('1')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td>
							</tr>
							<tr><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text168"  text="선수금발생"/></label></th><td><input id="totalSupyoAmt" name="totalSupyoAmt" type="text" id="sunVal" class="SijaPPaidAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('6')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text43"  text="가수금"/></label></th><td><input type="text" class="SijaSRecpAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('8')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text167"  text="카드결제금총액"/></label></th><td><input id="input_card" type="text" class="SijaCardAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('2')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td>
							</tr>
							<tr><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text42"  text="선수금대체"/></label></th><td><input name="Input" type="text" class="SijaRepPaidAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('6')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text163"  text="현금과다금액"/></label></th><td><input type="text" class="SijaCashOSAmt2 basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('9')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text169"  text="상품권총액"/></label></th><td><input id="totalGiftAmt" name="totalGiftAmt" type="text" class="SijaGiftAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('3')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td>
							</tr>
							<tr><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text162"  text="받은외화총금액"/></label></th><td><input type="text" class="SijaForeAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('4')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text166"  text="무통장총금액"/></label></th><td><input type="text" class="SijaBankAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('7')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text45"  text="잡이익"/></label></th><td><input type="text" class="SijaCashOSAmt1 basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('9')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td>
							</tr>
							<tr><th scope="row"><label for="">티켓선수발생</label></th><td><input name="Input" id="tktSunVal" type="text" class="SijaPPaidTickeAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('6')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text40"  text="티켓선수VAT"/></label></th><td><input name="Input" id="tktSVAT" type="text" class="SijaPPaidTickeAmtVAT basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('6')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text239"  text="롯데멤버십포인트"/></label></th><td><input name="Input" id="LotteMemPoint" type="text" class=" basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('11')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td>
							</tr>
							<tr><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text261"  text="핸드링충전"/></label></th><td><input type="text" class="SijaBandChargeAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('14')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text262"  text="핸드링환불"/></label></th><td><input type="text" class="SijaBandRefundAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('15')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td>
							</tr>
							<tr><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text263"  text="본지점발생"/></label></th><td><input type="text" class="SijaDivGsberBAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('16')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text264"  text="본지점대체"/></label></th><td><input type="text" class="SijaDivGsberDAmt basic value off" value="" jwork_mask="mask_money_pm" readonly="readonly"/>	<span class="btn_table_in"><a onclick="tabClick('16')" href="#"><spring:message code="AT.E.ATE01.text231"  text="상세보기"/></a></span></td>
							</tr>
						</table>
					</div>
				</div>
				<!-- section 종료 -->
				<!-- section 시작 -->
				<div class="section">
					<!-- table 영역 -->
					<div class="table-box">
						<table class="tbl_Form" summary="상세정보">
							<caption>상세정보</caption>
							<colgroup><col width="120px" /><col width="*" /><col width="120px" /><col width="*" /><col width="110px" /><col width="*" /><col width="110px" /><col width="*" />
							</colgroup>
							<tr><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text172"  text="매출액합계2"/></label></th><td id="SijaSaleTotAmt" class="right">0</td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text173"  text="총결제금액"/></label></th><td id="SijaApprTotAmt" class="right">0</td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text174"  text="총거스름금액"/></label></th><td id="SijaChanTotAmt" class="right">0</td><th scope="row"><label for=""><spring:message code="AT.E.ATE01.text175"  text="총미결제금액"/></label></th><td id="SijaNappTotAmt" class="right">0</td>
							</tr>
						</table>
					</div>
				</div>
				<!-- section 종료 -->

			</div>
			<!-- 전체시재 종료 -->

			<!-- 카드업로드-->
			<div id="divImport" class="section" style="display: none;">
				<!-- 내부 section 시작 -->
				<div class="section">
					<h3>
						<select id="selectImportGrid">
							<option value="1"><spring:message code="AT.E.ATE01.text232"  text="뽀로로파크"/></option>
							<option value="2"><spring:message code="AT.E.ATE01.text233"  text="롯데리아/키즈시흥점"/></option>
							<option value="3"><spring:message code="AT.E.ATE01.text234"  text="세븐일레븐"/></option>
						</select>
					<spring:message code="AT.E.ATE01.text235"  text="업로드"/>
					<span class="show_hide_wrap">
			            <img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn" name="divImport"/>
			        </span></h3>
					<!-- 타이틀이 없는 sub_button -->
					<div class="sub_btn_right_t btn_save">
						<span class="btn_table_in"><a href="#" id="btnCardExcelTemplate"><spring:message code="AT.E.ATE01.text236"  text="엑셀 양식다운로드"/></a></span>
						<span class="btn_table_in"><a href="#" id="btnCardExcelImport"><spring:message code="AT.E.ATE01.text237"  text="엑셀 업로드"/></a></span>
						<span class="btn_row_del"><a href="#" class="btnRowDelete" value="CardImport"><spring:message code="AT.E.ATE01.text158" text="행삭제" /></a></span>
					</div>
					<div id="CardImportForm1" class="table-box grid_wrap grid_height_l">
						<div id="CardImpotGrid1" style="width: 100%; height: 100%;"></div>
					</div>
					<div id="CardImportForm2" class="table-box grid_wrap grid_height_l" style="display: none;">
						<div id="CardImpotGrid2" style="width: 100%; height: 100%;"></div>
					</div>
					<div id="CardImportForm3" class="table-box grid_wrap grid_height_l" style="display: none;">
						<div id="CardImpotGrid3" style="width: 100%; height: 100%;"></div>
					</div>
				</div>
				<!-- 내부 section 종료 -->
			</div>
			<!-- 카드업로드 종료 -->


			<!-- 핸드링충전 -->
			<div id="divSbandCharge" class="section" style="display: none;">
				<form id="sBandChargeForm">
					<input type="hidden" name="Seq">
					<!-- section 시작 -->
					<div class="section">
						<h3><spring:message code="AT.E.ATE01.text261"  text="핸드링충전"/></h3>
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup>	<col width="120px" />	<col width="*" />	<col width="120px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" /></colgroup><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text227"  text="충전금액"/></label></th>	<td colspan="2">		<input id="SbandChargeAmt" name="SbandChargeAmt" type="text" class="basic value" value="" jwork_mask="mask_money_pm" />	</td></tr></tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text216"  text="핸드링번호"/></label></th>	<td  colspan="2">		<input id="BANDCHARGE_NO" name="BANDCHARGE_NO" type="text" class="basic name" maxlength="8" value=""/>	</td></tr><tr>	<th scope="row">			<label for="">				<span class="color_im_bl">				</span>				<spring:message	code="AT.E.ATE01.text213" text="승인PG사" />			</label>		</th>		<td>			<span id="spn_PgTypeCd"></span>		</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text150"  text="비고"/></label></th>	<td colspan="2">		<textarea id="SbandChargeEtc" name="SbandChargeEtc" rows="3" class="size-98p" maxlength="50"></textarea>	</td></tr>
							</table>
						</div>
					</div>
					<!-- section 종료 -->
				</form>
				</div>
			<!-- 핸드링충전 종료 -->
			<!-- 핸드링환불 -->
				<div id="divSBandRefund" class="section" style="display: none;">
				<form id="sBandRefundForm">
					<input type="hidden" name="Seq">
					<!-- section 시작 -->
					<div class="section">
						<h3><spring:message code="AT.E.ATE01.text262"  text="핸드링환불"/></h3>
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup>	<col width="120px" />	<col width="*" />	<col width="120px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" /></colgroup><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text227"  text="환불금액"/></label></th>	<td>		<input id="SbandRefundAmt" name="SbandRefundAmt" type="text" class="basic value" value="" jwork_mask="mask_money_pm" />	</td colspan="7"></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text216"  text="핸드링번호"/></label></th>	<td colspan="7">		<input id="BANDREFUND_NO" name="BANDREFUND_NO" type="text" class="basic name" maxlength="8" value=""/>	</td><tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text150"  text="비고"/></label></th>	<td colspan="7">		<textarea id="SbandRefundEtc" name="SbandRefundEtc" rows="3" class="size-98p" maxlength="50"></textarea>	</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text32" text="원승인일자"/></label></th>	<td colspan="7">		<input name="OrgSellDate" id="OrgSellDate" type="text" class="basic date vt_notnull" value="" jwork_mask="mask_date" alt="<spring:message code="AT.I.ATI03.text32" text="원승인일자"/>"/>	</td></tr><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text33" text="포스번호"/></label></th>	<td colspan="7">		<input name="OrgPosId" id="OrgPosId" type="text"  class="basic num vt_notnull" jwork_mask="mask_num4" value="" alt="<spring:message code="AT.I.ATI03.text33" text="포스번호"/>"/>	</td><tr>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text02" text="전표번호"/></label></th>	<td colspan="7">		<input name="OrgSlipId" id="OrgSlipId" type="text"  class="basic num vt_notnull" jwork_mask="mask_num4" value="" alt="<spring:message code="AT.I.ATI03.text02" text="전표번호"/>"/>
	</td></tr><tr>	<th scope="row">			<label for="">				<span class="color_im_bl">				</span>				<spring:message	code="AT.E.ATE01.text213" text="취소PG사" />			</label>		</th>		<td>			<span id="spn_PgTypeCd"></span>		</td></tr>
							</table>
						</div>
					</div>
					<!-- section 종료 -->
				</form>
				</div>
			<!-- 핸드링환불 종료 -->
			<!-- 본지점 발생 및 대체 -->
			<div id="divDivGsber" class="section" style="display: none;">
				<form id="DivGsberForm">
					<input type="hidden" name="Seq">
					<!-- section 시작 -->
					<div class="section">
						<h3><spring:message code="AT.E.ATE01.text261"  text="본지점발생/대체"/></h3>
						<div class="table-box">
							<table class="tbl_Form" summary="상세정보"><caption>상세정보</caption><colgroup>	<col width="120px" />	<col width="*" />	<col width="120px" />	<col width="*" />	<col width="110px" />	<col width="*" />	<col width="110px" />	<col width="*" /></colgroup><tr>	<th scope="row">		<span class="color_im_bl">*</span><label for=""><spring:message code="AT.E.ATE01.text141"	text="본지점사업영역" /></label>	</th>	<td>	<jcode:select id="DivGsberSttlGSBER" name="DivGsberSttlGSBER" type="COM.GSBER" beanId="LotteComboSelectBoxService"
                                                          formId="GSBER" isEmptySelect="false"
                                                          onchange="onChangeDivGsberSttlGsberCombo();"/></td>	<th scope="row">		<span class="color_im_bl">*</span><label for=""><spring:message code="AT.E.ATE01.text141"	text="본지점시재구분" /></label>	</th>	<td>
<%-- 									<jcode:select id="DivGsberSttlCd" name="DivGsberSttlCd" codeGrpId="T16" isEmptySelect="false" onchange="onChangeDivGsberSttlCd();" /> --%>		<span id="spn_DivGsberSttlCd" isEmptySelect="false"></span>	</td>
	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text266"  text="본지점발생금액"/></label></th>	<td>		<input id="DivGsberBAmt" name="DivGsberBAmt" type="text" class="basic value"  value="" jwork_mask="mask_money_pm" />	</td>	<th scope="row"><label for=""><spring:message code="AT.E.ATE01.text267"  text="본지점대체금액"/></label></th>	<td>		<input id="DivGsberDAmt" name="DivGsberDAmt" type="text" class="basic value"  value="" jwork_mask="mask_money_pm" />	</td></tr>
							</table>
						</div>
					</div>
					<!-- section 종료 -->
				</form>
				</div>
				<!-- 본지점 발생 및 대체 종료-->

				<!-- PG사 업로드 시작 -->
				<div id="divPGImport" class="section" style="display: none;">
				<!-- 내부 section 시작 -->
				<div class="section">
					<h3>
						<%-- <select id="selectImportGrid">
							<option value="1"><spring:message code="AT.E.ATE01.text232"  text="뽀로로파크"/></option>
							<option value="2"><spring:message code="AT.E.ATE01.text233"  text="롯데리아/키즈시흥점"/></option>
							<option value="3"><spring:message code="AT.E.ATE01.text234"  text="세븐일레븐"/></option>
						</select> --%>
					<spring:message code="AT.E.ATE01.text235"  text="업로드"/>
					<span class="show_hide_wrap">
			            <img src="<c:url value='/resources/theme/${theme}/image/btn/ico_grid_hide.gif'/>" class="gird-hide-btn" name="divPGImport"/>
			        </span></h3>
					<!-- 타이틀이 없는 sub_button -->
					<div class="sub_btn_right_t btn_save">
						<span class="btn_table_in"><a href="#" id="btnPGExcelTemplate"><spring:message code="AT.E.ATE01.text236"  text="엑셀 양식다운로드"/></a></span>
						<span class="btn_table_in"><a href="#" id="btnPGExcelImport"><spring:message code="AT.E.ATE01.text237"  text="엑셀 업로드"/></a></span>
						<span class="btn_row_del"><a href="#" class="btnRowDelete" value="PGImport"><spring:message code="AT.E.ATE01.text158" text="행삭제" /></a></span>
					</div>
					<div id="PGImportGrid" class="table-box grid_wrap grid_height_l">
						<div id="PGImportGrid" style="width: 100%; height: 100%;"></div>
					</div>
				</div>
				<!-- 내부 section 종료 -->
			</div>
				<!-- PG사 업로드 종료-->
		</div>
		<!-- exists title sub_button -->
		<div class="sub_btn_right_t">
			<span class="btn_basic"><a id="btnClose" href="#"><spring:message code="jwork.common.button.close" text="닫기" /></a></span>
		</div>
	</div>
</div>
<!-- add : ClipReport4 | 2016.05.19 | @author : Park.song.ie	(IT통합개발팀수정) -->
<div id='targetDiv1'></div>
<jsp:include page="/WEB-INF/jsp/lotte/at/e/ATE01_inc.jsp" flush="true"/>
</body>
</html>
